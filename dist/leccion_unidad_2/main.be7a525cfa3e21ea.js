"use strict";(self.webpackChunkleccion_unidad_2=self.webpackChunkleccion_unidad_2||[]).push([[179],{562:(bi,Dn,Me)=>{Me.d(Dn,{$:()=>Yp,A:()=>re,G:()=>pt,K:()=>Tv,L:()=>No,N:()=>Fr,P:()=>gc,R:()=>Eg,U:()=>ve,V:()=>Pd,W:()=>Yu,X:()=>mi,Y:()=>ki,Z:()=>Lr,_:()=>Vo,a:()=>Ui,a0:()=>xd,a1:()=>nc,a2:()=>Ud,a3:()=>tg,a4:()=>Sv,a5:()=>Un,a6:()=>Uo,a7:()=>ng,a8:()=>Ba,a9:()=>Rv,aA:()=>Ge,aB:()=>It,aC:()=>te,aD:()=>$i,aE:()=>W,aF:()=>Oe,aG:()=>Ya,aH:()=>Ag,aI:()=>Zo,aJ:()=>Kt,aN:()=>fn,aQ:()=>Ji,aa:()=>fe,ab:()=>Bt,ac:()=>_i,ad:()=>Xn,ae:()=>Bo,af:()=>Ue,ag:()=>rg,ah:()=>hn,ak:()=>$a,al:()=>Is,am:()=>Xi,ap:()=>Jp,aq:()=>Ha,as:()=>c0,at:()=>p0,au:()=>Vt,av:()=>we,aw:()=>k,ax:()=>et,ay:()=>Qo,az:()=>Mg,b:()=>Mv,c:()=>ws,d:()=>Cg,e:()=>zv,f:()=>qv,g:()=>jn,h:()=>dt,i:()=>hc,j:()=>Bi,k:()=>$g,l:()=>$v,m:()=>iI,p:()=>Nt,r:()=>jv,s:()=>wg,u:()=>xt});var T=Me(861),q=Me(58),x=Me(534),De=Me(879),ft=Me(582),Wt=Me(537);const Nt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},re={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const pt=function Te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Cn=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},nt=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fe=new De.Yd("@firebase/auth");function qt(f,...c){Fe.logLevel<=De.in.ERROR&&Fe.error(`Auth (${x.SDK_VERSION}): ${f}`,...c)}function et(f,...c){throw qe(f,...c)}function It(f,...c){return qe(f,...c)}function Rr(f,c,d){const p=Object.assign(Object.assign({},Cn()),{[c]:d});return new q.LL("auth","Firebase",p).create(c,{appName:f.name})}function pn(f,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&et(f,"argument-error"),Rr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(f,...c){if("string"!=typeof f){const d=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(d,...p)}return nt.create(f,...c)}function te(f,c,...d){if(!f)throw qe(c,...d)}function st(f){const c="INTERNAL ASSERTION FAILED: "+f;throw qt(c),new Error(c)}function Vt(f,c){f||st(c)}function nn(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function un(){return"http:"===li()||"https:"===li()}function li(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Pr{constructor(c,d){this.shortDelay=c,this.longDelay=d,Vt(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function di(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(un()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Si(f,c){Vt(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class L{static initialize(c,d,p){this.fetchImpl=c,d&&(this.headersImpl=d),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void st("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void st("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void st("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},j=new Pr(3e4,6e4);function V(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function Q(f,c,d,p){return K.apply(this,arguments)}function K(){return(K=(0,T.Z)(function*(f,c,d,p,_={}){return ue(f,_,(0,T.Z)(function*(){let E={},R={};p&&("GET"===c?R=p:E={body:JSON.stringify(p)});const F=(0,q.xO)(Object.assign({key:f.config.apiKey},R)).slice(1),X=yield f._getAdditionalHeaders();return X["Content-Type"]="application/json",f.languageCode&&(X["X-Firebase-Locale"]=f.languageCode),L.fetch()(ut(f,f.config.apiHost,d,F),Object.assign({method:c,headers:X,referrerPolicy:"no-referrer"},E))}))})).apply(this,arguments)}function ue(f,c,d){return Je.apply(this,arguments)}function Je(){return(Je=(0,T.Z)(function*(f,c,d){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},$),c);try{const _=new bt(f),E=yield Promise.race([d(),_.promise]);_.clearNetworkTimeout();const R=yield E.json();if("needConfirmation"in R)throw Gt(f,"account-exists-with-different-credential",R);if(E.ok&&!("errorMessage"in R))return R;{const F=E.ok?R.errorMessage:R.error.message,[X,me]=F.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===X)throw Gt(f,"credential-already-in-use",R);if("EMAIL_EXISTS"===X)throw Gt(f,"email-already-in-use",R);if("USER_DISABLED"===X)throw Gt(f,"user-disabled",R);const Re=p[X]||X.toLowerCase().replace(/[_\s]+/g,"-");if(me)throw Rr(f,Re,me);et(f,Re)}}catch(_){if(_ instanceof q.ZR)throw _;et(f,"network-request-failed",{message:String(_)})}})).apply(this,arguments)}function ge(f,c,d,p){return Se.apply(this,arguments)}function Se(){return(Se=(0,T.Z)(function*(f,c,d,p,_={}){const E=yield Q(f,c,d,p,_);return"mfaPendingCredential"in E&&et(f,"multi-factor-auth-required",{_serverResponse:E}),E})).apply(this,arguments)}function ut(f,c,d,p){const _=`${c}${d}?${p}`;return f.config.emulator?Si(f.config,_):`${f.config.apiScheme}://${_}`}function Lt(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bt{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,p)=>{this.timer=setTimeout(()=>p(It(this.auth,"network-request-failed")),j.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gt(f,c,d){const p={appName:f.name};d.email&&(p.email=d.email),d.phoneNumber&&(p.phoneNumber=d.phoneNumber);const _=It(f,c,p);return _.customData._tokenResponse=d,_}function An(f){return void 0!==f&&void 0!==f.getResponse}function bn(f){return void 0!==f&&void 0!==f.enterprise}class Fn{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return Lt(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function hi(){return(hi=(0,T.Z)(function*(f){return(yield Q(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ri(f,c){return ct.apply(this,arguments)}function ct(){return(ct=(0,T.Z)(function*(f,c){return Q(f,"GET","/v2/recaptchaConfig",V(f,c))})).apply(this,arguments)}function Mi(){return(Mi=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function pi(){return(pi=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Mr(){return(Mr=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Nr(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Et(){return(Et=(0,T.Z)(function*(f,c=!1){const d=(0,q.m9)(f),p=yield d.getIdToken(c),_=cn(p);te(_&&_.exp&&_.auth_time&&_.iat,d.auth,"internal-error");const E="object"==typeof _.firebase?_.firebase:void 0,R=E?.sign_in_provider;return{claims:_,token:p,authTime:Nr(Or(_.auth_time)),issuedAtTime:Nr(Or(_.iat)),expirationTime:Nr(Or(_.exp)),signInProvider:R||null,signInSecondFactor:E?.sign_in_second_factor||null}})).apply(this,arguments)}function Or(f){return 1e3*Number(f)}function cn(f){const[c,d,p]=f.split(".");if(void 0===c||void 0===d||void 0===p)return qt("JWT malformed, contained fewer than 3 sections"),null;try{const _=(0,q.tV)(d);return _?JSON.parse(_):(qt("Failed to decode base64 JWT payload"),null)}catch(_){return qt("Caught error parsing JWT payload as JSON",_?.toString()),null}}function Zt(f,c){return ln.apply(this,arguments)}function ln(){return(ln=(0,T.Z)(function*(f,c,d=!1){if(d)return c;try{return yield c}catch(p){throw p instanceof q.ZR&&function Ni({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class xi{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const _=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,_)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,T.Z)(function*(){yield d.iteration()}),p)}iteration(){var c=this;return(0,T.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class gi{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nr(this.lastLoginAt),this.creationTime=Nr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sn(f){return gn.apply(this,arguments)}function gn(){return gn=(0,T.Z)(function*(f){var c;const d=f.auth,p=yield f.getIdToken(),_=yield Zt(f,function Zn(f,c){return Mr.apply(this,arguments)}(d,{idToken:p}));te(_?.users.length,d,"internal-error");const E=_.users[0];f._notifyReloadListener(E);const R=null!==(c=E.providerUserInfo)&&void 0!==c&&c.length?function fs(f){return f.map(c=>{var{providerId:d}=c,p=(0,ft._T)(c,["providerId"]);return{providerId:d,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(E.providerUserInfo):[],F=function Mo(f,c){return[...f.filter(p=>!c.some(_=>_.providerId===p.providerId)),...c]}(f.providerData,R),Re=!!f.isAnonymous&&!(f.email&&E.passwordHash||F?.length),it={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:F,metadata:new gi(E.createdAt,E.lastLoginAt),isAnonymous:Re};Object.assign(f,it)}),gn.apply(this,arguments)}function kr(){return(kr=(0,T.Z)(function*(f){const c=(0,q.m9)(f);yield Sn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Oi(){return(Oi=(0,T.Z)(function*(f,c){const d=yield ue(f,{},(0,T.Z)(function*(){const p=(0,q.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:_,apiKey:E}=f.config,R=ut(f,_,"/v1/token",`key=${E}`),F=yield f._getAdditionalHeaders();return F["Content-Type"]="application/x-www-form-urlencoded",L.fetch()(R,{method:"POST",headers:F,body:p})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function C(){return(C=(0,T.Z)(function*(f,c){return Q(f,"POST","/v2/accounts:revokeToken",V(f,c))})).apply(this,arguments)}class I{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){te(c.idToken,"internal-error"),te(typeof c.idToken<"u","internal-error"),te(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function ka(f){const c=cn(f);return te(c,"internal-error"),te(typeof c.exp<"u","internal-error"),te(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}getToken(c,d=!1){var p=this;return(0,T.Z)(function*(){return te(!p.accessToken||p.refreshToken,c,"user-token-expired"),d||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var p=this;return(0,T.Z)(function*(){const{accessToken:_,refreshToken:E,expiresIn:R}=yield function zs(f,c){return Oi.apply(this,arguments)}(c,d);p.updateTokensAndExpiration(_,E,Number(R))})()}updateTokensAndExpiration(c,d,p){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,d){const{refreshToken:p,accessToken:_,expirationTime:E}=d,R=new I;return p&&(te("string"==typeof p,"internal-error",{appName:c}),R.refreshToken=p),_&&(te("string"==typeof _,"internal-error",{appName:c}),R.accessToken=_),E&&(te("number"==typeof E,"internal-error",{appName:c}),R.expirationTime=E),R}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new I,this.toJSON())}_performRefresh(){return st("not implemented")}}function w(f,c){te("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class v{constructor(c){var{uid:d,auth:p,stsTokenManager:_}=c,E=(0,ft._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=p,this.stsTokenManager=_,this.accessToken=_.accessToken,this.displayName=E.displayName||null,this.email=E.email||null,this.emailVerified=E.emailVerified||!1,this.phoneNumber=E.phoneNumber||null,this.photoURL=E.photoURL||null,this.isAnonymous=E.isAnonymous||!1,this.tenantId=E.tenantId||null,this.providerData=E.providerData?[...E.providerData]:[],this.metadata=new gi(E.createdAt||void 0,E.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,T.Z)(function*(){const p=yield Zt(d,d.stsTokenManager.getToken(d.auth,c));return te(p,d.auth,"internal-error"),d.accessToken!==p&&(d.accessToken=p,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),p})()}getIdTokenResult(c){return function Ln(f){return Et.apply(this,arguments)}(this,c)}reload(){return function Kn(f){return kr.apply(this,arguments)}(this)}_assign(c){this!==c&&(te(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new v(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var p=this;return(0,T.Z)(function*(){let _=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),_=!0),d&&(yield Sn(p)),yield p.auth._persistUserIfCurrent(p),_&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,T.Z)(function*(){const d=yield c.getIdToken();return yield Zt(c,function Pi(f,c){return Mi.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var p,_,E,R,F,X,me,Re;const it=null!==(p=d.displayName)&&void 0!==p?p:void 0,lr=null!==(_=d.email)&&void 0!==_?_:void 0,ns=null!==(E=d.phoneNumber)&&void 0!==E?E:void 0,nu=null!==(R=d.photoURL)&&void 0!==R?R:void 0,Hg=null!==(F=d.tenantId)&&void 0!==F?F:void 0,Xo=null!==(X=d._redirectEventId)&&void 0!==X?X:void 0,Ds=null!==(me=d.createdAt)&&void 0!==me?me:void 0,zg=null!==(Re=d.lastLoginAt)&&void 0!==Re?Re:void 0,{uid:Rc,emailVerified:mh,isAnonymous:ea,providerData:_h,stsTokenManager:tr}=d;te(Rc&&tr,c,"internal-error");const uI=I.fromJSON(this.name,tr);te("string"==typeof Rc,c,"internal-error"),w(it,c.name),w(lr,c.name),te("boolean"==typeof mh,c,"internal-error"),te("boolean"==typeof ea,c,"internal-error"),w(ns,c.name),w(nu,c.name),w(Hg,c.name),w(Xo,c.name),w(Ds,c.name),w(zg,c.name);const Rn=new v({uid:Rc,auth:c,email:lr,emailVerified:mh,displayName:it,isAnonymous:ea,photoURL:nu,phoneNumber:ns,tenantId:Hg,stsTokenManager:uI,createdAt:Ds,lastLoginAt:zg});return _h&&Array.isArray(_h)&&(Rn.providerData=_h.map(yh=>Object.assign({},yh))),Xo&&(Rn._redirectEventId=Xo),Rn}static _fromIdTokenResponse(c,d,p=!1){return(0,T.Z)(function*(){const _=new I;_.updateFromServerResponse(d);const E=new v({uid:d.localId,auth:c,stsTokenManager:_,isAnonymous:p});return yield Sn(E),E})()}}const A=new Map;function W(f){Vt(f instanceof Function,"Expected a class definition");let c=A.get(f);return c?(Vt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,A.set(f,c),c)}const ve=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.Z)(function*(){return!0})()}_set(d,p){var _=this;return(0,T.Z)(function*(){_.storage[d]=p})()}_get(d){var p=this;return(0,T.Z)(function*(){const _=p.storage[d];return void 0===_?null:_})()}_remove(d){var p=this;return(0,T.Z)(function*(){delete p.storage[d]})()}_addListener(d,p){}_removeListener(d,p){}}return f.type="NONE",f})();function Oe(f,c,d){return`firebase:${f}:${c}:${d}`}class lt{constructor(c,d,p){this.persistence=c,this.auth=d,this.userKey=p;const{config:_,name:E}=this.auth;this.fullUserKey=Oe(this.userKey,_.apiKey,E),this.fullPersistenceKey=Oe("persistence",_.apiKey,E),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,T.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?v._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,T.Z)(function*(){if(d.persistence===c)return;const p=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,p?d.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,p="authUser"){return(0,T.Z)(function*(){if(!d.length)return new lt(W(ve),c,p);const _=(yield Promise.all(d.map(function(){var me=(0,T.Z)(function*(Re){if(yield Re._isAvailable())return Re});return function(Re){return me.apply(this,arguments)}}()))).filter(me=>me);let E=_[0]||W(ve);const R=Oe(p,c.config.apiKey,c.name);let F=null;for(const me of d)try{const Re=yield me._get(R);if(Re){const it=v._fromJSON(c,Re);me!==E&&(F=it),E=me;break}}catch{}const X=_.filter(me=>me._shouldAllowMigration);return E._shouldAllowMigration&&X.length?(E=X[0],F&&(yield E._set(R,F.toJSON())),yield Promise.all(d.map(function(){var me=(0,T.Z)(function*(Re){if(Re!==E)try{yield Re._remove(R)}catch{}});return function(Re){return me.apply(this,arguments)}}())),new lt(E,c,p)):new lt(E,c,p)})()}}function he(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Ws(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Dt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(P(c))return"Blackberry";if(ee(c))return"Webos";if(Ce(c))return"Safari";if((c.includes("chrome/")||On(c))&&!c.includes("edge/"))return"Chrome";if(k(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Dt(f=(0,q.z$)()){return/firefox\//i.test(f)}function Ce(f=(0,q.z$)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function On(f=(0,q.z$)()){return/crios\//i.test(f)}function Ws(f=(0,q.z$)()){return/iemobile/i.test(f)}function k(f=(0,q.z$)()){return/android/i.test(f)}function P(f=(0,q.z$)()){return/blackberry/i.test(f)}function ee(f=(0,q.z$)()){return/webos/i.test(f)}function we(f=(0,q.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Ge(f=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}function dn(f=(0,q.z$)()){return we(f)||k(f)||ee(f)||P(f)||/windows phone/i.test(f)||Ws(f)}function Xe(f,c=[]){let d;switch(f){case"Browser":d=he((0,q.z$)());break;case"Worker":d=`${he((0,q.z$)())}-${f}`;break;default:d=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${x.SDK_VERSION}/${p}`}class Va{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const p=E=>new Promise((R,F)=>{try{R(c(E))}catch(X){F(X)}});p.onAbort=d,this.queue.push(p);const _=this.queue.length-1;return()=>{this.queue[_]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,T.Z)(function*(){if(d.auth.currentUser===c)return;const p=[];try{for(const _ of d.queue)yield _(c),_.onAbort&&p.push(_.onAbort)}catch(_){p.reverse();for(const E of p)try{E()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:_?.message})}})()}}function yd(){return(yd=(0,T.Z)(function*(f,c={}){return Q(f,"GET","/v2/passwordPolicy",V(f,c))})).apply(this,arguments)}class Vr{constructor(c){var d,p,_,E;const R=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=R.minPasswordLength)&&void 0!==d?d:6,R.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=R.maxPasswordLength),void 0!==R.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=R.containsLowercaseCharacter),void 0!==R.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=R.containsUppercaseCharacter),void 0!==R.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=R.containsNumericCharacter),void 0!==R.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=R.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(_=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==_?_:"",this.forceUpgradeOnSignin=null!==(E=c.forceUpgradeOnSignin)&&void 0!==E&&E,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,p,_,E,R,F;const X={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,X),this.validatePasswordCharacterOptions(c,X),X.isValid&&(X.isValid=null===(d=X.meetsMinPasswordLength)||void 0===d||d),X.isValid&&(X.isValid=null===(p=X.meetsMaxPasswordLength)||void 0===p||p),X.isValid&&(X.isValid=null===(_=X.containsLowercaseLetter)||void 0===_||_),X.isValid&&(X.isValid=null===(E=X.containsUppercaseLetter)||void 0===E||E),X.isValid&&(X.isValid=null===(R=X.containsNumericCharacter)||void 0===R||R),X.isValid&&(X.isValid=null===(F=X.containsNonAlphanumericCharacter)||void 0===F||F),X}validatePasswordLengthOptions(c,d){const p=this.customStrengthOptions.minPasswordLength,_=this.customStrengthOptions.maxPasswordLength;p&&(d.meetsMinPasswordLength=c.length>=p),_&&(d.meetsMaxPasswordLength=c.length<=_)}validatePasswordCharacterOptions(c,d){let p;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let _=0;_<c.length;_++)p=c.charAt(_),this.updatePasswordCharacterOptionsStatuses(d,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,d,p,_,E){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=_)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=E))}}class XA{constructor(c,d,p,_){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vv(this),this.idTokenSubscription=new vv(this),this.beforeStateQueue=new Va(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(c,d){var p=this;return d&&(this._popupRedirectResolver=W(d)),this._initializationPromise=this.queue((0,T.Z)(function*(){var _,E;if(!p._deleted&&(p.persistenceManager=yield lt.create(p,c),!p._deleted)){if(null!==(_=p._popupRedirectResolver)&&void 0!==_&&_._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(d),p.lastNotifiedUid=(null===(E=p.currentUser)||void 0===E?void 0:E.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,T.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUser(c){var d=this;return(0,T.Z)(function*(){var p;const _=yield d.assertedPersistence.getCurrentUser();let E=_,R=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const F=null===(p=d.redirectUser)||void 0===p?void 0:p._redirectEventId,X=E?._redirectEventId,me=yield d.tryRedirectSignIn(c);(!F||F===X)&&me?.user&&(E=me.user,R=!0)}if(!E)return d.directlySetCurrentUser(null);if(!E._redirectEventId){if(R)try{yield d.beforeStateQueue.runMiddleware(E)}catch(F){E=_,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(F))}return E?d.reloadAndSetCurrentUserOrClear(E):d.directlySetCurrentUser(null)}return te(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===E._redirectEventId?d.directlySetCurrentUser(E):d.reloadAndSetCurrentUserOrClear(E)})()}tryRedirectSignIn(c){var d=this;return(0,T.Z)(function*(){let p=null;try{p=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,T.Z)(function*(){try{yield Sn(c)}catch(p){if("auth/network-request-failed"!==p?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function We(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,T.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,T.Z)(function*(){const p=c?(0,q.m9)(c):null;return p&&te(p.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(p&&p._clone(d))})()}_updateCurrentUser(c,d=!1){var p=this;return(0,T.Z)(function*(){if(!p._deleted)return c&&te(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),d||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,T.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,T.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var d=this;return this.queue((0,T.Z)(function*(){yield d.assertedPersistence.setPersistence(W(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,T.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const p=d._getPasswordPolicyInternal();return p.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,T.Z)(function*(){const d=yield function JA(f){return yd.apply(this,arguments)}(c),p=new Vr(d);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new q.LL("auth","Firebase",c())}onAuthStateChanged(c,d,p){return this.registerStateListener(this.authStateSubscription,c,d,p)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,p){return this.registerStateListener(this.idTokenSubscription,c,d,p)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,T.Z)(function*(){if(d.currentUser){const p=yield d.currentUser.getIdToken(),_={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=d.tenantId&&(_.tenantId=d.tenantId),yield function S(f,c){return C.apply(this,arguments)}(d,_)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var p=this;return(0,T.Z)(function*(){const _=yield p.getOrInitRedirectPersistenceManager(d);return null===c?_.removeCurrentUser():_.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,T.Z)(function*(){if(!d.redirectPersistenceManager){const p=c&&W(c)||d._popupRedirectResolver;te(p,d,"argument-error"),d.redirectPersistenceManager=yield lt.create(d,[W(p._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,T.Z)(function*(){var p,_;return d._isInitialized&&(yield d.queue((0,T.Z)(function*(){}))),(null===(p=d._currentUser)||void 0===p?void 0:p._redirectEventId)===c?d._currentUser:(null===(_=d.redirectUser)||void 0===_?void 0:_._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,T.Z)(function*(){if(c===d.currentUser)return d.queue((0,T.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,p,_){if(this._deleted)return()=>{};const E="function"==typeof d?d:d.next.bind(d);let R=!1;const F=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(F,this,"internal-error"),F.then(()=>{R||E(this.currentUser)}),"function"==typeof d){const X=c.addObserver(d,p,_);return()=>{R=!0,X()}}{const X=c.addObserver(d);return()=>{R=!0,X()}}}directlySetCurrentUser(c){var d=this;return(0,T.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,T.Z)(function*(){var d;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const _=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();_&&(p["X-Firebase-Client"]=_);const E=yield c._getAppCheckToken();return E&&(p["X-Firebase-AppCheck"]=E),p})()}_getAppCheckToken(){var c=this;return(0,T.Z)(function*(){var d;const p=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return p?.error&&function xn(f,...c){Fe.logLevel<=De.in.WARN&&Fe.warn(`Auth (${x.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Kt(f){return(0,q.m9)(f)}class vv{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,q.ne)(d=>this.observer=d)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function jp(f){return new Promise((c,d)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=_=>{const E=It("internal-error");E.customData=_,d(E)},p.type="text/javascript",p.charset="UTF-8",function qs(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)})}function Iv(f){return`__${f}${Math.floor(1e6*Math.random())}`}class wv{constructor(c){this.type="recaptcha-enterprise",this.auth=Kt(c)}verify(c="verify",d=!1){var p=this;return(0,T.Z)(function*(){function E(){return E=(0,T.Z)(function*(F){if(!d){if(null==F.tenantId&&null!=F._agentRecaptchaConfig)return F._agentRecaptchaConfig.siteKey;if(null!=F.tenantId&&void 0!==F._tenantRecaptchaConfigs[F.tenantId])return F._tenantRecaptchaConfigs[F.tenantId].siteKey}return new Promise(function(){var X=(0,T.Z)(function*(me,Re){Ri(F,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(it=>{if(void 0!==it.recaptchaKey){const lr=new Fn(it);return null==F.tenantId?F._agentRecaptchaConfig=lr:F._tenantRecaptchaConfigs[F.tenantId]=lr,me(lr.siteKey)}Re(new Error("recaptcha Enterprise site key undefined"))}).catch(it=>{Re(it)})});return function(me,Re){return X.apply(this,arguments)}}())}),E.apply(this,arguments)}function R(F,X,me){const Re=window.grecaptcha;bn(Re)?Re.enterprise.ready(()=>{Re.enterprise.execute(F,{action:c}).then(it=>{X(it)}).catch(()=>{X("NO_RECAPTCHA")})}):me(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((F,X)=>{(function _(F){return E.apply(this,arguments)})(p.auth).then(me=>{if(!d&&bn(window.grecaptcha))R(me,F,X);else{if(typeof window>"u")return void X(new Error("RecaptchaVerifier is only supported in browser"));jp("https://www.google.com/recaptcha/enterprise.js?render="+me).then(()=>{R(me,F,X)}).catch(Re=>{X(Re)})}}).catch(me=>{X(me)})})})()}}function Hp(f,c,d){return zp.apply(this,arguments)}function zp(){return(zp=(0,T.Z)(function*(f,c,d,p=!1){const _=new wv(f);let E;try{E=yield _.verify(d)}catch{E=yield _.verify(d,!0)}const R=Object.assign({},c);return Object.assign(R,p?{captchaResp:E}:{captchaResponse:E}),Object.assign(R,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(R,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),R})).apply(this,arguments)}function Qn(f,c,d,p){return Ne.apply(this,arguments)}function Ne(){return Ne=(0,T.Z)(function*(f,c,d,p){var _;if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const E=yield Hp(f,c,d,"getOobCode"===d);return p(f,E)}return p(f,c).catch(function(){var E=(0,T.Z)(function*(R){if("auth/missing-recaptcha-token"===R.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const F=yield Hp(f,c,d,"getOobCode"===d);return p(f,F)}return Promise.reject(R)});return function(R){return E.apply(this,arguments)}}())}),Ne.apply(this,arguments)}function Tv(f,c,d){const p=Kt(f);te(p._canInitEmulator,p,"emulator-config-failed"),te(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const _=!!d?.disableWarnings,E=vr(c),{host:R,port:F}=function ju(f){const c=vr(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!d)return{host:"",port:null};const p=d[2].split("@").pop()||"",_=/^(\[[^\]]+\])(:|$)/.exec(p);if(_){const E=_[1];return{host:E,port:qp(p.substr(E.length+1))}}{const[E,R]=p.split(":");return{host:E,port:qp(R)}}}(c);p.config.emulator={url:`${E}//${R}${null===F?"":`:${F}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:R,port:F,protocol:E.replace(":",""),options:Object.freeze({disableWarnings:_})}),_||function Gp(){function f(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}function vr(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function qp(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class No{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return st("not implemented")}_getIdTokenResponse(c){return st("not implemented")}_linkToIdToken(c,d){return st("not implemented")}_getReauthenticationResolver(c){return st("not implemented")}}function Fa(f,c){return xo.apply(this,arguments)}function xo(){return(xo=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:resetPassword",V(f,c))})).apply(this,arguments)}function Hu(){return(Hu=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Dv(f,c){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function zu(){return(zu=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",V(f,c))})).apply(this,arguments)}function Ir(f,c){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithPassword",V(f,c))})).apply(this,arguments)}function wd(f,c){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:sendOobCode",V(f,c))})).apply(this,arguments)}function Zp(){return(Zp=(0,T.Z)(function*(f,c){return wd(f,c)})).apply(this,arguments)}function ce(f,c){return La.apply(this,arguments)}function La(){return(La=(0,T.Z)(function*(f,c){return wd(f,c)})).apply(this,arguments)}function Td(f,c){return qu.apply(this,arguments)}function qu(){return(qu=(0,T.Z)(function*(f,c){return wd(f,c)})).apply(this,arguments)}function Cd(){return(Cd=(0,T.Z)(function*(f,c){return wd(f,c)})).apply(this,arguments)}function Kp(){return(Kp=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithEmailLink",V(f,c))})).apply(this,arguments)}function Qp(){return(Qp=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithEmailLink",V(f,c))})).apply(this,arguments)}class Gu extends No{constructor(c,d,p,_=null){super("password",p),this._email=c,this._password=d,this._tenantId=_}static _fromEmailAndPassword(c,d){return new Gu(c,d,"password")}static _fromEmailAndCode(c,d,p=null){return new Gu(c,d,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,T.Z)(function*(){switch(d.signInMethod){case"password":return Qn(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ir);case"emailLink":return function Ad(f,c){return Kp.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:et(c,"internal-error")}})()}_linkToIdToken(c,d){var p=this;return(0,T.Z)(function*(){switch(p.signInMethod){case"password":return Qn(c,{idToken:d,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dv);case"emailLink":return function o0(f,c){return Qp.apply(this,arguments)}(c,{idToken:d,email:p._email,oobCode:p._password});default:et(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function ps(f,c){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithIdp",V(f,c))})).apply(this,arguments)}class Fr extends No{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new Fr(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):et("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_}=d,E=(0,ft._T)(d,["providerId","signInMethod"]);if(!p||!_)return null;const R=new Fr(p,_);return R.idToken=E.idToken||void 0,R.accessToken=E.accessToken||void 0,R.secret=E.secret,R.nonce=E.nonce,R.pendingToken=E.pendingToken||null,R}_getIdTokenResponse(c){return ps(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,ps(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,ps(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,q.xO)(d)}return c}}function Sd(){return(Sd=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:sendVerificationCode",V(f,c))})).apply(this,arguments)}function Zu(){return(Zu=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,c))})).apply(this,arguments)}function Rd(){return(Rd=(0,T.Z)(function*(f,c){const d=yield ge(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,c));if(d.temporaryProof)throw Gt(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const gs={USER_NOT_FOUND:"user-not-found"};function oe(){return(oe=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),gs)})).apply(this,arguments)}class ms extends No{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new ms({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new ms({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function Av(f,c){return Zu.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function Oo(f,c){return Rd.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function bv(f,c){return oe.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:p,verificationCode:_}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:p,code:_}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:E}=c;return p||d||_||E?new ms({verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:E}):null}}class Zs{constructor(c){var d,p,_,E,R,F;const X=(0,q.zd)((0,q.pd)(c)),me=null!==(d=X.apiKey)&&void 0!==d?d:null,Re=null!==(p=X.oobCode)&&void 0!==p?p:null,it=function Ie(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(_=X.mode)&&void 0!==_?_:null);te(me&&Re&&it,"argument-error"),this.apiKey=me,this.operation=it,this.code=Re,this.continueUrl=null!==(E=X.continueUrl)&&void 0!==E?E:null,this.languageCode=null!==(R=X.languageCode)&&void 0!==R?R:null,this.tenantId=null!==(F=X.tenantId)&&void 0!==F?F:null}static parseLink(c){const d=function Ku(f){const c=(0,q.zd)((0,q.pd)(f)).link,d=c?(0,q.zd)((0,q.pd)(c)).deep_link_id:null,p=(0,q.zd)((0,q.pd)(f)).deep_link_id;return(p?(0,q.zd)((0,q.pd)(p)).link:null)||p||d||c||f}(c);try{return new Zs(d)}catch{return null}}}let Pd=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,p){return Gu._fromEmailAndPassword(d,p)}static credentialWithLink(d,p){const _=Zs.parseLink(p);return te(_,"argument-error"),Gu._fromEmailAndCode(d,_.code,_.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Yi{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class ko extends Yi{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Lr extends ko{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return te("providerId"in d&&"signInMethod"in d,"argument-error"),Fr._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return te(c.idToken||c.accessToken,"argument-error"),Fr._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Lr.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Lr.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:p,oauthTokenSecret:_,pendingToken:E,nonce:R,providerId:F}=c;if(!p&&!_&&!d&&!E||!F)return null;try{return new Lr(F)._credential({idToken:d,accessToken:p,nonce:R,pendingToken:E})}catch{return null}}}let Yu=(()=>{class f extends ko{constructor(){super("facebook.com")}static credential(d){return Fr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),mi=(()=>{class f extends ko{constructor(){super("google.com"),this.addScope("profile")}static credential(d,p){return Fr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:_}=d;if(!p&&!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),ki=(()=>{class f extends ko{constructor(){super("github.com")}static credential(d){return Fr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class Ji extends No{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return ps(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,ps(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,ps(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_,pendingToken:E}=d;return p&&_&&E&&p===_?new Ji(p,E):null}static _create(c,d){return new Ji(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Vo extends Yi{constructor(c){te(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Vo.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Vo.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=Ji.fromJSON(c);return te(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:p}=c;if(!d||!p)return null;try{return Ji._create(p,d)}catch{return null}}}let Yp=(()=>{class f extends ko{constructor(){super("twitter.com")}static credential(d,p){return Fr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:p,oauthTokenSecret:_}=d;if(!p||!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Vi(f,c){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signUp",V(f,c))})).apply(this,arguments)}class Ur{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,p,_=!1){return(0,T.Z)(function*(){const E=yield v._fromIdTokenResponse(c,p,_),R=Nd(p);return new Ur({user:E,providerId:R,_tokenResponse:p,operationType:d})})()}static _forOperation(c,d,p){return(0,T.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const _=Nd(p);return new Ur({user:c,providerId:_,_tokenResponse:p,operationType:d})})()}}function Nd(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function xd(f){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,T.Z)(function*(f){var c;const d=Kt(f);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new Ur({user:d.currentUser,providerId:null,operationType:"signIn"});const p=yield Vi(d,{returnSecureToken:!0}),_=yield Ur._fromIdTokenResponse(d,"signIn",p,!0);return yield d._updateCurrentUser(_.user),_})).apply(this,arguments)}class Ua extends q.ZR{constructor(c,d,p,_){var E;super(d.code,d.message),this.operationType=p,this.user=_,Object.setPrototypeOf(this,Ua.prototype),this.customData={appName:c.name,tenantId:null!==(E=c.tenantId)&&void 0!==E?E:void 0,_serverResponse:d.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,d,p,_){return new Ua(c,d,p,_)}}function Fo(f,c,d,p){return("reauthenticate"===c?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(E=>{throw"auth/multi-factor-auth-required"===E.code?Ua._fromErrorAndOperation(f,E,c,p):E})}function Od(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function Jp(f,c){return kd.apply(this,arguments)}function kd(){return kd=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f);yield ec(!0,d,c);const{providerUserInfo:p}=yield function fi(f,c){return pi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),_=Od(p||[]);return d.providerData=d.providerData.filter(E=>_.has(E.providerId)),_.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),kd.apply(this,arguments)}function Xu(f,c){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,T.Z)(function*(f,c,d=!1){const p=yield Zt(f,c._linkToIdToken(f.auth,yield f.getIdToken()),d);return Ur._forOperation(f,"link",p)})).apply(this,arguments)}function ec(f,c,d){return Br.apply(this,arguments)}function Br(){return(Br=(0,T.Z)(function*(f,c,d){yield Sn(c);const _=!1===f?"provider-already-linked":"no-such-provider";te(Od(c.providerData).has(d)===f,c.auth,_)})).apply(this,arguments)}function Xp(f,c){return tc.apply(this,arguments)}function tc(){return(tc=(0,T.Z)(function*(f,c,d=!1){const{auth:p}=f,_="reauthenticate";try{const E=yield Zt(f,Fo(p,_,c,f),d);te(E.idToken,p,"internal-error");const R=cn(E.idToken);te(R,p,"internal-error");const{sub:F}=R;return te(f.uid===F,p,"user-mismatch"),Ur._forOperation(f,_,E)}catch(E){throw"auth/user-not-found"===E?.code&&et(p,"user-mismatch"),E}})).apply(this,arguments)}function eg(f,c){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,T.Z)(function*(f,c,d=!1){const p="signIn",_=yield Fo(f,p,c),E=yield Ur._fromIdTokenResponse(f,p,_);return d||(yield f._updateCurrentUser(E.user)),E})).apply(this,arguments)}function nc(f,c){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,T.Z)(function*(f,c){return eg(Kt(f),c)})).apply(this,arguments)}function Ud(f,c){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f);return yield ec(!1,d,c.providerId),Xu(d,c)})).apply(this,arguments)}function tg(f,c){return $d.apply(this,arguments)}function $d(){return($d=(0,T.Z)(function*(f,c){return Xp((0,q.m9)(f),c)})).apply(this,arguments)}function jd(){return(jd=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithCustomToken",V(f,c))})).apply(this,arguments)}function Sv(f,c){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,T.Z)(function*(f,c){const d=Kt(f),p=yield function Lo(f,c){return jd.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),_=yield Ur._fromIdTokenResponse(d,"signIn",p);return yield d._updateCurrentUser(_.user),_}),Hd.apply(this,arguments)}class Yn{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?zd._fromServerResponse(c,d):"totpInfo"in d?rc._fromServerResponse(c,d):et(c,"internal-error")}}class zd extends Yn{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new zd(d)}}class rc extends Yn{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new rc(d)}}function xe(f,c,d){var p;te((null===(p=d.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),te(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(te(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(te(d.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function Jn(f){return rt.apply(this,arguments)}function rt(){return(rt=(0,T.Z)(function*(f){const c=Kt(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Un(f,c,d){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,T.Z)(function*(f,c,d){const p=Kt(f),_={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&xe(p,_,d),yield Qn(p,_,"getOobCode",ce)})).apply(this,arguments)}function Uo(f,c,d){return ar.apply(this,arguments)}function ar(){return ar=(0,T.Z)(function*(f,c,d){yield Fa((0,q.m9)(f),{oobCode:c,newPassword:d}).catch(function(){var p=(0,T.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&Jn(f),_});return function(_){return p.apply(this,arguments)}}())}),ar.apply(this,arguments)}function ng(f,c){return ic.apply(this,arguments)}function ic(){return ic=(0,T.Z)(function*(f,c){yield function Ed(f,c){return zu.apply(this,arguments)}((0,q.m9)(f),{oobCode:c})}),ic.apply(this,arguments)}function Ba(f,c){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f),p=yield Fa(d,{oobCode:c}),_=p.requestType;switch(te(_,d,"internal-error"),_){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(p.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(p.mfaInfo,d,"internal-error");default:te(p.email,d,"internal-error")}let E=null;return p.mfaInfo&&(E=Yn._fromServerResponse(Kt(d),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:E},operation:_}})).apply(this,arguments)}function Rv(f,c){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,T.Z)(function*(f,c){const{data:d}=yield Ba((0,q.m9)(f),c);return d.email})).apply(this,arguments)}function fe(f,c,d){return Le.apply(this,arguments)}function Le(){return(Le=(0,T.Z)(function*(f,c,d){const p=Kt(f),R=yield Qn(p,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vi).catch(X=>{throw"auth/password-does-not-meet-requirements"===X.code&&Jn(f),X}),F=yield Ur._fromIdTokenResponse(p,"signIn",R);return yield p._updateCurrentUser(F.user),F})).apply(this,arguments)}function Bt(f,c,d){return nc((0,q.m9)(f),Pd.credential(c,d)).catch(function(){var p=(0,T.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&Jn(f),_});return function(_){return p.apply(this,arguments)}}())}function _i(f,c,d){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,T.Z)(function*(f,c,d){const p=Kt(f),_={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function E(R,F){te(F.handleCodeInApp,p,"argument-error"),F&&xe(p,R,F)})(_,d),yield Qn(p,_,"getOobCode",Td)})).apply(this,arguments)}function Xn(f,c){const d=Zs.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}function Bo(f,c,d){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f),_=Pd.credentialWithLink(c,d||nn());return te(_._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),nc(p,_)})).apply(this,arguments)}function ys(){return(ys=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:createAuthUri",V(f,c))})).apply(this,arguments)}function Ue(f,c){return Ys.apply(this,arguments)}function Ys(){return Ys=(0,T.Z)(function*(f,c){const p={identifier:c,continueUri:un()?nn():"http://localhost"},{signinMethods:_}=yield function _s(f,c){return ys.apply(this,arguments)}((0,q.m9)(f),p);return _||[]}),Ys.apply(this,arguments)}function rg(f,c){return vs.apply(this,arguments)}function vs(){return vs=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f),_={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&xe(d.auth,_,c);const{email:E}=yield function s0(f,c){return Zp.apply(this,arguments)}(d.auth,_);E!==f.email&&(yield f.reload())}),vs.apply(this,arguments)}function hn(f,c,d){return Js.apply(this,arguments)}function Js(){return Js=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f),E={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};d&&xe(p.auth,E,d);const{email:R}=yield function Dd(f,c){return Cd.apply(this,arguments)}(p.auth,E);R!==f.email&&(yield f.reload())}),Js.apply(this,arguments)}function ei(){return(ei=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function $a(f,c){return sc.apply(this,arguments)}function sc(){return sc=(0,T.Z)(function*(f,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const p=(0,q.m9)(f),E={idToken:yield p.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},R=yield Zt(p,function $o(f,c){return ei.apply(this,arguments)}(p.auth,E));p.displayName=R.displayName||null,p.photoURL=R.photoUrl||null;const F=p.providerData.find(({providerId:X})=>"password"===X);F&&(F.displayName=p.displayName,F.photoURL=p.photoURL),yield p._updateTokensIfNecessary(R)}),sc.apply(this,arguments)}function Is(f,c){return jo((0,q.m9)(f),c,null)}function Xi(f,c){return jo((0,q.m9)(f),null,c)}function jo(f,c,d){return Xs.apply(this,arguments)}function Xs(){return Xs=(0,T.Z)(function*(f,c,d){const{auth:p}=f,E={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(E.email=c),d&&(E.password=d);const R=yield Zt(f,function Id(f,c){return Hu.apply(this,arguments)}(p,E));yield f._updateTokensIfNecessary(R,!0)}),Xs.apply(this,arguments)}class ja{constructor(c,d,p={}){this.isNewUser=c,this.providerId=d,this.profile=p}}class oc extends ja{constructor(c,d,p,_){super(c,d,p),this.username=_}}class ig extends ja{constructor(c,d){super(c,"facebook.com",d)}}class Fi extends oc{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class ac extends ja{constructor(c,d){super(c,"google.com",d)}}class Ho extends oc{constructor(c,d,p){super(c,"twitter.com",d,p)}}function Ha(f){const{user:c,_tokenResponse:d}=f;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function tt(f){var c,d;if(!f)return null;const{providerId:p}=f,_=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},E=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const R=null===(d=null===(c=cn(f.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(R)return new ja(E,"anonymous"!==R&&"custom"!==R?R:null)}if(!p)return null;switch(p){case"facebook.com":return new ig(E,_);case"github.com":return new Fi(E,_);case"google.com":return new ac(E,_);case"twitter.com":return new Ho(E,_,f.screenName||null);case"custom":case"anonymous":return new ja(E,null);default:return new ja(E,p,_)}}(d)}class to{constructor(c,d,p){this.type=c,this.credential=d,this.user=p}static _fromIdtoken(c,d){return new to("enroll",c,d)}static _fromMfaPendingCredential(c){return new to("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,p;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return to._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return to._fromIdtoken(c.multiFactorSession.idToken)}return null}}class og{constructor(c,d,p){this.session=c,this.hints=d,this.signInResolver=p}static _fromError(c,d){const p=Kt(c),_=d.customData._serverResponse,E=(_.mfaInfo||[]).map(F=>Yn._fromServerResponse(p,F));te(_.mfaPendingCredential,p,"internal-error");const R=to._fromMfaPendingCredential(_.mfaPendingCredential);return new og(R,E,function(){var F=(0,T.Z)(function*(X){const me=yield X._process(p,R);delete _.mfaInfo,delete _.mfaPendingCredential;const Re=Object.assign(Object.assign({},_),{idToken:me.idToken,refreshToken:me.refreshToken});switch(d.operationType){case"signIn":const it=yield Ur._fromIdTokenResponse(p,d.operationType,Re);return yield p._updateCurrentUser(it.user),it;case"reauthenticate":return te(d.user,p,"internal-error"),Ur._forOperation(d.user,d.operationType,Re);default:et(p,"internal-error")}});return function(X){return F.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,T.Z)(function*(){return d.signInResolver(c)})()}}function c0(f,c){var d;const p=(0,q.m9)(f),_=c;return te(c.customData.operationType,p,"argument-error"),te(null===(d=_.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,p,"argument-error"),og._fromError(p,_)}class ag{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(p=>Yn._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new ag(c)}getSession(){var c=this;return(0,T.Z)(function*(){return to._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var p=this;return(0,T.Z)(function*(){const _=c,E=yield p.getSession(),R=yield Zt(p.user,_._process(p.user.auth,E,d));return yield p.user._updateTokensIfNecessary(R),p.user.reload()})()}unenroll(c){var d=this;return(0,T.Z)(function*(){const p="string"==typeof c?c:c.uid,_=yield d.user.getIdToken();try{const E=yield Zt(d.user,function f0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:withdraw",V(f,c))}(d.user.auth,{idToken:_,mfaEnrollmentId:p}));d.enrolledFactors=d.enrolledFactors.filter(({uid:R})=>R!==p),yield d.user._updateTokensIfNecessary(E),yield d.user.reload()}catch(E){throw E}})()}}const ug=new WeakMap;function p0(f){const c=(0,q.m9)(f);return ug.has(c)||ug.set(c,ag._fromUser(c)),ug.get(c)}const Kd="__sak";class Pv{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Kd,"1"),this.storage.removeItem(Kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mv=(()=>{class f extends Pv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,p)=>this.onStorageEvent(d,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function cg(){const f=(0,q.z$)();return Ce(f)||we(f)}()&&function Ee(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=dn(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const p of Object.keys(this.listeners)){const _=this.storage.getItem(p),E=this.localCache[p];_!==E&&d(p,E,_)}}onStorageEvent(d,p=!1){if(!d.key)return void this.forAllChangedKeys((F,X,me)=>{this.notifyListeners(F,me)});const _=d.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const F=this.storage.getItem(_);if(d.newValue!==F)null!==d.newValue?this.storage.setItem(_,d.newValue):this.storage.removeItem(_);else if(this.localCache[_]===d.newValue&&!p)return}const E=()=>{const F=this.storage.getItem(_);!p&&this.localCache[_]===F||this.notifyListeners(_,F)},R=this.storage.getItem(_);!function H(){return(0,q.w1)()&&10===document.documentMode}()||R===d.newValue||d.newValue===d.oldValue?E():setTimeout(E,10)}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const E of Array.from(_))E(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,p,_)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:p,newValue:_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,p){var _=()=>super._set,E=this;return(0,T.Z)(function*(){yield _().call(E,d,p),E.localCache[d]=JSON.stringify(p)})()}_get(d){var p=()=>super._get,_=this;return(0,T.Z)(function*(){const E=yield p().call(_,d);return _.localCache[d]=JSON.stringify(E),E})()}_remove(d){var p=()=>super._remove,_=this;return(0,T.Z)(function*(){yield p().call(_,d),delete _.localCache[d]})()}}return f.type="LOCAL",f})(),Ui=(()=>{class f extends Pv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,p){}_removeListener(d,p){}}return f.type="SESSION",f})();let _0=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const p=this.receivers.find(E=>E.isListeningto(d));if(p)return p;const _=new f(d);return this.receivers.push(_),_}isListeningto(d){return this.eventTarget===d}handleEvent(d){var p=this;return(0,T.Z)(function*(){const _=d,{eventId:E,eventType:R,data:F}=_.data,X=p.handlersMap[R];if(!X?.size)return;_.ports[0].postMessage({status:"ack",eventId:E,eventType:R});const me=Array.from(X).map(function(){var it=(0,T.Z)(function*(lr){return lr(_.origin,F)});return function(lr){return it.apply(this,arguments)}}()),Re=yield function m0(f){return Promise.all(f.map(function(){var c=(0,T.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(p){return{fulfilled:!1,reason:p}}});return function(d){return c.apply(this,arguments)}}()))}(me);_.ports[0].postMessage({status:"done",eventId:E,eventType:R,response:Re})})()}_subscribe(d,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(p)}_unsubscribe(d,p){this.handlersMap[d]&&p&&this.handlersMap[d].delete(p),(!p||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function fn(f="",c=10){let d="";for(let p=0;p<c;p++)d+=Math.floor(10*Math.random());return f+d}class uc{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,p=50){var _=this;return(0,T.Z)(function*(){const E=typeof MessageChannel<"u"?new MessageChannel:null;if(!E)throw new Error("connection_unavailable");let R,F;return new Promise((X,me)=>{const Re=fn("",20);E.port1.start();const it=setTimeout(()=>{me(new Error("unsupported_event"))},p);F={messageChannel:E,onMessage(lr){const ns=lr;if(ns.data.eventId===Re)switch(ns.data.status){case"ack":clearTimeout(it),R=setTimeout(()=>{me(new Error("timeout"))},3e3);break;case"done":clearTimeout(R),X(ns.data.response);break;default:clearTimeout(it),clearTimeout(R),me(new Error("invalid_response"))}}},_.handlers.add(F),E.port1.addEventListener("message",F.onMessage),_.target.postMessage({eventType:c,eventId:Re,data:d},[E.port2])}).finally(()=>{F&&_.removeMessageHandler(F)})})()}}function yt(){return window}function cc(){return typeof yt().WorkerGlobalScope<"u"&&"function"==typeof yt().importScripts}function lc(){return(lc=(0,T.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const dc="firebaseLocalStorageDb",za="firebaseLocalStorage",Jd="fbase_key";class Wo{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function no(f,c){return f.transaction([za],c?"readwrite":"readonly").objectStore(za)}function Es(){const f=indexedDB.open(dc,1);return new Promise((c,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(za,{keyPath:Jd})}catch(_){d(_)}}),f.addEventListener("success",(0,T.Z)(function*(){const p=f.result;p.objectStoreNames.contains(za)?c(p):(p.close(),yield function Wa(){const f=indexedDB.deleteDatabase(dc);return new Wo(f).toPromise()}(),c(yield Es()))}))})}function Xd(f,c,d){return pg.apply(this,arguments)}function pg(){return(pg=(0,T.Z)(function*(f,c,d){const p=no(f,!0).put({[Jd]:c,value:d});return new Wo(p).toPromise()})).apply(this,arguments)}function gg(){return(gg=(0,T.Z)(function*(f,c){const d=no(f,!1).get(c),p=yield new Wo(d).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function mg(f,c){const d=no(f,!0).delete(c);return new Wo(d).toPromise()}const hc=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,T.Z)(function*(){return d.db||(d.db=yield Es()),d.db})()}_withRetries(d){var p=this;return(0,T.Z)(function*(){let _=0;for(;;)try{const E=yield p._openDb();return yield d(E)}catch(E){if(_++>3)throw E;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,T.Z)(function*(){return cc()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,T.Z)(function*(){d.receiver=_0._getInstance(function fg(){return cc()?self:null}()),d.receiver._subscribe("keyChanged",function(){var p=(0,T.Z)(function*(_,E){return{keyProcessed:(yield d._poll()).includes(E.key)}});return function(_,E){return p.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var p=(0,T.Z)(function*(_,E){return["keyChanged"]});return function(_,E){return p.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,T.Z)(function*(){var p,_;if(d.activeServiceWorker=yield function hg(){return lc.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new uc(d.activeServiceWorker);const E=yield d.sender._send("ping",{},800);E&&null!==(p=E[0])&&void 0!==p&&p.fulfilled&&null!==(_=E[0])&&void 0!==_&&_.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var p=this;return(0,T.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function Qd(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:d},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,T.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Es();return yield Xd(d,Kd,"1"),yield mg(d,Kd),!0}catch{}return!1})()}_withPendingWrite(d){var p=this;return(0,T.Z)(function*(){p.pendingWrites++;try{yield d()}finally{p.pendingWrites--}})()}_set(d,p){var _=this;return(0,T.Z)(function*(){return _._withPendingWrite((0,T.Z)(function*(){return yield _._withRetries(E=>Xd(E,d,p)),_.localCache[d]=p,_.notifyServiceWorker(d)}))})()}_get(d){var p=this;return(0,T.Z)(function*(){const _=yield p._withRetries(E=>function y0(f,c){return gg.apply(this,arguments)}(E,d));return p.localCache[d]=_,_})()}_remove(d){var p=this;return(0,T.Z)(function*(){return p._withPendingWrite((0,T.Z)(function*(){return yield p._withRetries(_=>mg(_,d)),delete p.localCache[d],p.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,T.Z)(function*(){const p=yield d._withRetries(R=>{const F=no(R,!1).getAll();return new Wo(F).toPromise()});if(!p)return[];if(0!==d.pendingWrites)return[];const _=[],E=new Set;for(const{fbase_key:R,value:F}of p)E.add(R),JSON.stringify(d.localCache[R])!==JSON.stringify(F)&&(d.notifyListeners(R,F),_.push(R));for(const R of Object.keys(d.localCache))d.localCache[R]&&!E.has(R)&&(d.notifyListeners(R,null),_.push(R));return _})()}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const E of Array.from(_))E(p)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,T.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),qa=1e12;class _g{constructor(c){this.auth=c,this.counter=qa,this._widgets=new Map}render(c,d){const p=this.counter;return this._widgets.set(p,new Vv(c,this.auth.name,d||{})),this.counter++,p}reset(c){var d;const p=c||qa;null===(d=this._widgets.get(p))||void 0===d||d.delete(),this._widgets.delete(p)}getResponse(c){var d;return(null===(d=this._widgets.get(c||qa))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,T.Z)(function*(){var p;return null===(p=d._widgets.get(c||qa))||void 0===p||p.execute(),""})()}}class Vv{constructor(c,d,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const _="string"==typeof c?document.getElementById(c):c;te(_,"argument-error",{appName:d}),this.container=_,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Fv(f){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const th=Iv("rcb"),yg=new Pr(3e4,6e4);class vg{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=yt().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return te(function Uv(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&An(yt().grecaptcha)?Promise.resolve(yt().grecaptcha):new Promise((p,_)=>{const E=yt().setTimeout(()=>{_(It(c,"network-request-failed"))},yg.get());yt()[th]=()=>{yt().clearTimeout(E),delete yt()[th];const F=yt().grecaptcha;if(!F||!An(F))return void _(It(c,"internal-error"));const X=F.render;F.render=(me,Re)=>{const it=X(me,Re);return this.counter++,it},this.hostLanguage=d,p(F)},jp(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:th,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(E),_(It(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=yt().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class w0{load(c){return(0,T.Z)(function*(){return new _g(c)})()}clearedOneInstance(){}}const Ig="recaptcha",ti={theme:"light",type:"image"};class Eg{constructor(c,d,p=Object.assign({},ti)){this.parameters=p,this.type=Ig,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Kt(c),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const _="string"==typeof d?document.getElementById(d):d;te(_,this.auth,"argument-error"),this.container=_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new w0:new vg,this.validateStartingState()}verify(){var c=this;return(0,T.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(d)||new Promise(E=>{const R=F=>{F&&(c.tokenChangeListeners.delete(R),E(F))};c.tokenChangeListeners.add(R),c.isInvisible&&p.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(p=>p(d)),"function"==typeof c)c(d);else if("string"==typeof c){const p=yt()[c];"function"==typeof p&&p(d)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,T.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const p=document.createElement("div");d.appendChild(p),d=p}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,T.Z)(function*(){te(un()&&!cc(),c.auth,"internal-error"),yield function Bv(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function yr(f){return hi.apply(this,arguments)}(c.auth);te(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class nh{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=ms._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function wg(f,c,d){return fc.apply(this,arguments)}function fc(){return(fc=(0,T.Z)(function*(f,c,d){const p=Kt(f),_=yield Za(p,c,(0,q.m9)(d));return new nh(_,E=>nc(p,E))})).apply(this,arguments)}function $v(f,c,d){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);yield ec(!1,p,"phone");const _=yield Za(p.auth,c,(0,q.m9)(d));return new nh(_,E=>Ud(p,E))})).apply(this,arguments)}function jv(f,c,d){return ni.apply(this,arguments)}function ni(){return(ni=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f),_=yield Za(p.auth,c,(0,q.m9)(d));return new nh(_,E=>tg(p,E))})).apply(this,arguments)}function Za(f,c,d){return pc.apply(this,arguments)}function pc(){return pc=(0,T.Z)(function*(f,c,d){var p;const _=yield d.verify();try{let E;if(te("string"==typeof _,f,"argument-error"),te(d.type===Ig,f,"argument-error"),E="string"==typeof c?{phoneNumber:c}:c,"session"in E){const R=E.session;if("phoneNumber"in E)return te("enroll"===R.type,f,"internal-error"),(yield function l0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:start",V(f,c))}(f,{idToken:R.credential,phoneEnrollmentInfo:{phoneNumber:E.phoneNumber,recaptchaToken:_}})).phoneSessionInfo.sessionInfo;{te("signin"===R.type,f,"internal-error");const F=(null===(p=E.multiFactorHint)||void 0===p?void 0:p.uid)||E.multiFactorUid;return te(F,f,"missing-multi-factor-info"),(yield function Ov(f,c){return Q(f,"POST","/v2/accounts/mfaSignIn:start",V(f,c))}(f,{mfaPendingCredential:R.credential,mfaEnrollmentId:F,phoneSignInInfo:{recaptchaToken:_}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:R}=yield function Cv(f,c){return Sd.apply(this,arguments)}(f,{phoneNumber:E.phoneNumber,recaptchaToken:_});return R}}finally{d._reset()}}),pc.apply(this,arguments)}function xt(f,c){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,T.Z)(function*(f,c){yield Xu((0,q.m9)(f),c)})).apply(this,arguments)}let gc=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=Kt(d)}verifyPhoneNumber(d,p){return Za(this.auth,d,(0,q.m9)(p))}static credential(d,p){return ms._fromVerification(d,p)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:p,temporaryProof:_}=d;return p&&_?ms._fromTokenResponse(p,_):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function mn(f,c){return c?W(c):(te(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class rh extends No{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return ps(c,this._buildIdpRequest())}_linkToIdToken(c,d){return ps(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return ps(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function Tg(f){return eg(f.auth,new rh(f),f.bypassAuthState)}function qo(f){const{auth:c,user:d}=f;return te(d,c,"internal-error"),Xp(d,new rh(f),f.bypassAuthState)}function jr(f){return ih.apply(this,arguments)}function ih(){return(ih=(0,T.Z)(function*(f){const{auth:c,user:d}=f;return te(d,c,"internal-error"),Xu(d,new rh(f),f.bypassAuthState)})).apply(this,arguments)}class Dg{constructor(c,d,p,_,E=!1){this.auth=c,this.resolver=p,this.user=_,this.bypassAuthState=E,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,T.Z)(function*(p,_){c.pendingPromise={resolve:p,reject:_};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(E){c.reject(E)}});return function(p,_){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,T.Z)(function*(){const{urlResponse:p,sessionId:_,postBody:E,tenantId:R,error:F,type:X}=c;if(F)return void d.reject(F);const me={auth:d.auth,requestUri:p,sessionId:_,tenantId:R||void 0,postBody:E||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(X)(me))}catch(Re){d.reject(Re)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Tg;case"linkViaPopup":case"linkViaRedirect":return jr;case"reauthViaPopup":case"reauthViaRedirect":return qo;default:et(this.auth,"internal-error")}}resolve(c){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hv=new Pr(2e3,1e4);function ws(f,c,d){return mc.apply(this,arguments)}function mc(){return(mc=(0,T.Z)(function*(f,c,d){const p=Kt(f);pn(f,c,Yi);const _=mn(p,d);return new sh(p,"signInViaPopup",c,_).executeNotNull()})).apply(this,arguments)}function zv(f,c,d){return _c.apply(this,arguments)}function _c(){return(_c=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);pn(p.auth,c,Yi);const _=mn(p.auth,d);return new sh(p.auth,"reauthViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}function Cg(f,c,d){return yc.apply(this,arguments)}function yc(){return(yc=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);pn(p.auth,c,Yi);const _=mn(p.auth,d);return new sh(p.auth,"linkViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}let sh=(()=>{class f extends Dg{constructor(d,p,_,E,R){super(d,p,E,R),this.provider=_,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,T.Z)(function*(){const p=yield d.execute();return te(p,d.auth,"internal-error"),p})()}onExecution(){var d=this;return(0,T.Z)(function*(){Vt(1===d.filter.length,"Popup operations only handle one event");const p=fn();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],p),d.authWindow.associatedEvent=p,d.resolver._originValidation(d.auth).catch(_=>{d.reject(_)}),d.resolver._isIframeWebStorageSupported(d.auth,_=>{_||d.reject(It(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(It(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var p,_;this.pollId=null!==(_=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==_&&_.closed?window.setTimeout(()=>{this.pollId=null,this.reject(It(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Hv.get())};d()}}return f.currentPopupAction=null,f})();const ke="pendingRedirect",Go=new Map;class T0 extends Dg{constructor(c,d,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,T.Z)(function*(){let p=Go.get(d.auth._key());if(!p){try{const E=(yield function Wv(f,c){return oh.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;p=()=>Promise.resolve(E)}catch(_){p=()=>Promise.reject(_)}Go.set(d.auth._key(),p)}return d.bypassAuthState||Go.set(d.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,p=this;return(0,T.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(p,c);if("unknown"!==c.type){if(c.eventId){const _=yield p.auth._redirectUserForId(c.eventId);if(_)return p.user=_,d().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,T.Z)(function*(){})()}cleanUp(){}}function oh(){return(oh=(0,T.Z)(function*(f,c){const d=Sg(c),p=bg(f);if(!(yield p._isAvailable()))return!1;const _="true"===(yield p._get(d));return yield p._remove(d),_})).apply(this,arguments)}function ah(f,c){return vc.apply(this,arguments)}function vc(){return(vc=(0,T.Z)(function*(f,c){return bg(f)._set(Sg(c),"true")})).apply(this,arguments)}function Zo(){Go.clear()}function Ag(f,c){Go.set(f._key(),c)}function bg(f){return W(f._redirectPersistence)}function Sg(f){return Oe(ke,f.config.apiKey,f.name)}function qv(f,c,d){return function Gv(f,c,d){return Y.apply(this,arguments)}(f,c,d)}function Y(){return(Y=(0,T.Z)(function*(f,c,d){const p=Kt(f);pn(f,c,Yi),yield p._initializationPromise;const _=mn(p,d);return yield ah(_,p),_._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function dt(f,c,d){return function Rg(f,c,d){return Ic.apply(this,arguments)}(f,c,d)}function Ic(){return(Ic=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);pn(p.auth,c,Yi),yield p.auth._initializationPromise;const _=mn(p.auth,d);yield ah(_,p.auth);const E=yield Zv(p);return _._openRedirect(p.auth,c,"reauthViaRedirect",E)})).apply(this,arguments)}function jn(f,c,d){return function Pg(f,c,d){return ro.apply(this,arguments)}(f,c,d)}function ro(){return(ro=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);pn(p.auth,c,Yi),yield p.auth._initializationPromise;const _=mn(p.auth,d);yield ec(!1,p,c.providerId),yield ah(_,p.auth);const E=yield Zv(p);return _._openRedirect(p.auth,c,"linkViaRedirect",E)})).apply(this,arguments)}function Bi(f,c){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,T.Z)(function*(f,c){return yield Kt(f)._initializationPromise,Ya(f,c,!1)})).apply(this,arguments)}function Ya(f,c){return uh.apply(this,arguments)}function uh(){return(uh=(0,T.Z)(function*(f,c,d=!1){const p=Kt(f),_=mn(p,c),R=yield new T0(p,_,d).execute();return R&&!d&&(delete R.user._redirectEventId,yield p._persistUserIfCurrent(R.user),yield p._setRedirectUser(null,c)),R})).apply(this,arguments)}function Zv(f){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,T.Z)(function*(f){const c=fn(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class $i{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(d=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function es(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return io(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var p;if(c.error&&!io(c)){const _=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";d.onError(It(this.auth,_))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const p=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ch(c))}saveEventToCache(c){this.cachedEventUids.add(ch(c)),this.lastProcessedEventTime=Date.now()}}function ch(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function io({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function Mg(f){return wc.apply(this,arguments)}function wc(){return(wc=(0,T.Z)(function*(f,c={}){return Q(f,"GET","/v1/projects",c)})).apply(this,arguments)}const Kv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qv=/^https?/;function Ja(){return(Ja=(0,T.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield Mg(f);for(const d of c)try{if(Ng(d))return}catch{}et(f,"unauthorized-domain")})).apply(this,arguments)}function Ng(f){const c=nn(),{protocol:d,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const R=new URL(f);return""===R.hostname&&""===p?"chrome-extension:"===d&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&R.hostname===p}if(!Qv.test(d))return!1;if(Kv.test(f))return p===f;const _=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+_+"|"+_+")$","i").test(p)}const dh=new Pr(3e4,6e4);function xg(){const f=yt().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let Ko=null;const Vg=new Pr(5e3,15e3),Fg="__/auth/iframe",Lg="emulator/auth/iframe",hh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jv(f){const c=f.config;te(c.authDomain,f,"auth-domain-config-required");const d=c.emulator?Si(c,Lg):`https://${f.config.authDomain}/${Fg}`,p={apiKey:c.apiKey,appName:f.name,v:x.SDK_VERSION},_=Yv.get(f.config.apiHost);_&&(p.eid=_);const E=f._getFrameworks();return E.length&&(p.fw=E.join(",")),`${d}?${(0,q.xO)(p).slice(1)}`}function ts(){return ts=(0,T.Z)(function*(f){const c=yield function kg(f){return Ko=Ko||function Og(f){return new Promise((c,d)=>{var p,_,E;function R(){xg(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{xg(),d(It(f,"network-request-failed"))},timeout:dh.get()})}if(null!==(_=null===(p=yt().gapi)||void 0===p?void 0:p.iframes)&&void 0!==_&&_.Iframe)c(gapi.iframes.getContext());else{if(null===(E=yt().gapi)||void 0===E||!E.load){const F=Iv("iframefcb");return yt()[F]=()=>{gapi.load?R():d(It(f,"network-request-failed"))},jp(`https://apis.google.com/js/api.js?onload=${F}`).catch(X=>d(X))}R()}}).catch(c=>{throw Ko=null,c})}(f),Ko}(f),d=yt().gapi;return te(d,f,"internal-error"),c.open({where:document.body,url:Jv(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hh,dontclear:!0},p=>new Promise(function(){var _=(0,T.Z)(function*(E,R){yield p.restyle({setHideOnLeave:!1});const F=It(f,"network-request-failed"),X=yt().setTimeout(()=>{R(F)},Vg.get());function me(){yt().clearTimeout(X),E(p)}p.ping(me).then(me,()=>{R(F)})});return function(E,R){return _.apply(this,arguments)}}()))}),ts.apply(this,arguments)}const Yt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fh{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ts="__/auth/handler",rI="emulator/auth/handler",Dc=encodeURIComponent("fac");function Qo(f,c,d,p,_,E){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,T.Z)(function*(f,c,d,p,_,E){te(f.config.authDomain,f,"auth-domain-config-required"),te(f.config.apiKey,f,"invalid-api-key");const R={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:p,v:x.SDK_VERSION,eventId:_};if(c instanceof Yi){c.setDefaultLanguage(f.languageCode),R.providerId=c.providerId||"",(0,q.xb)(c.getCustomParameters())||(R.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Re,it]of Object.entries(E||{}))R[Re]=it}if(c instanceof ko){const Re=c.getScopes().filter(it=>""!==it);Re.length>0&&(R.scopes=Re.join(","))}f.tenantId&&(R.tid=f.tenantId);const F=R;for(const Re of Object.keys(F))void 0===F[Re]&&delete F[Re];const X=yield f._getAppCheckToken(),me=X?`#${Dc}=${encodeURIComponent(X)}`:"";return`${function ph({config:f}){return f.emulator?Si(f,rI):`https://${f.authDomain}/${Ts}`}(f)}?${(0,q.xO)(F).slice(1)}${me}`})).apply(this,arguments)}const Cc="webStorageSupport",$g=class Bg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ui,this._completeRedirectFn=Ya,this._overrideRedirectResult=Ag}_openPopup(c,d,p,_){var E=this;return(0,T.Z)(function*(){var R;Vt(null===(R=E.eventManagers[c._key()])||void 0===R?void 0:R.manager,"_initialize() not called before _openPopup()");const F=yield Qo(c,d,p,nn(),_);return function Ug(f,c,d,p=500,_=600){const E=Math.max((window.screen.availHeight-_)/2,0).toString(),R=Math.max((window.screen.availWidth-p)/2,0).toString();let F="";const X=Object.assign(Object.assign({},Yt),{width:p.toString(),height:_.toString(),top:E,left:R}),me=(0,q.z$)().toLowerCase();d&&(F=On(me)?"_blank":d),Dt(me)&&(c=c||"http://localhost",X.scrollbars="yes");const Re=Object.entries(X).reduce((lr,[ns,nu])=>`${lr}${ns}=${nu},`,"");if(function Qe(f=(0,q.z$)()){var c;return we(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(me)&&"_self"!==F)return function Tc(f,c){const d=document.createElement("a");d.href=f,d.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(p)}(c||"",F),new fh(null);const it=window.open(c||"",F,Re);te(it,f,"popup-blocked");try{it.focus()}catch{}return new fh(it)}(c,F,fn())})()}_openRedirect(c,d,p,_){var E=this;return(0,T.Z)(function*(){return yield E._originValidation(c),function dg(f){yt().location.href=f}(yield Qo(c,d,p,nn(),_)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:_,promise:E}=this.eventManagers[d];return _?Promise.resolve(_):(Vt(E,"If manager is not set, promise should be"),E)}const p=this.initAndGetManager(c);return this.eventManagers[d]={promise:p},p.catch(()=>{delete this.eventManagers[d]}),p}initAndGetManager(c){var d=this;return(0,T.Z)(function*(){const p=yield function cr(f){return ts.apply(this,arguments)}(c),_=new $i(c);return p.register("authEvent",E=>(te(E?.authEvent,c,"invalid-auth-event"),{status:_.onEvent(E.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:_},d.iframes[c._key()]=p,_})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(Cc,{type:Cc},_=>{var E;const R=null===(E=_?.[0])||void 0===E?void 0:E[Cc];void 0!==R&&d(!!R),et(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function lh(f){return Ja.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return dn()||Ce()||we()}};class Jo{constructor(c){this.factorId=c}_process(c,d,p){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,p);case"signin":return this._finalizeSignIn(c,d.credential);default:return st("unexpected MultiFactorSessionType")}}}class so extends Jo{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new so(c)}_finalizeEnroll(c,d,p){return function d0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:finalize",V(f,c))}(c,{idToken:d,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function eh(f,c){return Q(f,"POST","/v2/accounts/mfaSignIn:finalize",V(f,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let iI=(()=>{class f{constructor(){}static assertion(d){return so._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var jg="@firebase/auth";class D0{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,T.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,q.Pz)("authIdTokenMaxAge"),function eu(f){(0,x._registerComponent)(new Wt.wA("auth",(c,{options:d})=>{const p=c.getProvider("app").getImmediate(),_=c.getProvider("heartbeat"),E=c.getProvider("app-check-internal"),{apiKey:R,authDomain:F}=p.options;te(R&&!R.includes(":"),"invalid-api-key",{appName:p.name});const X={apiKey:R,authDomain:F,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xe(f)},me=new XA(p,_,E,X);return function Pe(f,c){const d=c?.persistence||[],p=(Array.isArray(d)?d:[d]).map(W);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(me,d),me},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,p)=>{c.getProvider("auth-internal").initialize()})),(0,x._registerComponent)(new Wt.wA("auth-internal",c=>{const d=Kt(c.getProvider("auth").getImmediate());return new D0(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,x.registerVersion)(jg,"1.4.0",function gh(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(f)),(0,x.registerVersion)(jg,"1.4.0","esm2017")}("Browser")},58:(bi,Dn,Me)=>{Me.d(Dn,{BH:()=>Rr,G6:()=>Si,L:()=>at,LL:()=>K,P0:()=>qt,Pz:()=>It,Sg:()=>pn,UG:()=>st,ZB:()=>Te,ZR:()=>Q,aH:()=>et,b$:()=>un,eu:()=>$,hl:()=>L,jU:()=>Vt,m9:()=>Oi,ne:()=>Mr,pd:()=>pi,r3:()=>bn,ru:()=>nn,tV:()=>Z,uI:()=>te,vZ:()=>Ri,w1:()=>di,xO:()=>Mi,xb:()=>yr,z$:()=>qe,zd:()=>fi});const De=function(S){const C=[];let I=0;for(let w=0;w<S.length;w++){let v=S.charCodeAt(w);v<128?C[I++]=v:v<2048?(C[I++]=v>>6|192,C[I++]=63&v|128):55296==(64512&v)&&w+1<S.length&&56320==(64512&S.charCodeAt(w+1))?(v=65536+((1023&v)<<10)+(1023&S.charCodeAt(++w)),C[I++]=v>>18|240,C[I++]=v>>12&63|128,C[I++]=v>>6&63|128,C[I++]=63&v|128):(C[I++]=v>>12|224,C[I++]=v>>6&63|128,C[I++]=63&v|128)}return C},Wt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(S,C){if(!Array.isArray(S))throw Error("encodeByteArray takes an array as a parameter");this.init_();const I=C?this.byteToCharMapWebSafe_:this.byteToCharMap_,w=[];for(let v=0;v<S.length;v+=3){const A=S[v],W=v+1<S.length,_e=W?S[v+1]:0,ve=v+2<S.length,Oe=ve?S[v+2]:0;let Dt=(15&_e)<<2|Oe>>6,Ce=63&Oe;ve||(Ce=64,W||(Dt=64)),w.push(I[A>>2],I[(3&A)<<4|_e>>4],I[Dt],I[Ce])}return w.join("")},encodeString(S,C){return this.HAS_NATIVE_SUPPORT&&!C?btoa(S):this.encodeByteArray(De(S),C)},decodeString(S,C){return this.HAS_NATIVE_SUPPORT&&!C?atob(S):function(S){const C=[];let I=0,w=0;for(;I<S.length;){const v=S[I++];if(v<128)C[w++]=String.fromCharCode(v);else if(v>191&&v<224){const A=S[I++];C[w++]=String.fromCharCode((31&v)<<6|63&A)}else if(v>239&&v<365){const ve=((7&v)<<18|(63&S[I++])<<12|(63&S[I++])<<6|63&S[I++])-65536;C[w++]=String.fromCharCode(55296+(ve>>10)),C[w++]=String.fromCharCode(56320+(1023&ve))}else{const A=S[I++],W=S[I++];C[w++]=String.fromCharCode((15&v)<<12|(63&A)<<6|63&W)}}return C.join("")}(this.decodeStringToByteArray(S,C))},decodeStringToByteArray(S,C){this.init_();const I=C?this.charToByteMapWebSafe_:this.charToByteMap_,w=[];for(let v=0;v<S.length;){const A=I[S.charAt(v++)],_e=v<S.length?I[S.charAt(v)]:0;++v;const Oe=v<S.length?I[S.charAt(v)]:64;++v;const he=v<S.length?I[S.charAt(v)]:64;if(++v,null==A||null==_e||null==Oe||null==he)throw new an;w.push(A<<2|_e>>4),64!==Oe&&(w.push(_e<<4&240|Oe>>2),64!==he&&w.push(Oe<<6&192|he))}return w},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let S=0;S<this.ENCODED_VALS.length;S++)this.byteToCharMap_[S]=this.ENCODED_VALS.charAt(S),this.charToByteMap_[this.byteToCharMap_[S]]=S,this.byteToCharMapWebSafe_[S]=this.ENCODED_VALS_WEBSAFE.charAt(S),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[S]]=S,S>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(S)]=S,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(S)]=S)}}};class an extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const at=function(S){return function(S){const C=De(S);return Wt.encodeByteArray(C,!0)}(S).replace(/\./g,"")},Z=function(S){try{return Wt.decodeString(S,!0)}catch(C){console.error("base64Decode failed: ",C)}return null};function Te(S,C){if(!(C instanceof Object))return C;switch(C.constructor){case Date:return new Date(C.getTime());case Object:void 0===S&&(S={});break;case Array:S=[];break;default:return C}for(const I in C)!C.hasOwnProperty(I)||!je(I)||(S[I]=Te(S[I],C[I]));return S}function je(S){return"__proto__"!==S}const Fe=()=>{try{return function pt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const S=process.env.__FIREBASE_DEFAULTS__;return S?JSON.parse(S):void 0})()||(()=>{if(typeof document>"u")return;let S;try{S=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const C=S&&Z(S[1]);return C&&JSON.parse(C)})()}catch(S){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${S}`)}},qt=S=>{const C=(S=>{var C,I;return null===(I=null===(C=Fe())||void 0===C?void 0:C.emulatorHosts)||void 0===I?void 0:I[S]})(S);if(!C)return;const I=C.lastIndexOf(":");if(I<=0||I+1===C.length)throw new Error(`Invalid host ${C} with no separate hostname and port!`);const w=parseInt(C.substring(I+1),10);return"["===C[0]?[C.substring(1,I-1),w]:[C.substring(0,I),w]},et=()=>{var S;return null===(S=Fe())||void 0===S?void 0:S.config},It=S=>{var C;return null===(C=Fe())||void 0===C?void 0:C[`_${S}`]};class Rr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((C,I)=>{this.resolve=C,this.reject=I})}wrapCallback(C){return(I,w)=>{I?this.reject(I):this.resolve(w),"function"==typeof C&&(this.promise.catch(()=>{}),1===C.length?C(I):C(I,w))}}}function pn(S,C){if(S.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const w=C||"demo-project",v=S.iat||0,A=S.sub||S.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const W=Object.assign({iss:`https://securetoken.google.com/${w}`,aud:w,iat:v,exp:v+3600,auth_time:v,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},S);return[at(JSON.stringify({alg:"none",type:"JWT"})),at(JSON.stringify(W)),""].join(".")}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function st(){var S;const C=null===(S=Fe())||void 0===S?void 0:S.forceEnvironment;if("node"===C)return!0;if("browser"===C)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Vt(){return"object"==typeof self&&self.self===self}function nn(){const S="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof S&&void 0!==S.id}function un(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function di(){const S=qe();return S.indexOf("MSIE ")>=0||S.indexOf("Trident/")>=0}function Si(){return!st()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L(){try{return"object"==typeof indexedDB}catch{return!1}}function $(){return new Promise((S,C)=>{try{let I=!0;const w="validate-browser-context-for-indexeddb-analytics-module",v=self.indexedDB.open(w);v.onsuccess=()=>{v.result.close(),I||self.indexedDB.deleteDatabase(w),S(!0)},v.onupgradeneeded=()=>{I=!1},v.onerror=()=>{var A;C((null===(A=v.error)||void 0===A?void 0:A.message)||"")}}catch(I){C(I)}})}class Q extends Error{constructor(C,I,w){super(I),this.code=C,this.customData=w,this.name="FirebaseError",Object.setPrototypeOf(this,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K.prototype.create)}}class K{constructor(C,I,w){this.service=C,this.serviceName=I,this.errors=w}create(C,...I){const w=I[0]||{},v=`${this.service}/${C}`,A=this.errors[C],W=A?function ue(S,C){return S.replace(Je,(I,w)=>{const v=C[w];return null!=v?String(v):`<${w}?>`})}(A,w):"Error";return new Q(v,`${this.serviceName}: ${W} (${v}).`,w)}}const Je=/\{\$([^}]+)}/g;function bn(S,C){return Object.prototype.hasOwnProperty.call(S,C)}function yr(S){for(const C in S)if(Object.prototype.hasOwnProperty.call(S,C))return!1;return!0}function Ri(S,C){if(S===C)return!0;const I=Object.keys(S),w=Object.keys(C);for(const v of I){if(!w.includes(v))return!1;const A=S[v],W=C[v];if(ct(A)&&ct(W)){if(!Ri(A,W))return!1}else if(A!==W)return!1}for(const v of w)if(!I.includes(v))return!1;return!0}function ct(S){return null!==S&&"object"==typeof S}function Mi(S){const C=[];for(const[I,w]of Object.entries(S))Array.isArray(w)?w.forEach(v=>{C.push(encodeURIComponent(I)+"="+encodeURIComponent(v))}):C.push(encodeURIComponent(I)+"="+encodeURIComponent(w));return C.length?"&"+C.join("&"):""}function fi(S){const C={};return S.replace(/^\?/,"").split("&").forEach(w=>{if(w){const[v,A]=w.split("=");C[decodeURIComponent(v)]=decodeURIComponent(A)}}),C}function pi(S){const C=S.indexOf("?");if(!C)return"";const I=S.indexOf("#",C);return S.substring(C,I>0?I:void 0)}function Mr(S,C){const I=new Nr(S,C);return I.subscribe.bind(I)}class Nr{constructor(C,I){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=I,this.task.then(()=>{C(this)}).catch(w=>{this.error(w)})}next(C){this.forEachObserver(I=>{I.next(C)})}error(C){this.forEachObserver(I=>{I.error(C)}),this.close(C)}complete(){this.forEachObserver(C=>{C.complete()}),this.close()}subscribe(C,I,w){let v;if(void 0===C&&void 0===I&&void 0===w)throw new Error("Missing Observer.");v=function Ln(S,C){if("object"!=typeof S||null===S)return!1;for(const I of C)if(I in S&&"function"==typeof S[I])return!0;return!1}(C,["next","error","complete"])?C:{next:C,error:I,complete:w},void 0===v.next&&(v.next=Et),void 0===v.error&&(v.error=Et),void 0===v.complete&&(v.complete=Et);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?v.error(this.finalError):v.complete()}catch{}}),this.observers.push(v),A}unsubscribeOne(C){void 0===this.observers||void 0===this.observers[C]||(delete this.observers[C],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(C){if(!this.finalized)for(let I=0;I<this.observers.length;I++)this.sendOne(I,C)}sendOne(C,I){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[C])try{I(this.observers[C])}catch(w){typeof console<"u"&&console.error&&console.error(w)}})}close(C){this.finalized||(this.finalized=!0,void 0!==C&&(this.finalError=C),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Et(){}function Oi(S){return S&&S._delegate?S._delegate:S}},713:(bi,Dn,Me)=>{function T(t){return"function"==typeof t}function q(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const x=q(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function De(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ft{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(T(r))try{r()}catch(s){e=s instanceof x?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Nt(s)}catch(o){e=e??[],o instanceof x?e=[...e,...o.errors]:e.push(o)}}if(e)throw new x(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Nt(e);else{if(e instanceof ft){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&De(n,e)}remove(e){const{_finalizers:n}=this;n&&De(n,e),e instanceof ft&&e._removeParent(this)}}ft.EMPTY=(()=>{const t=new ft;return t.closed=!0,t})();const Wt=ft.EMPTY;function an(t){return t instanceof ft||t&&"closed"in t&&T(t.remove)&&T(t.add)&&T(t.unsubscribe)}function Nt(t){T(t)?t():t.unsubscribe()}const at={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout(t,e,...n){const{delegate:r}=Z;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Z;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function re(t){Z.setTimeout(()=>{const{onUnhandledError:e}=at;if(!e)throw t;e(t)})}function Te(){}const je=nt("C",void 0,void 0);function nt(t,e,n){return{kind:t,value:e,error:n}}let Ve=null;function Fe(t){if(at.useDeprecatedSynchronousErrorHandling){const e=!Ve;if(e&&(Ve={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Ve;if(Ve=null,n)throw r}}else t()}class qt extends ft{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,an(e)&&e.add(this)):this.destination=Vt}static create(e,n,r){return new pn(e,n,r)}next(e){this.isStopped?st(function Cn(t){return nt("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?st(function pt(t){return nt("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?st(je,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const et=Function.prototype.bind;function It(t,e){return et.call(t,e)}class Rr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qe(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qe(r)}else qe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qe(n)}}}class pn extends qt{constructor(e,n,r){let i;if(super(),T(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&at.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&It(e.next,s),error:e.error&&It(e.error,s),complete:e.complete&&It(e.complete,s)}):i=e}this.destination=new Rr(i)}}function qe(t){at.useDeprecatedSynchronousErrorHandling?function xn(t){at.useDeprecatedSynchronousErrorHandling&&Ve&&(Ve.errorThrown=!0,Ve.error=t)}(t):re(t)}function st(t,e){const{onStoppedNotification:n}=at;n&&Z.setTimeout(()=>n(t,e))}const Vt={closed:!0,next:Te,error:function te(t){throw t},complete:Te},nn="function"==typeof Symbol&&Symbol.observable||"@@observable";function un(t){return t}function di(t){return 0===t.length?un:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let We=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function L(t){return t&&t instanceof qt||function Si(t){return t&&T(t.next)&&T(t.error)&&T(t.complete)}(t)&&an(t)}(n)?n:new pn(n,r,i);return Fe(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Pr(r))((i,s)=>{const o=new pn({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[nn](){return this}pipe(...n){return di(n)(this)}toPromise(n){return new(n=Pr(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Pr(t){var e;return null!==(e=t??at.Promise)&&void 0!==e?e:Promise}const $=q(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let j=(()=>{class t extends We{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new V(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new $}next(n){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Wt:(this.currentObservers=null,s.push(n),new ft(()=>{this.currentObservers=null,De(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new We;return n.source=this,n}}return t.create=(e,n)=>new V(e,n),t})();class V extends j{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Wt}}function Q(t){return T(t?.lift)}function K(t){return e=>{if(Q(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new Je(t,e,n,r,i)}class Je extends qt{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ge(t,e){return K((n,r)=>{let i=0;n.subscribe(ue(r,s=>{r.next(t.call(e,s,i++))}))})}var Se=Me(582);const ut=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Lt(t){return T(t?.then)}function bt(t){return T(t[nn])}function Gt(t){return Symbol.asyncIterator&&T(t?.[Symbol.asyncIterator])}function An(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Fn=function bn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function yr(t){return T(t?.[Fn])}function hi(t){return(0,Se.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Se.qq)(n.read());if(i)return yield(0,Se.qq)(void 0);yield yield(0,Se.qq)(r)}}finally{n.releaseLock()}})}function Ri(t){return T(t?.getReader)}function ct(t){if(t instanceof We)return t;if(null!=t){if(bt(t))return function Pi(t){return new We(e=>{const n=t[nn]();if(T(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(ut(t))return function Mi(t){return new We(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Lt(t))return function fi(t){return new We(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,re)})}(t);if(Gt(t))return Zn(t);if(yr(t))return function pi(t){return new We(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Ri(t))return function Mr(t){return Zn(hi(t))}(t)}throw An(t)}function Zn(t){return new We(e=>{(function Nr(t,e){var n,r,i,s;return(0,Se.mG)(this,void 0,void 0,function*(){try{for(n=(0,Se.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function xr(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Et(t,e,n=1/0){return T(e)?Et((r,i)=>ge((s,o)=>e(r,s,i,o))(ct(t(r,i))),n):("number"==typeof e&&(n=e),K((r,i)=>function Ln(t,e,n,r,i,s,o,a){const u=[];let l=0,h=0,g=!1;const m=()=>{g&&!u.length&&!l&&e.complete()},y=b=>l<r?D(b):u.push(b),D=b=>{s&&e.next(b),l++;let M=!1;ct(n(b,h++)).subscribe(ue(e,U=>{i?.(U),s?y(U):e.next(U)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){const U=u.shift();o?xr(e,o,()=>D(U)):D(U)}m()}catch(U){e.error(U)}}))};return t.subscribe(ue(e,y,()=>{g=!0,m()})),()=>{a?.()}}(r,i,t,n)))}function Or(t=1/0){return Et(un,t)}const cn=new We(t=>t.complete());function Ni(t){return t[t.length-1]}function xi(t){return T(Ni(t))?t.pop():void 0}function gi(t){return function ln(t){return t&&T(t.schedule)}(Ni(t))?t.pop():void 0}function gn(t,e=0){return K((n,r)=>{n.subscribe(ue(r,i=>xr(r,t,()=>r.next(i),e),()=>xr(r,t,()=>r.complete(),e),i=>xr(r,t,()=>r.error(i),e)))})}function Kn(t,e=0){return K((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Oi(t,e){if(!t)throw new Error("Iterable cannot be null");return new We(n=>{xr(n,e,()=>{const r=t[Symbol.asyncIterator]();xr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function I(t,e){return e?function C(t,e){if(null!=t){if(bt(t))return function kr(t,e){return ct(t).pipe(Kn(e),gn(e))}(t,e);if(ut(t))return function fs(t,e){return new We(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Lt(t))return function Mo(t,e){return ct(t).pipe(Kn(e),gn(e))}(t,e);if(Gt(t))return Oi(t,e);if(yr(t))return function zs(t,e){return new We(n=>{let r;return xr(n,e,()=>{r=t[Fn](),xr(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>T(r?.return)&&r.return()})}(t,e);if(Ri(t))return function S(t,e){return Oi(hi(t),e)}(t,e)}throw An(t)}(t,e):ct(t)}function w(...t){const e=gi(t),n=function Sn(t,e){return"number"==typeof Ni(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?ct(r[0]):Or(n)(I(r,e)):cn}class v extends j{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function A(...t){return I(t,gi(t))}function W(t={}){const{connector:e=(()=>new j),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,l=0,h=!1,g=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=u=void 0,h=g=!1},D=()=>{const b=o;y(),b?.unsubscribe()};return K((b,M)=>{l++,!g&&!h&&m();const U=u=u??e();M.add(()=>{l--,0===l&&!g&&!h&&(a=_e(D,i))}),U.subscribe(M),!o&&l>0&&(o=new pn({next:N=>U.next(N),error:N=>{g=!0,m(),a=_e(y,n,N),U.error(N)},complete:()=>{h=!0,m(),a=_e(y,r),U.complete()}}),ct(b).subscribe(o))})(s)}}function _e(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new pn({next:()=>{r.unsubscribe(),t()}});return ct(e(...n)).subscribe(r)}function ve(t,e){return K((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(ue(r,u=>{i?.unsubscribe();let l=0;const h=s++;ct(t(u,h)).subscribe(i=ue(r,g=>r.next(e?e(u,g,h,l++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Oe(t,e=un){return t=t??lt,K((n,r)=>{let i,s=!0;n.subscribe(ue(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function lt(t,e){return t===e}function he(t){for(let e in t)if(t[e]===he)return e;throw Error("Could not find renamed property on target object.")}function Dt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ce(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ce).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function On(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Ws=he({__forward_ref__:he});function k(t){return t.__forward_ref__=k,t.toString=function(){return Ce(this())},t}function P(t){return ee(t)?t():t}function ee(t){return"function"==typeof t&&t.hasOwnProperty(Ws)&&t.__forward_ref__===k}function we(t){return t&&!!t.\u0275providers}const Qe="https://g.co/ng/security#xss";class H extends Error{constructor(e,n){super(function dn(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Ee(t){return"string"==typeof t?t:null==t?"":String(t)}function vd(t,e){throw new H(-201,!1)}function Qn(t,e){null==t&&function Ne(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Pe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function vr(t){return{providers:t.providers||[],imports:t.imports||[]}}function ju(t){return Gp(t,xo)||Gp(t,Hu)}function Gp(t,e){return t.hasOwnProperty(e)?t[e]:null}function Fa(t){return t&&(t.hasOwnProperty(Id)||t.hasOwnProperty(Dv))?t[Id]:null}const xo=he({\u0275prov:he}),Id=he({\u0275inj:he}),Hu=he({ngInjectableDef:he}),Dv=he({ngInjectorDef:he});var Ye=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ye||{});let Ed;function Ir(t){const e=Ed;return Ed=t,e}function Wu(t,e,n){const r=ju(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ye.Optional?null:void 0!==e?e:void vd(Ce(t))}const Ct=globalThis;class ce{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Pe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Gs={},bd="__NG_DI_FLAG__",Fr="ngTempTokenPath",Sd=/\n/gm,Zu="__source";let Oo;function gs(t){const e=Oo;return Oo=t,e}function bv(t,e=Ye.Default){if(void 0===Oo)throw new H(-203,!1);return null===Oo?Wu(t,void 0,e):Oo.get(t,e&Ye.Optional?null:void 0,e)}function oe(t,e=Ye.Default){return(function zu(){return Ed}()||bv)(P(t),e)}function Ie(t,e=Ye.Default){return oe(t,Ku(e))}function Ku(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Zs(t){const e=[];for(let n=0;n<t.length;n++){const r=P(t[n]);if(Array.isArray(r)){if(0===r.length)throw new H(900,!1);let i,s=Ye.Default;for(let o=0;o<r.length;o++){const a=r[o],u=Pd(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(oe(i,s))}else e.push(oe(r))}return e}function Qu(t,e){return t[bd]=e,t.prototype[bd]=e,t}function Pd(t){return t[bd]}function Lr(t){return{toString:t}.toString()}var Yu=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Yu||{}),mi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(mi||{});const ki={},gt=[],Ji=he({\u0275cmp:he}),Md=he({\u0275dir:he}),Vo=he({\u0275pipe:he}),Yp=he({\u0275mod:he}),Vi=he({\u0275fac:he}),Ks=he({__NG_ELEMENT_ID__:he}),Ur=he({__NG_ENV_ID__:he});function Nd(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function xd(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];Ua(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Ju(t){return 3===t||4===t||6===t}function Ua(t){return 64===t.charCodeAt(0)}function Fo(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Od(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Od(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const Jp="ng-template";function kd(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==Nd(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Xu(t){return 4===t.type&&t.value!==Jp}function Vd(t,e,n){return e===(4!==t.type||n?t.value:Jp)}function ec(t,e,n){let r=4;const i=t.attrs||[],s=function Fd(t){for(let e=0;e<t.length;e++)if(Ju(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Vd(t,u,n)||""===u&&1===e.length){if(Br(r))return!1;o=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!kd(t.attrs,l,n)){if(Br(r))return!1;o=!0}continue}const g=Xp(8&r?"class":u,i,Xu(t),n);if(-1===g){if(Br(r))return!1;o=!0;continue}if(""!==l){let m;m=g>s?"":i[g+1].toLowerCase();const y=8&r?m:null;if(y&&-1!==Nd(y,l,0)||2&r&&l!==m){if(Br(r))return!1;o=!0}}}}else{if(!o&&!Br(r)&&!Br(u))return!1;if(o&&Br(u))continue;o=!1,r=u|1&r}}return Br(r)||o}function Br(t){return 0==(1&t)}function Xp(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function nc(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function tc(t,e,n=!1){for(let r=0;r<e.length;r++)if(ec(t,e[r],n))return!0;return!1}function Ud(t,e){return t?":not("+e.trim()+")":e}function Bd(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Br(o)&&(e+=Ud(s,i),i=""),r=o,s=s||!Br(r);n++}return""!==i&&(e+=Ud(s,i)),e}function Lo(t){return Lr(()=>{const e=ng(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Yu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||mi.Emulated,styles:t.styles||gt,_:null,schemas:t.schemas||null,tView:null,id:""};ic(n);const r=t.dependencies;return n.directiveDefs=Ba(r,!1),n.pipeDefs=Ba(r,!0),n.id=function Rv(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Sv(t){return rt(t)||Un(t)}function Hd(t){return null!==t}function Yn(t){return Lr(()=>({type:t.type,bootstrap:t.bootstrap||gt,declarations:t.declarations||gt,imports:t.imports||gt,exports:t.exports||gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function rc(t,e){if(null==t)return ki;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function xe(t){return Lr(()=>{const e=ng(t);return ic(e),e})}function Jn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function rt(t){return t[Ji]||null}function Un(t){return t[Md]||null}function Bn(t){return t[Vo]||null}function ar(t,e){const n=t[Yp]||null;if(!n&&!0===e)throw new Error(`Type ${Ce(t)} does not have '\u0275mod' property.`);return n}function ng(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ki,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||gt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:rc(t.inputs,e),outputs:rc(t.outputs)}}function ic(t){t.features?.forEach(e=>e(t))}function Ba(t,e){if(!t)return null;const n=e?Bn:Sv;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(Hd)}const Ut=0,fe=1,Le=2,Bt=3,_i=4,Qs=5,Xn=6,Bo=7,Qt=8,_s=9,ys=10,Ue=11,Ys=12,rg=13,vs=14,hn=15,Js=16,$o=17,ei=18,$a=19,sc=20,Is=21,Xi=22,jo=23,Xs=24,tt=25,oc=1,ig=2,Fi=7,Ho=9,er=11;function $r(t){return Array.isArray(t)&&"object"==typeof t[oc]}function $n(t){return Array.isArray(t)&&!0===t[oc]}function qd(t){return 0!=(4&t.flags)}function eo(t){return t.componentOffset>-1}function Gd(t){return 1==(1&t.flags)}function Li(t){return!!t.template}function sg(t){return 0!=(512&t[Le])}function zo(t,e){return t.hasOwnProperty(Vi)?t[Vi]:null}let fn=null,uc=!1;function yt(t){const e=fn;return fn=t,e}const dg={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function hg(t){if(!Wa(t)||t.dirty){if(!t.producerMustRecompute(t)&&!za(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function fg(t){t.dirty=!0,function lc(t){if(void 0===t.liveConsumerNode)return;const e=uc;uc=!0;try{for(const n of t.liveConsumerNode)n.dirty||fg(n)}finally{uc=e}}(t),t.consumerMarkedDirty?.(t)}function dc(t){return t&&(t.nextProducerIndex=0),yt(t)}function Yd(t,e){if(yt(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Wa(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)no(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function za(t){Es(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(hg(n),r!==n.version))return!0}return!1}function Jd(t){if(Es(t),Wa(t))for(let e=0;e<t.producerNode.length;e++)no(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function no(t,e){if(function Xd(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Es(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)no(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Es(i),i.producerIndexOfThis[r]=e}}function Wa(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Es(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let xv=null;function yg(t){const e=yt(null);try{return t()}finally{yt(e)}}const vg=()=>{},Uv=(()=>({...dg,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:vg}))();class Ig{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function ti(){return Eg}function Eg(t){return t.type.prototype.ngOnChanges&&(t.setInput=nh),Bv}function Bv(){const t=fc(this),e=t?.current;if(e){const n=t.previous;if(n===ki)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function nh(t,e,n,r){const i=this.declaredInputs[n],s=fc(t)||function $v(t,e){return t[wg]=e}(t,{previous:ki,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new Ig(u&&u.currentValue,e,a===ki),t[r]=e}ti.ngInherit=!0;const wg="__ngSimpleChanges__";function fc(t){return t[wg]||null}const ni=function(t,e,n){};function xt(t){for(;Array.isArray(t);)t=t[Ut];return t}function gc(t,e){return xt(e[t])}function mn(t,e){return xt(e[t.index])}function Tg(t,e){return t.data[e]}function jr(t,e){const n=e[t];return $r(n)?n:n[Ut]}function ws(t,e){return null==e?null:t[e]}function mc(t){t[$o]=0}function zv(t){1024&t[Le]||(t[Le]|=1024,Cg(t,1))}function _c(t){1024&t[Le]&&(t[Le]&=-1025,Cg(t,-1))}function Cg(t,e){let n=t[Bt];if(null===n)return;n[Qs]+=e;let r=n;for(n=n[Bt];null!==n&&(1===e&&1===r[Qs]||-1===e&&0===r[Qs]);)n[Qs]+=e,r=n,n=n[Bt]}const ke={lFrame:Vg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function vc(){return ke.bindingsEnabled}function Y(){return ke.lFrame.lView}function dt(){return ke.lFrame.tView}function jn(){let t=Pg();for(;null!==t&&64===t.type;)t=t.parent;return t}function Pg(){return ke.lFrame.currentTNode}function Bi(t,e){const n=ke.lFrame;n.currentTNode=t,n.isParent=e}function Qa(){return ke.lFrame.isParent}function io(){return ke.lFrame.bindingIndex++}function es(t){const e=ke.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Kv(t,e){const n=ke.lFrame;n.bindingIndex=n.bindingRootIndex=t,lh(e)}function lh(t){ke.lFrame.currentDirectiveIndex=t}function dh(t){ke.lFrame.currentQueryIndex=t}function xg(t){const e=t[fe];return 2===e.type?e.declTNode:1===e.type?t[Xn]:null}function Og(t,e,n){if(n&Ye.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&Ye.Host||(i=xg(s),null===i||(s=s[vs],10&i.type))););if(null===i)return!1;e=i,t=s}const r=ke.lFrame=kg();return r.currentTNode=e,r.lView=t,!0}function Ko(t){const e=kg(),n=t[fe];ke.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function kg(){const t=ke.lFrame,e=null===t?null:t.child;return null===e?Vg(t):e}function Vg(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Fg(){const t=ke.lFrame;return ke.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Lg=Fg;function hh(){const t=Fg();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function cr(){return ke.lFrame.selectedIndex}function ts(t){ke.lFrame.selectedIndex=t}function Yt(){const t=ke.lFrame;return Tg(t.tView,t.selectedIndex)}let Ug=!0;function Tc(){return Ug}function Ts(t){Ug=t}function Dc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=h&&(t.destroyHooks??=[]).push(n,h)}}function Qo(t,e,n){Cc(t,e,3,n)}function Yo(t,e,n,r){(3&t[Le])===n&&Cc(t,e,n,r)}function ph(t,e){let n=t[Le];(3&n)===e&&(n&=8191,n+=1,t[Le]=n)}function Cc(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[$o]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[$o]+=65536),(a<s||-1==s)&&($g(t,n,e,u),t[$o]=(4294901760&t[$o])+u+2),u++}function Bg(t,e){ni(4,t,e);const n=yt(null);try{e.call(t)}finally{yt(n),ni(5,t,e)}}function $g(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[Le]>>13<t[$o]>>16&&(3&t[Le])===e&&(t[Le]+=8192,Bg(a,s)):Bg(a,s)}const Jo=-1;class so{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function gh(t){return t!==Jo}function eu(t){return 32767&t}function tu(t,e){let n=function aI(t){return t>>16}(t),r=e;for(;n>0;)r=r[vs],n--;return r}let bc=!0;function Sc(t){const e=bc;return bc=t,e}const f=255,c=5;let d=0;const p={};function E(t,e){const n=F(t,e);if(-1!==n)return n;const r=e[fe];r.firstCreatePass&&(t.injectorIndex=e.length,R(r.data,t),R(e,null),R(r.blueprint,null));const i=X(t,e),s=t.injectorIndex;if(gh(i)){const o=eu(i),a=tu(i,e),u=a[fe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function R(t,e){t.push(0,0,0,0,0,0,0,0,e)}function F(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function X(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=C0(i),null===r)return Jo;if(n++,i=i[vs],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Jo}function me(t,e,n){!function _(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ks)&&(r=n[Ks]),null==r&&(r=n[Ks]=d++);const i=r&f;e.data[t+(i>>c)]|=1<<i}(t,e,n)}function it(t,e,n){if(n&Ye.Optional||void 0!==t)return t;vd()}function lr(t,e,n,r){if(n&Ye.Optional&&void 0===r&&(r=null),!(n&(Ye.Self|Ye.Host))){const i=t[_s],s=Ir(void 0);try{return i?i.get(e,r,n&Ye.Optional):Wu(e,r,n&Ye.Optional)}finally{Ir(s)}}return it(r,0,n)}function ns(t,e,n,r=Ye.Default,i){if(null!==t){if(2048&e[Le]&&!(r&Ye.Self)){const o=function U2(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[Le]&&!(512&o[Le]);){const a=nu(s,o,n,r|Ye.Self,p);if(a!==p)return a;let u=s.parent;if(!u){const l=o[sc];if(l){const h=l.get(n,p,r);if(h!==p)return h}u=C0(o),o=o[vs]}s=u}return i}(t,e,n,r,p);if(o!==p)return o}const s=nu(t,e,n,r,p);if(s!==p)return s}return lr(e,n,r,i)}function nu(t,e,n,r,i){const s=function zg(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ks)?t[Ks]:void 0;return"number"==typeof e?e>=0?e&f:uI:e}(n);if("function"==typeof s){if(!Og(e,t,r))return r&Ye.Host?it(i,0,r):lr(e,n,r,i);try{let o;if(o=s(r),null!=o||r&Ye.Optional)return o;vd()}finally{Lg()}}else if("number"==typeof s){let o=null,a=F(t,e),u=Jo,l=r&Ye.Host?e[hn][Xn]:null;for((-1===a||r&Ye.SkipSelf)&&(u=-1===a?X(t,e):e[a+8],u!==Jo&&mh(r,!1)?(o=e[fe],a=eu(u),e=tu(u,e)):a=-1);-1!==a;){const h=e[fe];if(Rc(s,a,h.data)){const g=Hg(a,e,n,o,r,l);if(g!==p)return g}u=e[a+8],u!==Jo&&mh(r,e[fe].data[a+8]===l)&&Rc(s,a,e)?(o=h,a=eu(u),e=tu(u,e)):a=-1}}return i}function Hg(t,e,n,r,i,s){const o=e[fe],a=o.data[t+8],h=function Xo(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,h=s>>20,m=i?a+h:t.directiveEnd;for(let y=r?a:a+h;y<m;y++){const D=o[y];if(y<u&&n===D||y>=u&&D.type===n)return y}if(i){const y=o[u];if(y&&Li(y)&&y.type===n)return u}return null}(a,o,n,null==r?eo(a)&&bc:r!=o&&0!=(3&a.type),i&Ye.Host&&s===a);return null!==h?Ds(e,o,h,a):p}function Ds(t,e,n,r){let i=t[n];const s=e.data;if(function iI(t){return t instanceof so}(i)){const o=i;o.resolving&&function Va(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new H(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Xe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ee(t)}(s[n]));const a=Sc(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ir(o.injectImpl):null;Og(t,r,Ye.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function rI(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Eg(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==l&&Ir(l),Sc(a),o.resolving=!1,Lg()}}return i}function Rc(t,e,n){return!!(n[e+(t>>c)]&1<<t)}function mh(t,e){return!(t&Ye.Self||t&Ye.Host&&e)}class tr{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ns(this._tNode,this._lView,e,Ku(r),n)}}function uI(){return new tr(jn(),Y())}function Rn(t){return Lr(()=>{const e=t.prototype.constructor,n=e[Vi]||yh(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[Vi]||yh(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function yh(t){return ee(t)?()=>{const e=yh(P(t));return e&&e()}:zo(t)}function C0(t){const e=t[fe],n=e.type;return 2===n?e.declTNode:1===n?t[Xn]:null}const Mc="__parameters__";function xc(t,e,n){return Lr(()=>{const r=function cI(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,h){const g=u.hasOwnProperty(Mc)?u[Mc]:Object.defineProperty(u,Mc,{value:[]})[Mc];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function kc(t,e){t.forEach(n=>Array.isArray(n)?kc(n,e):e(n))}function b0(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function qg(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function yi(t,e,n){let r=Vc(t,e);return r>=0?t[1|r]=n:(r=~r,function q2(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function lI(t,e){const n=Vc(t,e);if(n>=0)return t[1|n]}function Vc(t,e){return function S0(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const vi=Qu(xc("Optional"),8),Zg=Qu(xc("SkipSelf"),4);function Xg(t){return 128==(128&t.flags)}var ta=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ta||{});const gI=new Map;let mU=0;const _I="__ngContext__";function Er(t,e){$r(e)?(t[_I]=e[$a],function yU(t){gI.set(t[$a],t)}(e)):t[_I]=e}let yI;function vI(t,e){return yI(t,e)}function Th(t){const e=t[Bt];return $n(e)?e[Bt]:e}function Z0(t){return Q0(t[Ys])}function K0(t){return Q0(t[_i])}function Q0(t){for(;null!==t&&!$n(t);)t=t[_i];return t}function Uc(t,e,n,r,i){if(null!=r){let s,o=!1;$n(r)?s=r:$r(r)&&(o=!0,r=r[Ut]);const a=xt(r);0===t&&null!==n?null==i?eb(e,n,a):ru(e,n,a,i||null,!0):1===t&&null!==n?ru(e,n,a,i||null,!0):2===t?function om(t,e,n){const r=im(t,e);r&&function FU(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function BU(t,e,n,r,i){const s=n[Fi];s!==xt(n)&&Uc(e,t,r,s,i);for(let a=er;a<n.length;a++){const u=n[a];Ch(u[fe],u,t,e,r,s)}}(e,t,s,n,i)}}function nm(t,e,n){return t.createElement(e,n)}function J0(t,e){const n=t[Ho],r=n.indexOf(e);_c(e),n.splice(r,1)}function rm(t,e){if(t.length<=er)return;const n=er+e,r=t[n];if(r){const i=r[Js];null!==i&&i!==t&&J0(i,r),e>0&&(t[n-1][_i]=r[_i]);const s=qg(t,er+e);!function RU(t,e){Ch(t,e,e[Ue],2,null,null),e[Ut]=null,e[Xn]=null}(r[fe],r);const o=s[ei];null!==o&&o.detachView(s[fe]),r[Bt]=null,r[_i]=null,r[Le]&=-129}return r}function EI(t,e){if(!(256&e[Le])){const n=e[Ue];e[jo]&&Jd(e[jo]),e[Xs]&&Jd(e[Xs]),n.destroyNode&&Ch(t,e,n,3,null,null),function NU(t){let e=t[Ys];if(!e)return wI(t[fe],t);for(;e;){let n=null;if($r(e))n=e[Ys];else{const r=e[er];r&&(n=r)}if(!n){for(;e&&!e[_i]&&e!==t;)$r(e)&&wI(e[fe],e),e=e[Bt];null===e&&(e=t),$r(e)&&wI(e[fe],e),n=e&&e[_i]}e=n}}(e)}}function wI(t,e){if(!(256&e[Le])){e[Le]&=-129,e[Le]|=256,function VU(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof so)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];ni(4,a,u);try{u.call(a)}finally{ni(5,a,u)}}else{ni(4,i,s);try{s.call(i)}finally{ni(5,i,s)}}}}}(t,e),function kU(t,e){const n=t.cleanup,r=e[Bo];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[Bo]=null);const i=e[Is];if(null!==i){e[Is]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[fe].type&&e[Ue].destroy();const n=e[Js];if(null!==n&&$n(e[Bt])){n!==e[Bt]&&J0(n,e);const r=e[ei];null!==r&&r.detachView(t)}!function vU(t){gI.delete(t[$a])}(e)}}function TI(t,e,n){return function X0(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Ut];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===mi.None||s===mi.Emulated)return null}return mn(r,n)}}(t,e.parent,n)}function ru(t,e,n,r,i){t.insertBefore(e,n,r,i)}function eb(t,e,n){t.appendChild(e,n)}function tb(t,e,n,r,i){null!==r?ru(t,e,n,r,i):eb(t,e,n)}function im(t,e){return t.parentNode(e)}let DI,SI,um,ib=function rb(t,e,n){return 40&t.type?mn(t,n):null};function sm(t,e,n,r){const i=TI(t,r,e),s=e[Ue],a=function nb(t,e,n){return ib(t,e,n)}(r.parent||e[Xn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)tb(s,i,n[u],a,!1);else tb(s,i,n,a,!1);void 0!==DI&&DI(s,r,e,n,i)}function Dh(t,e){if(null!==e){const n=e.type;if(3&n)return mn(e,t);if(4&n)return CI(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Dh(t,r);{const i=t[e.index];return $n(i)?CI(-1,i):xt(i)}}if(32&n)return vI(e,t)()||xt(t[e.index]);{const r=ob(t,e);return null!==r?Array.isArray(r)?r[0]:Dh(Th(t[hn]),r):Dh(t,e.next)}}return null}function ob(t,e){return null!==e?t[hn][Xn].projection[e.projection]:null}function CI(t,e){const n=er+t+1;if(n<e.length){const r=e[n],i=r[fe].firstChild;if(null!==i)return Dh(r,i)}return e[Fi]}function AI(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Er(xt(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)AI(t,e,n.child,r,i,s,!1),Uc(e,t,i,a,s);else if(32&u){const l=vI(n,r);let h;for(;h=l();)Uc(e,t,i,h,s);Uc(e,t,i,a,s)}else 16&u?ub(t,e,r,n,i,s):Uc(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ch(t,e,n,r,i,s){AI(n,r,t.firstChild,e,i,s,!1)}function ub(t,e,n,r,i,s){const o=n[hn],u=o[Xn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)Uc(e,t,i,u[l],s);else{let l=u;const h=o[Bt];Xg(r)&&(l.flags|=128),AI(t,e,l,h,i,s,!0)}}function cb(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function lb(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&xd(t,e,r),null!==i&&cb(t,e,i),null!==s&&function jU(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function fb(t){return function RI(){if(void 0===um&&(um=null,Ct.trustedTypes))try{um=Ct.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return um}()?.createScriptURL(t)||t}class pb{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qe})`}}function na(t){return t instanceof pb?t.changingThisBreaksApplicationSecurity:t}function Ah(t,e){const n=function JU(t){return t instanceof pb&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Qe})`)}return n===e}const nB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var jc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(jc||{});function Eb(t){const e=Sh();return e?e.sanitize(jc.URL,t)||"":Ah(t,"URL")?na(t):function PI(t){return(t=String(t)).match(nB)?t:"unsafe:"+t}(Ee(t))}function wb(t){const e=Sh();if(e)return fb(e.sanitize(jc.RESOURCE_URL,t)||"");if(Ah(t,"ResourceURL"))return fb(na(t));throw new H(904,!1)}function Sh(){const t=Y();return t&&t[ys].sanitizer}const Rh=new ce("ENVIRONMENT_INITIALIZER"),Db=new ce("INJECTOR",-1),Cb=new ce("INJECTOR_DEF_TYPES");class OI{get(e,n=Gs){if(n===Gs){const r=new Error(`NullInjectorError: No provider for ${Ce(e)}!`);throw r.name="NullInjectorError",r}return n}}function gB(...t){return{\u0275providers:bb(0,t),\u0275fromNgModule:!0}}function bb(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return kc(e,o=>{const a=o;lm(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Sb(i,s),n}function Sb(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];kI(i,s=>{e(s,r)})}}function lm(t,e,n,r){if(!(t=P(t)))return!1;let i=null,s=Fa(t);const o=!s&&rt(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=Fa(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)lm(l,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{kc(s.imports,h=>{lm(h,e,n,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&Sb(l,e)}if(!a){const l=zo(i)||(()=>new i);e({provide:i,useFactory:l,deps:gt},i),e({provide:Cb,useValue:i,multi:!0},i),e({provide:Rh,useValue:()=>oe(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const l=t;kI(u,h=>{e(h,l)})}}}return i!==t&&void 0!==t.providers}function kI(t,e){for(let n of t)we(n)&&(n=n.\u0275providers),Array.isArray(n)?kI(n,e):e(n)}const mB=he({provide:String,useValue:he});function VI(t){return null!==t&&"object"==typeof t&&mB in t}function iu(t){return"function"==typeof t}const FI=new ce("Set Injector scope."),dm={},yB={};let LI;function hm(){return void 0===LI&&(LI=new OI),LI}class Hi{}class Hc extends Hi{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,BI(e,o=>this.processProvider(o)),this.records.set(Db,zc(void 0,this)),i.has("environment")&&this.records.set(Hi,zc(void 0,this));const s=this.records.get(FI);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Cb.multi,gt,Ye.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=gs(this),r=Ir(void 0);try{return e()}finally{gs(n),Ir(r)}}get(e,n=Gs,r=Ye.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ur))return e[Ur](this);r=Ku(r);const s=gs(this),o=Ir(void 0);try{if(!(r&Ye.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function TB(t){return"function"==typeof t||"object"==typeof t&&t instanceof ce}(e)&&ju(e);u=l&&this.injectableDefInScope(l)?zc(UI(e),dm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&Ye.Self?hm():this.parent).get(e,n=r&Ye.Optional&&n===Gs?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Fr]=a[Fr]||[]).unshift(Ce(e)),s)throw a;return function Yi(t,e,n,r){const i=t[Fr];throw e[Zu]&&i.unshift(e[Zu]),t.message=function ko(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Ce(e);if(Array.isArray(e))i=e.map(Ce).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ce(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Sd,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Fr]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Ir(o),gs(s)}}resolveInjectorInitializers(){const e=gs(this),n=Ir(void 0);try{const i=this.get(Rh.multi,gt,Ye.Self);for(const s of i)s()}finally{gs(e),Ir(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Ce(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){let n=iu(e=P(e))?e:P(e&&e.provide);const r=function IB(t){return VI(t)?zc(void 0,t.useValue):zc(Mb(t),dm)}(e);if(iu(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=zc(void 0,dm,!0),i.factory=()=>Zs(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===dm&&(n.value=yB,n.value=n.factory()),"object"==typeof n.value&&n.value&&function wB(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=P(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function UI(t){const e=ju(t),n=null!==e?e.factory:zo(t);if(null!==n)return n;if(t instanceof ce)throw new H(204,!1);if(t instanceof Function)return function vB(t){const e=t.length;if(e>0)throw function Ih(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new H(204,!1);const n=function No(t){return t&&(t[xo]||t[Hu])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new H(204,!1)}function Mb(t,e,n){let r;if(iu(t)){const i=P(t);return zo(i)||UI(i)}if(VI(t))r=()=>P(t.useValue);else if(function Pb(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Zs(t.deps||[]));else if(function Rb(t){return!(!t||!t.useExisting)}(t))r=()=>oe(P(t.useExisting));else{const i=P(t&&(t.useClass||t.provide));if(!function EB(t){return!!t.deps}(t))return zo(i)||UI(i);r=()=>new i(...Zs(t.deps))}return r}function zc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function BI(t,e){for(const n of t)Array.isArray(n)?BI(n,e):n&&we(n)?BI(n.\u0275providers,e):e(n)}const fm=new ce("AppId",{providedIn:"root",factory:()=>DB}),DB="ng",Nb=new ce("Platform Initializer"),ao=new ce("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),xb=new ce("CSP nonce",{providedIn:"root",factory:()=>function $c(){if(void 0!==SI)return SI;if(typeof document<"u")return document;throw new H(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Ob=(t,e,n)=>null;function ZI(t,e,n=!1){return Ob(t,e,n)}class OB{}class Fb{}class VB{resolveComponentFactory(e){throw function kB(t){const e=Error(`No component factory found for ${Ce(t)}.`);return e.ngComponent=t,e}(e)}}let vm=(()=>{class t{static#e=this.NULL=new VB}return t})();function FB(){return Gc(jn(),Y())}function Gc(t,e){return new Ii(mn(t,e))}let Ii=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=FB}return t})();class Ub{}let uo=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function UB(){const t=Y(),n=jr(jn().index,t);return($r(n)?n:t)[Ue]}()}return t})(),BB=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>null})}return t})();class Zc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Bb=new Zc("16.2.12"),YI={};function zb(t,e=null,n=null,r){const i=Wb(t,e,n,r);return i.resolveInjectorInitializers(),i}function Wb(t,e=null,n=null,r,i=new Set){const s=[n||gt,gB(t)];return r=r||("object"==typeof t?void 0:Ce(t)),new Hc(s,e||hm(),r||null,i)}let Hr=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Gs;static#t=this.NULL=new OI;static create(n,r){if(Array.isArray(n))return zb({name:""},r,n,"");{const i=n.name??"";return zb({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Pe({token:t,providedIn:"any",factory:()=>oe(Db)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function XI(t){return t.ngOriginalError}class co{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&XI(e);for(;n&&XI(n);)n=XI(n);return n||null}}function tE(t){return e=>{setTimeout(t,void 0,e)}}const _n=class GB extends j{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=tE(s),i&&(i=tE(i)),o&&(o=tE(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof ft&&e.add(a),a}};function Gb(...t){}class vt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _n(!1),this.onMicrotaskEmpty=new _n(!1),this.onStable=new _n(!1),this.onError=new _n(!1),typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function ZB(){const t="function"==typeof Ct.requestAnimationFrame;let e=Ct[t?"requestAnimationFrame":"setTimeout"],n=Ct[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function YB(t){const e=()=>{!function QB(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ct,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,rE(t),t.isCheckStableRunning=!0,nE(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),rE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function XB(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return Zb(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Kb(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Zb(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Kb(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,rE(t),nE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vt.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(vt.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,KB,Gb,Gb);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const KB={};function nE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function rE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Zb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Kb(t){t._nesting--,nE(t)}class JB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _n,this.onMicrotaskEmpty=new _n,this.onStable=new _n,this.onError=new _n}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const Qb=new ce("",{providedIn:"root",factory:Yb});function Yb(){const t=Ie(vt);let e=!0;return w(new We(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new We(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{vt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{vt.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(W()))}function lo(t){return t instanceof Function?t():t}let iE=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new t})}return t})();function Nh(t){for(;t;){t[Le]|=64;const e=Th(t);if(sg(t)&&!e)return t;t=e}return null}const nS=new ce("",{providedIn:"root",factory:()=>!1});let Em=null;function oS(t,e){return t[e]??cS()}function aS(t,e){const n=cS();n.producerNode?.length&&(t[e]=Em,n.lView=t,Em=uS())}const c$={...dg,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Nh(t.lView)},lView:null};function uS(){return Object.create(c$)}function cS(){return Em??=uS(),Em}const ze={};function zi(t){lS(dt(),Y(),cr()+t,!1)}function lS(t,e,n,r){if(!r)if(3==(3&e[Le])){const s=t.preOrderCheckHooks;null!==s&&Qo(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Yo(e,s,0,n)}ts(n)}function ie(t,e=Ye.Default){const n=Y();return null===n?oe(t,e):ns(jn(),n,P(t),e)}function wm(t,e,n,r,i,s,o,a,u,l,h){const g=e.blueprint.slice();return g[Ut]=i,g[Le]=140|r,(null!==l||t&&2048&t[Le])&&(g[Le]|=2048),mc(g),g[Bt]=g[vs]=t,g[Qt]=n,g[ys]=o||t&&t[ys],g[Ue]=a||t&&t[Ue],g[_s]=u||t&&t[_s]||null,g[Xn]=s,g[$a]=function _U(){return mU++}(),g[Xi]=h,g[sc]=l,g[hn]=2==e.type?t[hn]:g,g}function Yc(t,e,n,r,i){let s=t.data[e];if(null===s)s=function sE(t,e,n,r,i){const s=Pg(),o=Qa(),u=t.data[e]=function _$(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Zo(){return null!==ke.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function Mg(){return ke.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function ro(){const t=ke.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Bi(s,!0),s}function xh(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function hS(t,e,n,r,i){const s=oS(e,jo),o=cr(),a=2&r;try{ts(-1),a&&e.length>tt&&lS(t,e,tt,!1),ni(a?2:0,i);const l=a?s:null,h=dc(l);try{null!==l&&(l.dirty=!1),n(r,i)}finally{Yd(l,h)}}finally{a&&null===e[jo]&&aS(e,jo),ts(o),ni(a?3:1,i)}}function oE(t,e,n){if(qd(e)){const r=yt(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{yt(r)}}}function aE(t,e,n){vc()&&(function D$(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;eo(n)&&function M$(t,e,n){const r=mn(e,t),i=fS(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Tm(t,wm(t,i,null,o,r,e,null,t[ys].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||E(n,e),Er(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],l=Ds(e,t,a,n);Er(l,e),null!==o&&N$(0,a-i,l,u,0,o),Li(u)&&(jr(n.index,e)[Qt]=Ds(e,t,a,n))}}(t,e,n,mn(n,e)),64==(64&n.flags)&&yS(t,e,n))}function uE(t,e,n=mn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function fS(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=cE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function cE(t,e,n,r,i,s,o,a,u,l,h){const g=tt+r,m=g+i,y=function d$(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ze);return n}(g,m),D="function"==typeof l?l():l;return y[fe]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}let pS=t=>null;function gS(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?mS(n,e,i,s):r.hasOwnProperty(i)&&mS(n,e,r[i],s)}return n}function mS(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function Ei(t,e,n,r,i,s,o,a){const u=mn(e,n);let h,l=e.inputs;!a&&null!=l&&(h=l[r])?(pE(t,n,h,r,i),eo(e)&&function I$(t,e){const n=jr(e,t);16&n[Le]||(n[Le]|=64)}(n,e.index)):3&e.type&&(r=function v$(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function lE(t,e,n,r){if(vc()){const i=null===r?null:{"":-1},s=function A$(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(tc(e,o.selectors,!1))if(r||(r=[]),Li(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),dE(t,e,a.length)}else r.unshift(o),dE(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&_S(t,e,n,o,i,a),i&&function b$(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new H(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Fo(n.mergedAttrs,n.attrs)}function _S(t,e,n,r,i,s){for(let l=0;l<r.length;l++)me(E(n,e),t,r[l].type);!function R$(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=xh(t,e,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];n.mergedAttrs=Fo(n.mergedAttrs,h.hostAttrs),P$(t,n,e,u,h),S$(u,h,i),null!==h.contentQueries&&(n.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(n.flags|=64);const g=h.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function y$(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,l=null;for(let h=e.directiveStart;h<i;h++){const g=s[h],m=n?n.get(g):null,D=m?m.outputs:null;u=gS(g.inputs,h,u,m?m.inputs:null),l=gS(g.outputs,h,l,D);const b=null===u||null===o||Xu(e)?null:x$(u,h,o);a.push(b)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(t,n,s)}function yS(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function Qv(){return ke.lFrame.currentDirectiveIndex}();try{ts(s);for(let a=r;a<i;a++){const u=t.data[a],l=e[a];lh(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&C$(u,l)}}finally{ts(-1),lh(o)}}function C$(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function dE(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function S$(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Li(e)&&(n[""]=t)}}function P$(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=zo(i.type)),o=new so(s,Li(i),ie);t.blueprint[r]=o,n[r]=o,function w$(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function T$(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,xh(t,n,i.hostVars,ze),i)}function Cs(t,e,n,r,i,s){const o=mn(t,e);!function hE(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?Ee(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[Ue],o,s,t.value,n,r,i)}function N$(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)vS(r,n,o[a++],o[a++],o[a++])}function vS(t,e,n,r,i){const s=yt(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{yt(s)}}function x$(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function IS(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function ES(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];dh(n[r]),o.contentQueries(2,e[s],s)}}}function Tm(t,e){return t[Ys]?t[rg][_i]=e:t[Ys]=e,t[rg]=e,e}function fE(t,e,n){dh(0);const r=yt(null);try{e(t,n)}finally{yt(r)}}function CS(t,e){const n=t[_s],r=n?n.get(co,null):null;r&&r.handleError(e)}function pE(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];vS(t.data[o],e[o],r,a,i)}}function ho(t,e,n){const r=gc(e,t);!function Y0(t,e,n){t.setValue(e,n)}(t[Ue],r,n)}function O$(t,e){const n=jr(e,t),r=n[fe];!function k$(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Ut];null!==i&&null===n[Xi]&&(n[Xi]=ZI(i,n[_s])),gE(r,n,n[Qt])}function gE(t,e,n){Ko(e);try{const r=t.viewQuery;null!==r&&fE(1,r,n);const i=t.template;null!==i&&hS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ES(t,e),t.staticViewQueries&&fE(2,t.viewQuery,n);const s=t.components;null!==s&&function V$(t,e){for(let n=0;n<e.length;n++)O$(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Le]&=-5,hh()}}let AS=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function Lv(t,e,n){const r=Object.create(Uv);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>fg(r),run:()=>{if(r.dirty=!1,r.hasRun&&!za(r))return;r.hasRun=!0;const o=dc(r);try{r.cleanupFn(),r.cleanupFn=vg,r.fn(i)}finally{Yd(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,l=>{this.all.has(l)&&this.queue.set(l,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new t})}return t})();function Dm(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=On(i,a):2==s&&(r=On(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Oh(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(xt(s)),$n(s)&&bS(s,r);const o=n.type;if(8&o)Oh(t,e,n.child,r);else if(32&o){const a=vI(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=ob(e,n);if(Array.isArray(a))r.push(...a);else{const u=Th(e[hn]);Oh(u[fe],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function bS(t,e){for(let n=er;n<t.length;n++){const r=t[n],i=r[fe].firstChild;null!==i&&Oh(r[fe],r,i,e)}t[Fi]!==t[Ut]&&e.push(t[Fi])}function Cm(t,e,n,r=!0){const i=e[ys],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{SS(t,e,t.template,n)}catch(u){throw r&&CS(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function SS(t,e,n,r){const i=e[Le];if(256!=(256&i)){e[ys].effectManager?.flush(),Ko(e);try{mc(e),function ch(t){return ke.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&hS(t,e,n,2,r);const o=3==(3&i);if(o){const l=t.preOrderCheckHooks;null!==l&&Qo(e,l,null)}else{const l=t.preOrderHooks;null!==l&&Yo(e,l,0,null),ph(e,0)}if(function U$(t){for(let e=Z0(t);null!==e;e=K0(e)){if(!e[ig])continue;const n=e[Ho];for(let r=0;r<n.length;r++){zv(n[r])}}}(e),RS(e,2),null!==t.contentQueries&&ES(t,e),o){const l=t.contentCheckHooks;null!==l&&Qo(e,l)}else{const l=t.contentHooks;null!==l&&Yo(e,l,1),ph(e,1)}!function l$(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=oS(e,Xs);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)ts(~s);else{const o=s,a=n[++i],u=n[++i];Kv(a,o),r.dirty=!1;const l=dc(r);try{u(2,e[o])}finally{Yd(r,l)}}}}finally{null===e[Xs]&&aS(e,Xs),ts(-1)}}(t,e);const a=t.components;null!==a&&MS(e,a,0);const u=t.viewQuery;if(null!==u&&fE(2,u,r),o){const l=t.viewCheckHooks;null!==l&&Qo(e,l)}else{const l=t.viewHooks;null!==l&&Yo(e,l,2),ph(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Le]&=-73,_c(e)}finally{hh()}}}function RS(t,e){for(let n=Z0(t);null!==n;n=K0(n))for(let r=er;r<n.length;r++)PS(n[r],e)}function B$(t,e,n){PS(jr(e,t),n)}function PS(t,e){if(!function Dg(t){return 128==(128&t[Le])}(t))return;const n=t[fe],r=t[Le];if(80&r&&0===e||1024&r||2===e)SS(n,t,n.template,t[Qt]);else if(t[Qs]>0){RS(t,1);const i=n.components;null!==i&&MS(t,i,1)}}function MS(t,e,n){for(let r=0;r<e.length;r++)B$(t,e[r],n)}class kh{get rootNodes(){const e=this._lView,n=e[fe];return Oh(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Qt]}set context(e){this._lView[Qt]=e}get destroyed(){return 256==(256&this._lView[Le])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Bt];if($n(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(rm(e,r),qg(n,r))}this._attachedToViewContainer=!1}EI(this._lView[fe],this._lView)}onDestroy(e){!function yc(t,e){if(256==(256&t[Le]))throw new H(911,!1);null===t[Is]&&(t[Is]=[]),t[Is].push(e)}(this._lView,e)}markForCheck(){Nh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Le]&=-129}reattach(){this._lView[Le]|=128}detectChanges(){Cm(this._lView[fe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function MU(t,e){Ch(t,e,e[Ue],2,null,null)}(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e}}class $$ extends kh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Cm(e[fe],e,e[Qt],!1)}checkNoChanges(){}get context(){return null}}class NS extends vm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=rt(e);return new Vh(n,this.ngModule)}}function xS(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class H${constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ku(r);const i=this.injector.get(e,YI,r);return i!==YI||n===YI?i:this.parentInjector.get(e,n,r)}}class Vh extends Fb{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=xS(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return xS(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function tg(t){return t.map(Bd).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Hi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new H$(e,s):e,a=o.get(Ub,null);if(null===a)throw new H(407,!1);const g={rendererFactory:a,sanitizer:o.get(BB,null),effectManager:o.get(AS,null),afterRenderEventManager:o.get(iE,null)},m=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?function h$(t,e,n,r){const s=r.get(nS,!1)||n===mi.ShadowDom,o=t.selectRootElement(e,s);return function f$(t){pS(t)}(o),o}(m,r,this.componentDef.encapsulation,o):nm(m,y,function j$(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),U=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let N=null;null!==D&&(N=ZI(D,o,!0));const z=cE(0,null,null,1,0,null,null,null,null,null,null),se=wm(null,z,null,U,null,null,g,m,o,null,N);let de,Be;Ko(se);try{const At=this.componentDef;let _r,$p=null;At.findHostDirectiveDefs?(_r=[],$p=new Map,At.findHostDirectiveDefs(At,_r,$p),_r.push(At)):_r=[At];const yv=function W$(t,e){const n=t[fe],r=tt;return t[r]=e,Yc(n,r,2,"#host",null)}(se,D),AJ=function q$(t,e,n,r,i,s,o){const a=i[fe];!function G$(t,e,n,r){for(const i of t)e.mergedAttrs=Fo(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Dm(e,e.mergedAttrs,!0),null!==n&&lb(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=ZI(e,i[_s]));const l=s.rendererFactory.createRenderer(e,n);let h=16;n.signals?h=4096:n.onPush&&(h=64);const g=wm(i,fS(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&dE(a,t,r.length-1),Tm(i,g),i[t.index]=g}(yv,D,At,_r,se,g,m);Be=Tg(z,tt),D&&function K$(t,e,n,r){if(r)xd(t,n,["ng-version",Bb.full]);else{const{attrs:i,classes:s}=function $d(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Br(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&xd(t,n,i),s&&s.length>0&&cb(t,n,s.join(" "))}}(m,At,D,r),void 0!==n&&function Q$(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(Be,this.ngContentSelectors,n),de=function Z$(t,e,n,r,i,s){const o=jn(),a=i[fe],u=mn(o,i);_S(a,i,o,n,null,r);for(let h=0;h<n.length;h++)Er(Ds(i,a,o.directiveStart+h,o),i);yS(a,i,o),u&&Er(u,i);const l=Ds(i,a,o.directiveStart+o.componentOffset,o);if(t[Qt]=i[Qt]=l,null!==s)for(const h of s)h(l,e);return oE(a,o,t),l}(AJ,At,_r,$p,se,[Y$]),gE(z,se,null)}finally{hh()}return new z$(this.componentType,de,Gc(Be,se),se,Be)}}class z$ extends OB{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new $$(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;pE(s[fe],s,i,e,n),this.previousInputValues.set(e,n),Nh(jr(this._tNode.index,s))}}get injector(){return new tr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Y$(){const t=jn();Dc(Y()[fe],t)}function St(t){let e=function OS(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Li(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=Am(t.inputs),o.inputTransforms=Am(t.inputTransforms),o.declaredInputs=Am(t.declaredInputs),o.outputs=Am(t.outputs);const a=i.hostBindings;a&&tj(t,a);const u=i.viewQuery,l=i.contentQueries;if(u&&X$(t,u),l&&ej(t,l),Dt(t.inputs,i.inputs),Dt(t.declaredInputs,i.declaredInputs),Dt(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Dt(o.inputTransforms,i.inputTransforms)),Li(i)&&i.data.animation){const h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===St&&(n=!1)}}e=Object.getPrototypeOf(e)}!function J$(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fo(i.hostAttrs,n=Fo(n,i.hostAttrs))}}(r)}function Am(t){return t===ki?{}:t===gt?[]:t}function X$(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function ej(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function tj(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function LS(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function bm(t){return!!function mE(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function wr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function bs(t,e,n,r){const i=Y();return wr(i,io(),e)&&(dt(),Cs(Yt(),i,t,e,n,r)),bs}function Xc(t,e,n,r){return wr(t,io(),n)?e+Ee(n)+r:ze}function el(t,e,n,r,i,s){const a=function su(t,e,n,r){const i=wr(t,e,n);return wr(t,e+1,r)||i}(t,function $i(){return ke.lFrame.bindingIndex}(),n,i);return es(2),a?e+Ee(n)+r+Ee(i)+s:ze}function wE(t,e,n,r,i,s,o,a){const u=Y(),l=dt(),h=t+tt,g=l.firstCreatePass?function Aj(t,e,n,r,i,s,o,a,u){const l=e.consts,h=Yc(e,t,4,o||null,ws(l,a));lE(e,n,h,ws(l,u)),Dc(e,h);const g=h.tView=cE(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,l,u,e,n,r,i,s,o):l.data[h];Bi(g,!1);const m=YS(l,u,g,t);Tc()&&sm(l,u,m,g),Er(m,u),Tm(u,u[h]=IS(m,u,m,g)),Gd(g)&&aE(l,u,g),null!=o&&uE(u,g,a)}let YS=function JS(t,e,n,r){return Ts(!0),e[Ue].createComment("")};function fo(t,e,n){const r=Y();return wr(r,io(),e)&&Ei(dt(),Yt(),r,t,e,r[Ue],n,!1),fo}function TE(t,e,n,r,i){const o=i?"class":"style";pE(t,n,e.inputs[o],o,r)}function yn(t,e,n,r){const i=Y(),s=dt(),o=tt+t,a=i[Ue],u=s.firstCreatePass?function Mj(t,e,n,r,i,s){const o=e.consts,u=Yc(e,t,2,r,ws(o,i));return lE(e,n,u,ws(o,s)),null!==u.attrs&&Dm(u,u.attrs,!1),null!==u.mergedAttrs&&Dm(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],l=XS(s,i,u,a,e,t);i[o]=l;const h=Gd(u);return Bi(u,!0),lb(a,l,u),32!=(32&u.flags)&&Tc()&&sm(s,i,l,u),0===function Wv(){return ke.lFrame.elementDepthCount}()&&Er(l,i),function oh(){ke.lFrame.elementDepthCount++}(),h&&(aE(s,i,u),oE(s,u,i)),null!==r&&uE(i,u),yn}function vn(){let t=jn();Qa()?function Ya(){ke.lFrame.isParent=!1}():(t=t.parent,Bi(t,!1));const e=t;(function Ag(t){return ke.skipHydrationRootTNode===t})(e)&&function Gv(){ke.skipHydrationRootTNode=null}(),function ah(){ke.lFrame.elementDepthCount--}();const n=dt();return n.firstCreatePass&&(Dc(n,t),qd(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Ac(t){return 0!=(8&t.flags)}(e)&&TE(n,e,Y(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function jg(t){return 0!=(16&t.flags)}(e)&&TE(n,e,Y(),e.stylesWithoutHost,!1),vn}function Ss(t,e,n,r){return yn(t,e,n,r),vn(),Ss}let XS=(t,e,n,r,i,s)=>(Ts(!0),nm(r,i,function fh(){return ke.lFrame.currentNamespace}()));function $h(t){return!!t&&"function"==typeof t.then}function rR(t){return!!t&&"function"==typeof t.subscribe}function zn(t,e,n,r){const i=Y(),s=dt(),o=jn();return function sR(t,e,n,r,i,s,o){const a=Gd(r),l=t.firstCreatePass&&function TS(t){return t.cleanup||(t.cleanup=[])}(t),h=e[Qt],g=function wS(t){return t[Bo]||(t[Bo]=[])}(e);let m=!0;if(3&r.type||o){const b=mn(r,e),M=o?o(b):b,U=g.length,N=o?se=>o(xt(se[r.index])):r.index;let z=null;if(!o&&a&&(z=function Fj(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[Bo],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==z)(z.__ngLastListenerFn__||z).__ngNextListenerFn__=s,z.__ngLastListenerFn__=s,m=!1;else{s=aR(r,e,h,s,!1);const se=n.listen(M,i,s);g.push(s,se),l&&l.push(i,N,U,U+1)}}else s=aR(r,e,h,s,!1);const y=r.outputs;let D;if(m&&null!==y&&(D=y[i])){const b=D.length;if(b)for(let M=0;M<b;M+=2){const de=e[D[M]][D[M+1]].subscribe(s),Be=g.length;g.push(s,de),l&&l.push(i,r.index,Be,-(Be+1))}}}(s,i,i[Ue],o,t,e,r),zn}function oR(t,e,n,r){try{return ni(6,e,n),!1!==n(r)}catch(i){return CS(t,i),!1}finally{ni(7,e,n)}}function aR(t,e,n,r,i){return function s(o){if(o===Function)return r;Nh(t.componentOffset>-1?jr(t.index,e):e);let u=oR(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=oR(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function uR(t=1){return function Yv(t){return(ke.lFrame.contextLView=function Jv(t,e){for(;t>0;)e=e[vs],t--;return e}(t,ke.lFrame.contextLView))[Qt]}(t)}function Nm(t,e,n,r,i){const s=Y(),o=Xc(s,e,n,r);return o!==ze&&Ei(dt(),Yt(),s,t,o,s[Ue],i,!1),Nm}function xm(t,e){return t<<17|e<<2}function ra(t){return t>>17&32767}function AE(t){return 2|t}function ou(t){return(131068&t)>>2}function bE(t,e){return-131069&t|e<<2}function SE(t){return 1|t}function yR(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?ra(s):ou(s),u=!1;for(;0!==a&&(!1===u||o);){const h=t[a+1];qj(t[a],e)&&(u=!0,t[a+1]=r?SE(h):AE(h)),a=r?ra(h):ou(h)}u&&(t[n+1]=r?AE(s):SE(s))}function qj(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Vc(t,e)>=0}function Om(t,e){return function rs(t,e,n,r){const i=Y(),s=dt(),o=es(2);s.firstUpdatePass&&function bR(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[cr()],o=function AR(t,e){return e>=t.expandoStartIndex}(t,n);(function MR(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function tH(t,e,n,r){const i=function Ja(t){const e=ke.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=jh(n=RE(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=RE(i,t,e,n,r),null===s){let u=function nH(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==ou(r))return t[ra(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=RE(null,t,e,u[1],r),u=jh(u,e.attrs,r),function rH(t,e,n,r){t[ra(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function iH(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=jh(r,t[s].hostAttrs,n);return jh(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function zj(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ra(o),u=ou(o);t[r]=n;let h,l=!1;if(Array.isArray(n)?(h=n[1],(null===h||Vc(n,h)>0)&&(l=!0)):h=n,i)if(0!==u){const m=ra(t[a+1]);t[r+1]=xm(m,a),0!==m&&(t[m+1]=bE(t[m+1],r)),t[a+1]=function jj(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=xm(a,0),0!==a&&(t[a+1]=bE(t[a+1],r)),a=r;else t[r+1]=xm(u,0),0===a?a=r:t[u+1]=bE(t[u+1],r),u=r;l&&(t[r+1]=AE(t[r+1])),yR(t,h,r,!0),yR(t,h,r,!1),function Wj(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Vc(s,e)>=0&&(n[r+1]=SE(n[r+1]))}(e,h,t,r,s),o=xm(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==ze&&wr(i,o,e)&&function RR(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,l=u[a+1],h=function Hj(t){return 1==(1&t)}(l)?PR(u,e,n,i,ou(l),o):void 0;km(h)||(km(s)||function $j(t){return 2==(2&t)}(l)&&(s=PR(u,null,n,i,a,o)),function $U(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:ta.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ta.Important),t.setStyle(n,r,i,s))}}(r,o,gc(cr(),n),i,s))}(s,s.data[cr()],i,i[Ue],t,i[o+1]=function uH(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Ce(na(t)))),t}(e,n),r,o)}(t,e,null,!0),Om}function RE(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=jh(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function jh(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),yi(t,o,!!n||e[++s]))}return void 0===t?null:t}function PR(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],l=Array.isArray(u),h=l?u[1]:u,g=null===h;let m=n[i+1];m===ze&&(m=g?gt:void 0);let y=g?lI(m,r):h===r?m:void 0;if(l&&!km(y)&&(y=lI(u,r)),km(y)&&(a=y,o))return a;const D=t[i+1];i=o?ra(D):ou(D)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=lI(u,r))}return a}function km(t){return void 0!==t}function zr(t,e=""){const n=Y(),r=dt(),i=t+tt,s=r.firstCreatePass?Yc(r,i,1,e,null):r.data[i],o=NR(r,n,s,e,t);n[i]=o,Tc()&&sm(r,n,o,s),Bi(s,!1)}let NR=(t,e,n,r,i)=>(Ts(!0),function tm(t,e){return t.createText(e)}(e[Ue],r));function Vm(t){return PE("",t,""),Vm}function PE(t,e,n){const r=Y(),i=Xc(r,t,e,n);return i!==ze&&ho(r,cr(),i),PE}function ME(t,e,n,r,i){const s=Y(),o=el(s,t,e,n,r,i);return o!==ze&&ho(s,cr(),o),ME}const cl="en-US";let XR=cl;function OE(t,e,n,r,i){if(t=P(t),Array.isArray(t))for(let s=0;s<t.length;s++)OE(t[s],e,n,r,i);else{const s=dt(),o=Y(),a=jn();let u=iu(t)?t:P(t.provide);const l=Mb(t),h=1048575&a.providerIndexes,g=a.directiveStart,m=a.providerIndexes>>20;if(iu(t)||!t.multi){const y=new so(l,i,ie),D=VE(u,e,i?h:h+m,g);-1===D?(me(E(a,o),s,u),kE(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[D]=y,o[D]=y)}else{const y=VE(u,e,h+m,g),D=VE(u,e,h,h+m),M=D>=0&&n[D];if(i&&!M||!i&&!(y>=0&&n[y])){me(E(a,o),s,u);const U=function Rz(t,e,n,r,i){const s=new so(t,n,ie);return s.multi=[],s.index=e,s.componentProviders=0,DP(s,i,r&&!n),s}(i?Sz:bz,n.length,i,r,l);!i&&M&&(n[D].providerFactory=U),kE(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(U),o.push(U)}else kE(s,t,y>-1?y:D,DP(n[i?D:y],l,!i&&r));!i&&r&&M&&n[D].componentProviders++}}}function kE(t,e,n,r){const i=iu(e),s=function _B(t){return!!t.useClass}(e);if(i||s){const u=(s?P(e.useClass):e).prototype.ngOnDestroy;if(u){const l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const h=l.indexOf(n);-1===h?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function DP(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function VE(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function bz(t,e,n,r){return FE(this.multi,[])}function Sz(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ds(n,n[fe],this.providerFactory.index,r);s=a.slice(0,o),FE(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],FE(i,s);return s}function FE(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function rn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function Az(t,e,n){const r=dt();if(r.firstCreatePass){const i=Li(t);OE(n,r.data,r.blueprint,i,!0),OE(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class uu{}class CP{}class LE extends uu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new NS(this);const i=ar(e);this._bootstrapComponents=lo(i.bootstrap),this._r3Injector=Wb(e,n,[{provide:uu,useValue:this},{provide:vm,useValue:this.componentFactoryResolver},...r],Ce(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class UE extends CP{constructor(e){super(),this.moduleType=e}create(e){return new LE(this.moduleType,e,[])}}class AP extends uu{constructor(e){super(),this.componentFactoryResolver=new NS(this),this.instance=null;const n=new Hc([...e.providers,{provide:uu,useValue:this},{provide:vm,useValue:this.componentFactoryResolver}],e.parent||hm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function BE(t,e,n=null){return new AP({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let Nz=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=bb(0,n.type),i=r.length>0?BE([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Pe({token:t,providedIn:"environment",factory:()=>new t(oe(Hi))})}return t})();function bP(t){t.getStandaloneInjector=e=>e.get(Nz).getOrCreateStandaloneInjector(t)}function OP(t,e,n,r,i,s){const o=e+n;return wr(t,o,i)?function As(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function Zh(t,e){const n=t[e];return n===ze?void 0:n}(t,o+1)}function BP(t,e,n){const r=t+tt,i=Y(),s=function qo(t,e){return t[e]}(i,r);return function Kh(t,e){return t[fe].data[e].pure}(i,r)?OP(i,function ur(){const t=ke.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,s):s.transform(n)}function i4(t,e,n,r=!0){const i=e[fe];if(function xU(t,e,n,r){const i=er+r,s=n.length;r>0&&(n[i-1][_i]=e),r<s-er?(e[_i]=n[i],b0(n,er+r,e)):(n.push(e),e[_i]=null),e[Bt]=n;const o=e[Js];null!==o&&n!==o&&function OU(t,e){const n=t[Ho];e[hn]!==e[Bt][Bt][hn]&&(t[ig]=!0),null===n?t[Ho]=[e]:n.push(e)}(o,e);const a=e[ei];null!==a&&a.insertView(t),e[Le]|=128}(i,e,t,n),r){const s=CI(n,t),o=e[Ue],a=im(o,t[Fi]);null!==a&&function PU(t,e,n,r,i,s){r[Ut]=i,r[Xn]=e,Ch(t,r,n,1,i,s)}(i,t[Xn],o,e,a,s)}}Symbol;let po=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=a4}return t})();const s4=po,o4=class extends s4{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function r4(t,e,n,r){const i=e.tView,a=wm(t,i,n,4096&t[Le]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Js]=t[e.index];const l=t[ei];return null!==l&&(a[ei]=l.createEmbeddedView(i)),gE(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new kh(i)}};function a4(){return function $m(t,e){return 4&t.type?new o4(e,t,Gc(t,e)):null}(jn(),Y())}let ss=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=f4}return t})();function f4(){return function GP(t,e){let n;const r=e[t.index];return $n(r)?n=r:(n=IS(r,e,null,t),e[t.index]=n,Tm(e,n)),ZP(n,e,t,r),new WP(n,t,e)}(jn(),Y())}const p4=ss,WP=class extends p4{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Gc(this._hostTNode,this._hostLView)}get injector(){return new tr(this._hostTNode,this._hostLView)}get parentInjector(){const e=X(this._hostTNode,this._hostLView);if(gh(e)){const n=tu(e,this._hostLView),r=eu(e);return new tr(n[fe].data[r+8],n)}return new tr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=qP(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-er}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function vh(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const b=n||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}const u=o?e:new Vh(rt(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const M=(o?l:this.parentInjector).get(Hi,null);M&&(s=M)}rt(u.componentType??{});const y=u.create(l,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function Hv(t){return $n(t[Bt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[Bt],h=new WP(l,l[Xn],l[Bt]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return i4(a,i,o,!r),e.attachToViewContainerRef(),b0(HE(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=qP(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=rm(this._lContainer,n);r&&(qg(HE(this._lContainer),n),EI(r[fe],r))}detach(e){const n=this._adjustIndex(e,-1),r=rm(this._lContainer,n);return r&&null!=qg(HE(this._lContainer),n)?new kh(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function qP(t){return t[8]}function HE(t){return t[8]||(t[8]=[])}let ZP=function KP(t,e,n,r){if(t[Fi])return;let i;i=8&n.type?xt(r):function g4(t,e){const n=t[Ue],r=n.createComment(""),i=mn(e,t);return ru(n,im(n,i),r,function LU(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Fi]=i};const ew=new ce("Application Initializer");let tw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=Ie(ew,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if($h(s))n.push(s);else if(rR(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),IM=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const go=new ce("LocaleId",{providedIn:"root",factory:()=>Ie(go,Ye.Optional|Ye.SkipSelf)||function q4(){return typeof $localize<"u"&&$localize.locale||cl}()});let EM=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new v(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class K4{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let wM=(()=>{class t{compileModuleSync(n){return new UE(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=lo(ar(n).declarations).reduce((o,a)=>{const u=rt(a);return u&&o.push(new Vh(u)),o},[]);return new K4(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const AM=new ce(""),Wm=new ce("");let ow,iw=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ow||(function _W(t){ow=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(oe(vt),oe(sw),oe(Wm))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),sw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return ow?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),ia=null;const bM=new ce("AllowMultipleToken"),aw=new ce("PlatformDestroyListeners"),uw=new ce("appBootstrapListener");class RM{constructor(e,n){this.name=e,this.token=n}}function MM(t,e,n=[]){const r=`Platform: ${e}`,i=new ce(r);return(s=[])=>{let o=cw();if(!o||o.injector.get(bM,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function IW(t){if(ia&&!ia.get(bM,!1))throw new H(400,!1);(function SM(){!function Ov(t){xv=t}(()=>{throw new H(600,!1)})})(),ia=t;const e=t.get(xM);(function PM(t){t.get(Nb,null)?.forEach(n=>n())})(t)}(function NM(t=[],e){return Hr.create({name:e,providers:[{provide:FI,useValue:"platform"},{provide:aw,useValue:new Set([()=>ia=null])},...t]})}(a,r))}return function wW(t){const e=cw();if(!e)throw new H(401,!1);return e}()}}function cw(){return ia?.get(xM)??null}let xM=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function TW(t="zone.js",e){return"noop"===t?new JB:"zone.js"===t?new vt(e):t}(r?.ngZone,function OM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function Mz(t,e,n){return new LE(t,e,n)}(n.moduleType,this.injector,function UM(t){return[{provide:vt,useFactory:t},{provide:Rh,multi:!0,useFactory:()=>{const e=Ie(CW,{optional:!0});return()=>e.initialize()}},{provide:LM,useFactory:DW},{provide:Qb,useFactory:Yb}]}(()=>i)),o=s.injector.get(co,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{qm(this._modules,s),a.unsubscribe()})}),function kM(t,e,n){try{const r=n();return $h(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(tw);return a.runInitializers(),a.donePromise.then(()=>(function eP(t){Qn(t,"Expected localeId to be defined"),"string"==typeof t&&(XR=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(go,cl)||cl),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=VM({},r);return function yW(t,e,n){const r=new UE(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(hl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new H(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new H(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(aw,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Hr))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function VM(t,e){return Array.isArray(e)?e.reduce(VM,t):{...t,...e}}let hl=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ie(LM),this.zoneIsStable=Ie(Qb),this.componentTypes=[],this.components=[],this.isStable=Ie(EM).hasPendingTasks.pipe(ve(n=>n?A(!1):this.zoneIsStable),Oe(),W()),this._injector=Ie(Hi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof Fb;if(!this._injector.get(tw).done)throw!i&&function Uo(t){const e=rt(t)||Un(t)||Bn(t);return null!==e&&e.standalone}(n),new H(405,!1);let o;o=i?n:this._injector.get(vm).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function vW(t){return t.isBoundToModule}(o)?void 0:this._injector.get(uu),l=o.create(Hr.NULL,[],r||o.selector,a),h=l.location.nativeElement,g=l.injector.get(AM,null);return g?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),qm(this.components,l),g?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new H(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;qm(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(uw,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>qm(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qm(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const LM=new ce("",{providedIn:"root",factory:()=>Ie(co).handleError.bind(void 0)});function DW(){const t=Ie(vt),e=Ie(co);return n=>t.runOutsideAngular(()=>e.handleError(n))}let CW=(()=>{class t{constructor(){this.zone=Ie(vt),this.applicationRef=Ie(hl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let Gm=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=bW}return t})();function bW(t){return function SW(t,e,n){if(eo(t)&&!n){const r=jr(t.index,e);return new kh(r,r)}return 47&t.type?new kh(e[hn],e):null}(jn(),Y(),16==(16&t))}class zM{constructor(){}supports(e){return bm(e)}create(e){return new OW(e)}}const xW=(t,e)=>e;class OW{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||xW}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<qM(r,i,s)?n:r,a=qM(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){const y=m<s.length?s[m]:s[m]=0,D=y+m;h<=D&&D<l&&(s[m]=y+1)}s[o.previousIndex]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!bm(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function uj(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new kW(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new WM),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new WM),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class kW{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VW{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class WM{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new VW,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qM(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function ZM(){return new Qm([new zM])}let Qm=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:ZM});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||ZM()),deps:[[t,new Zg,new vi]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new H(901,!1)}}return t})();const $W=MM(null,"core",[]);let jW=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(oe(hl))};static#t=this.\u0275mod=Yn({type:t});static#n=this.\u0275inj=vr({})}return t})();function fl(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let gw=null;function sa(){return gw}class nq{}const qi=new ce("DocumentToken");let mw=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return Ie(iq)},providedIn:"platform"})}return t})();const rq=new ce("Location Initialized");let iq=(()=>{class t extends mw{constructor(){super(),this._doc=Ie(qi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sa().getBaseHref(this._doc)}onPopState(n){const r=sa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=sa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function _w(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function iN(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function mo(t){return t&&"?"!==t[0]?"?"+t:t}let lu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return Ie(oN)},providedIn:"root"})}return t})();const sN=new ce("appBaseHref");let oN=(()=>{class t extends lu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ie(qi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return _w(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+mo(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+mo(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+mo(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(mw),oe(sN,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),sq=(()=>{class t extends lu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=_w(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+mo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+mo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(mw),oe(sN,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),yw=(()=>{class t{constructor(n){this._subject=new _n,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function uq(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(iN(aN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+mo(r))}normalize(n){return t.stripTrailingSlash(function aq(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,aN(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+mo(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+mo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=mo;static#t=this.joinWithSlash=_w;static#n=this.stripTrailingSlash=iN;static#r=this.\u0275fac=function(r){return new(r||t)(oe(lu))};static#i=this.\u0275prov=Pe({token:t,factory:function(){return function oq(){return new yw(oe(lu))}()},providedIn:"root"})}return t})();function aN(t){return t.replace(/\/index.html$/,"")}class Kq{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Rw=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Kq(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),yN(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{yN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(ie(ss),ie(po),ie(Qm))};static#t=this.\u0275dir=xe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function yN(t,e){t.context.$implicit=e.item}class eG{createSubscription(e,n){return yg(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){yg(()=>e.unsubscribe())}}class tG{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const nG=new tG,rG=new eG;let EN=(()=>{class t{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if($h(n))return nG;if(rR(n))return rG;throw function as(t,e){return new H(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Gm,16))};static#t=this.\u0275pipe=Jn({name:"async",type:t,pure:!1,standalone:!0})}return t})(),EG=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Yn({type:t});static#n=this.\u0275inj=vr({})}return t})();function u_(t){return"server"===t}let CG=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new AG(oe(qi),window)})}return t})();class AG{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function bG(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class YG extends nq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Vw extends YG{static makeCurrent(){!function tq(t){gw||(gw=t)}(new Vw)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function JG(){return nf=nf||document.querySelector("base"),nf?nf.getAttribute("href"):null}();return null==n?null:function XG(t){d_=d_||document.createElement("a"),d_.setAttribute("href",t);const e=d_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){nf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function qq(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let d_,nf=null,t3=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const Fw=new ce("EventManagerPlugins");let SN=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Fw),oe(vt))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();class RN{constructor(e){this._doc=e}}const Lw="ng-app-id";let PN=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=u_(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Lw}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Lw),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Lw,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(qi),oe(fm),oe(xb,8),oe(ao))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const Uw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bw=/%COMP%/g,s3=new ce("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function NN(t,e){return e.map(n=>n.replace(Bw,t))}let xN=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=u_(a),this.defaultRenderer=new $w(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===mi.ShadowDom&&(r={...r,encapsulation:mi.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof kN?i.applyToHost(n):i instanceof jw&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case mi.Emulated:s=new kN(u,l,r,this.appId,h,o,a,g);break;case mi.ShadowDom:return new c3(u,l,n,r,o,a,this.nonce,g);default:s=new jw(u,l,r,h,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(oe(SN),oe(PN),oe(fm),oe(s3),oe(qi),oe(ao),oe(vt),oe(xb))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();class $w{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Uw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(ON(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(ON(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=Uw[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Uw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ta.DashCase|ta.Important)?e.style.setProperty(n,r,i&ta.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ta.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=sa().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function ON(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class c3 extends $w{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=NN(i.id,i.styles);for(const h of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class jw extends $w{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?NN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class kN extends jw{constructor(e,n,r,i,s,o,a,u){const l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=function o3(t){return"_ngcontent-%COMP%".replace(Bw,t)}(l),this.hostAttr=function a3(t){return"_nghost-%COMP%".replace(Bw,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let l3=(()=>{class t extends RN{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(qi))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const VN=["alt","control","meta","shift"],d3={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},h3={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let f3=(()=>{class t extends RN{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sa().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),VN.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=d3[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),VN.forEach(o=>{o!==i&&(0,h3[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(oe(qi))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const LN=[{provide:ao,useValue:"browser"},{provide:Nb,useValue:function p3(){Vw.makeCurrent()},multi:!0},{provide:qi,useFactory:function m3(){return function qU(t){SI=t}(document),document},deps:[]}],_3=MM($W,"browser",LN),y3=new ce(""),UN=[{provide:Wm,useClass:class e3{addToWindow(e){Ct.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new H(5103,!1);return s},Ct.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ct.getAllAngularRootElements=()=>e.getAllRootElements(),Ct.frameworkStabilizers||(Ct.frameworkStabilizers=[]),Ct.frameworkStabilizers.push(r=>{const i=Ct.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?sa().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:AM,useClass:iw,deps:[vt,sw,Wm]},{provide:iw,useClass:iw,deps:[vt,sw,Wm]}],BN=[{provide:FI,useValue:"root"},{provide:co,useFactory:function g3(){return new co},deps:[]},{provide:Fw,useClass:l3,multi:!0,deps:[qi,vt,ao]},{provide:Fw,useClass:f3,multi:!0,deps:[qi]},xN,PN,SN,{provide:Ub,useExisting:xN},{provide:class SG{},useClass:t3,deps:[]},[]];let v3=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:fm,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(oe(y3,12))};static#t=this.\u0275mod=Yn({type:t});static#n=this.\u0275inj=vr({providers:[...BN,...UN],imports:[EG,jW]})}return t})(),$N=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(oe(qi))};static#t=this.\u0275prov=Pe({token:t,factory:function(r){let i=null;return i=r?new r:function E3(){return new $N(oe(qi))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;const{isArray:A3}=Array,{getPrototypeOf:b3,prototype:S3,keys:R3}=Object;function WN(t){if(1===t.length){const e=t[0];if(A3(e))return{args:e,keys:null};if(function P3(t){return t&&"object"==typeof t&&b3(t)===S3}(e)){const n=R3(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:M3}=Array;function qN(t){return ge(e=>function N3(t,e){return M3(e)?t(...e):t(e)}(t,e))}function GN(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let ZN=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(uo),ie(Ii))};static#t=this.\u0275dir=xe({type:t})}return t})(),du=(()=>{class t extends ZN{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Rn(t)))(i||t)}}();static#t=this.\u0275dir=xe({type:t,features:[St]})}return t})();const Ms=new ce("NgValueAccessor"),k3={provide:Ms,useExisting:k(()=>h_),multi:!0},F3=new ce("CompositionEventMode");let h_=(()=>{class t extends ZN{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function V3(){const t=sa()?sa().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(uo),ie(Ii),ie(F3,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&zn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[rn([k3]),St]})}return t})();const Tr=new ce("NgValidators"),ua=new ce("NgAsyncValidators");function sx(t){return null!=t}function ox(t){return $h(t)?I(t):t}function ax(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function ux(t,e){return e.map(n=>n(t))}function cx(t){return t.map(e=>function U3(t){return!t.validate}(e)?e:n=>e.validate(n))}function zw(t){return null!=t?function lx(t){if(!t)return null;const e=t.filter(sx);return 0==e.length?null:function(n){return ax(ux(n,e))}}(cx(t)):null}function Ww(t){return null!=t?function dx(t){if(!t)return null;const e=t.filter(sx);return 0==e.length?null:function(n){return function x3(...t){const e=xi(t),{args:n,keys:r}=WN(t),i=new We(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let h=0;h<o;h++){let g=!1;ct(n[h]).subscribe(ue(s,m=>{g||(g=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!g)&&(l||s.next(r?GN(r,a):a),s.complete())}))}});return e?i.pipe(qN(e)):i}(ux(n,e).map(ox)).pipe(ge(ax))}}(cx(t)):null}function hx(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function qw(t){return t?Array.isArray(t)?t:[t]:[]}function p_(t,e){return Array.isArray(t)?t.includes(e):t===e}function gx(t,e){const n=qw(e);return qw(t).forEach(i=>{p_(n,i)||n.push(i)}),n}function mx(t,e){return qw(e).filter(n=>!p_(t,n))}class _x{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=zw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ww(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Zr extends _x{get formDirective(){return null}get path(){return null}}class ca extends _x{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yx{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let vx=(()=>{class t extends yx{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(ca,2))};static#t=this.\u0275dir=xe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Om("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[St]})}return t})(),Ix=(()=>{class t extends yx{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Zr,10))};static#t=this.\u0275dir=xe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Om("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[St]})}return t})();const rf="VALID",m_="INVALID",gl="PENDING",sf="DISABLED";function Kw(t){return(__(t)?t.validators:t)||null}function Qw(t,e){return(__(e)?e.asyncValidators:t)||null}function __(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Dx{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===rf}get invalid(){return this.status===m_}get pending(){return this.status==gl}get disabled(){return this.status===sf}get enabled(){return this.status!==sf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mx(e,this._rawAsyncValidators))}hasValidator(e){return p_(this._rawValidators,e)}hasAsyncValidator(e){return p_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=gl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=sf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=rf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rf||this.status===gl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sf:rf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=gl,this._hasOwnPendingAsyncValidator=!0;const n=ox(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new _n,this.statusChanges=new _n}_calculateStatus(){return this._allControlsDisabled()?sf:this.errors?m_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gl)?gl:this._anyControlsHaveStatus(m_)?m_:rf}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){__(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function H3(t){return Array.isArray(t)?zw(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function z3(t){return Array.isArray(t)?Ww(t):t||null}(this._rawAsyncValidators)}}class Yw extends Dx{constructor(e,n,r){super(Kw(n),Qw(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function Tx(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new H(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function wx(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new H(1e3,"");if(!r[n])throw new H(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const ml=new ce("CallSetDisabledState",{providedIn:"root",factory:()=>y_}),y_="always";function af(t,e,n=y_){Jw(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function G3(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Cx(t,e)})}(t,e),function K3(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Z3(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Cx(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function q3(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function E_(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Jw(t,e){const n=function fx(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(hx(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function px(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(hx(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();E_(e._rawValidators,i),E_(e._rawAsyncValidators,i)}function Cx(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const e9={provide:Zr,useExisting:k(()=>T_)},uf=(()=>Promise.resolve())();let T_=(()=>{class t extends Zr{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new _n,this.form=new Yw({},zw(n),Ww(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){uf.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),af(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){uf.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){uf.then(()=>{const r=this._findContainer(n.path),i=new Yw({});(function Ax(t,e){Jw(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){uf.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){uf.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function bx(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Tr,10),ie(ua,10),ie(ml,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&zn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[rn([e9]),St]})}return t})();function Sx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Rx(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const Px=class extends Dx{constructor(e=null,n,r){super(Kw(n),Qw(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),__(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=Rx(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Sx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Sx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Rx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},r9={provide:ca,useExisting:k(()=>nT)},xx=(()=>Promise.resolve())();let nT=(()=>{class t extends ca{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new Px,this._registered=!1,this.name="",this.update=new _n,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function tT(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===h_?n=s:function J3(t){return Object.getPrototypeOf(t.constructor)===du}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function eT(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){af(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){xx.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&fl(r);xx.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function v_(t,e){return[...e.path,t]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(ie(Zr,9),ie(Tr,10),ie(ua,10),ie(Ms,10),ie(Gm,8),ie(ml,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[rn([r9]),St,ti]})}return t})(),Ox=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=xe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})(),Vx=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Yn({type:t});static#n=this.\u0275inj=vr({})}return t})(),b9=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Yn({type:t});static#n=this.\u0275inj=vr({imports:[Vx]})}return t})(),R9=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:ml,useValue:n.callSetDisabledState??y_}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Yn({type:t});static#n=this.\u0275inj=vr({imports:[b9]})}return t})();function cT(...t){const e=gi(t),n=xi(t),{args:r,keys:i}=WN(t);if(0===r.length)return I([],e);const s=new We(function M9(t,e,n=un){return r=>{eO(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)eO(e,()=>{const l=I(t[u],e);let h=!1;l.subscribe(ue(r,g=>{s[u]=g,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>GN(i,o):un));return n?s.pipe(qN(n)):s}function eO(t,e,n){t?xr(n,t,e):e()}const D_=q(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function lT(...t){return function N9(){return Or(1)}()(I(t,gi(t)))}function tO(t){return new We(e=>{ct(t()).subscribe(e)})}function cf(t,e){const n=T(t)?t:()=>t,r=i=>i.error(n());return new We(e?i=>e.schedule(r,0,i):r)}function dT(){return K((t,e)=>{let n=null;t._refCount++;const r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class nO extends We{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Q(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ft;const n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ft.EMPTY)}return e}refCount(){return dT()(this)}}function _l(t){return t<=0?()=>cn:K((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function C_(...t){const e=gi(t);return K((n,r)=>{(e?lT(t,n,e):lT(t,n)).subscribe(r)})}function us(t,e){return K((n,r)=>{let i=0;n.subscribe(ue(r,s=>t.call(e,s,i++)&&r.next(s)))})}function A_(t){return K((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function rO(t=x9){return K((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function x9(){return new D_}function la(t,e){const n=arguments.length>=2;return r=>r.pipe(t?us((i,s)=>t(i,s,r)):un,_l(1),n?A_(e):rO(()=>new D_))}function lf(t,e){return T(e)?Et(t,e,1):Et(t,1)}function dr(t,e,n){const r=T(t)||e||n?{next:t,error:e,complete:n}:t;return r?K((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ue(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):un}function fu(t){return K((e,n)=>{let s,r=null,i=!1;r=e.subscribe(ue(n,void 0,void 0,o=>{s=ct(t(o,fu(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function b_(t,e){return K(function O9(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ue(o,h=>{const g=l++;u=a?t(u,h,g):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}function hT(t){return t<=0?()=>cn:K((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function fT(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Ze="primary",df=Symbol("RouteTitle");class L9{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function yl(t){return new L9(t)}function U9(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ns(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!iO(t[i],e[i]))return!1;return!0}function iO(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function sO(t){return t.length>0?t[t.length-1]:null}function da(t){return function P9(t){return!!t&&(t instanceof We||T(t.lift)&&T(t.subscribe))}(t)?t:$h(t)?I(Promise.resolve(t)):A(t)}const $9={exact:function uO(t,e,n){if(!pu(t.segments,e.segments)||!S_(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!uO(t.children[r],e.children[r],n))return!1;return!0},subset:cO},oO={exact:function j9(t,e){return Ns(t,e)},subset:function H9(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>iO(t[n],e[n]))},ignored:()=>!0};function aO(t,e,n){return $9[n.paths](t.root,e.root,n.matrixParams)&&oO[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function cO(t,e,n){return lO(t,e,e.segments,n)}function lO(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!pu(i,n)||e.hasChildren()||!S_(i,n,r))}if(t.segments.length===n.length){if(!pu(t.segments,n)||!S_(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!cO(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(pu(t.segments,i)&&S_(t.segments,i,r)&&t.children[Ze])&&lO(t.children[Ze],e,s,r)}}function S_(t,e,n){return e.every((r,i)=>oO[n](t[i].parameters,r.parameters))}class vl{constructor(e=new Rt([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yl(this.queryParams)),this._queryParamMap}toString(){return q9.serialize(this)}}class Rt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return R_(this)}}class hf{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=yl(this.parameters)),this._parameterMap}toString(){return fO(this)}}function pu(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let ff=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return new pT},providedIn:"root"})}return t})();class pT{parse(e){const n=new r6(e);return new vl(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${pf(e.root,!0)}`,r=function K9(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${P_(n)}=${P_(i)}`).join("&"):`${P_(n)}=${P_(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function G9(t){return encodeURI(t)}(e.fragment)}`:""}`}}const q9=new pT;function R_(t){return t.segments.map(e=>fO(e)).join("/")}function pf(t,e){if(!t.hasChildren())return R_(t);if(e){const n=t.children[Ze]?pf(t.children[Ze],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Ze&&r.push(`${i}:${pf(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function W9(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ze&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ze&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Ze?[pf(t.children[Ze],!1)]:[`${i}:${pf(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ze]?`${R_(t)}/${n[0]}`:`${R_(t)}/(${n.join("//")})`}}function dO(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function P_(t){return dO(t).replace(/%3B/gi,";")}function gT(t){return dO(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function M_(t){return decodeURIComponent(t)}function hO(t){return M_(t.replace(/\+/g,"%20"))}function fO(t){return`${gT(t.path)}${function Z9(t){return Object.keys(t).map(e=>`;${gT(e)}=${gT(t[e])}`).join("")}(t.parameters)}`}const Q9=/^[^\/()?;#]+/;function mT(t){const e=t.match(Q9);return e?e[0]:""}const Y9=/^[^\/()?;=#]+/,X9=/^[^=?&#]+/,t6=/^[^&#]+/;class r6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rt([],{}):new Rt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ze]=new Rt(e,n)),r}parseSegment(){const e=mT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new hf(M_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function J9(t){const e=t.match(Y9);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=mT(this.remaining);i&&(r=i,this.capture(r))}e[M_(n)]=M_(r)}parseQueryParam(e){const n=function e6(t){const e=t.match(X9);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function n6(t){const e=t.match(t6);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=hO(n),s=hO(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=mT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new H(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ze);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[Ze]:new Rt([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}}function pO(t){return t.segments.length>0?new Rt([],{[Ze]:t}):t}function gO(t){const e={};for(const r of Object.keys(t.children)){const s=gO(t.children[r]);if(r===Ze&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function i6(t){if(1===t.numberOfChildren&&t.children[Ze]){const e=t.children[Ze];return new Rt(t.segments.concat(e.segments),e.children)}return t}(new Rt(t.segments,e))}function gu(t){return t instanceof vl}function mO(t){let e;const i=pO(function n(s){const o={};for(const u of s.children){const l=n(u);o[u.outlet]=l}const a=new Rt(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function _O(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return _T(i,i,i,n,r);const s=function o6(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new vO(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new vO(n,e,r)}(e);if(s.toRoot())return _T(i,i,new Rt([],{}),n,r);const o=function a6(t,e,n){if(t.isAbsolute)return new x_(e,!0,0);if(!n)return new x_(e,!1,NaN);if(null===n.parent)return new x_(n,!0,0);const r=N_(t.commands[0])?0:1;return function u6(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new x_(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?mf(o.segmentGroup,o.index,s.commands):IO(o.segmentGroup,o.index,s.commands);return _T(i,o.segmentGroup,a,n,r)}function N_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function gf(t){return"object"==typeof t&&null!=t&&t.outlets}function _T(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),o=t===e?n:yO(t,e,n);const a=pO(gO(o));return new vl(a,s,i)}function yO(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:yO(s,e,n)}),new Rt(t.segments,r)}class vO{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&N_(r[0]))throw new H(4003,!1);const i=r.find(gf);if(i&&i!==sO(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class x_{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function IO(t,e,n){if(t||(t=new Rt([],{})),0===t.segments.length&&t.hasChildren())return mf(t,e,n);const r=function l6(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(gf(a))break;const u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!wO(u,l,o))return s;r+=2}else{if(!wO(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Rt(t.segments.slice(0,r.pathIndex),{});return s.children[Ze]=new Rt(t.segments.slice(r.pathIndex),t.children),mf(s,0,i)}return r.match&&0===i.length?new Rt(t.segments,{}):r.match&&!t.hasChildren()?yT(t,e,n):r.match?mf(t,0,i):yT(t,e,n)}function mf(t,e,n){if(0===n.length)return new Rt(t.segments,{});{const r=function c6(t){return gf(t[0])?t[0].outlets:{[Ze]:t}}(n),i={};if(Object.keys(r).some(s=>s!==Ze)&&t.children[Ze]&&1===t.numberOfChildren&&0===t.children[Ze].segments.length){const s=mf(t.children[Ze],e,n);return new Rt(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=IO(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Rt(t.segments,i)}}function yT(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(gf(s)){const u=d6(s.outlets);return new Rt(r,u)}if(0===i&&N_(n[0])){r.push(new hf(t.segments[e].path,EO(n[0]))),i++;continue}const o=gf(s)?s.outlets[Ze]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&N_(a)?(r.push(new hf(o,EO(a))),i+=2):(r.push(new hf(o,{})),i++)}return new Rt(r,{})}function d6(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=yT(new Rt([],{}),0,r))}),e}function EO(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function wO(t,e,n){return t==n.path&&Ns(e,n.parameters)}const _f="imperative";class xs{constructor(e,n){this.id=e,this.url=n}}class O_ extends xs{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ha extends xs{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yf extends xs{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Il extends xs{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class k_ extends xs{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class TO extends xs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h6 extends xs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class f6 extends xs{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class p6 extends xs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class g6 extends xs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class m6{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _6{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class y6{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v6{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class I6{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class E6{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DO{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class vT{}class IT{constructor(e){this.url=e}}class w6{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new vf,this.attachRef=null}}let vf=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new w6,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class CO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=ET(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=ET(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=wT(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wT(e,this._root).map(n=>n.value)}}function ET(t,e){if(t===e.value)return e;for(const n of e.children){const r=ET(t,n);if(r)return r}return null}function wT(t,e){if(t===e.value)return[e];for(const n of e.children){const r=wT(t,n);if(r.length)return r.unshift(e),r}return[]}class vo{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function El(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class AO extends CO{constructor(e,n){super(e),this.snapshot=n,TT(this,e)}toString(){return this.snapshot.toString()}}function bO(t,e){const n=function T6(t,e){const o=new V_([],{},{},"",{},Ze,e,null,{});return new RO("",new vo(o,[]))}(0,e),r=new v([new hf("",{})]),i=new v({}),s=new v({}),o=new v({}),a=new v(""),u=new wl(r,i,o,a,s,Ze,e,n.root);return u.snapshot=n.root,new AO(new vo(u,[]),n)}class wl{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ge(l=>l[df]))??A(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ge(e=>yl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ge(e=>yl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function SO(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function D6(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class V_{get title(){return this.data?.[df]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class RO extends CO{constructor(e,n){super(n),this.url=e,TT(this,n)}toString(){return PO(this._root)}}function TT(t,e){e.value._routerState=t,e.children.forEach(n=>TT(t,n))}function PO(t){const e=t.children.length>0?` { ${t.children.map(PO).join(", ")} } `:"";return`${t.value}${e}`}function DT(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ns(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ns(e.params,n.params)||t.paramsSubject.next(n.params),function B9(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ns(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Ns(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function CT(t,e){const n=Ns(t.params,e.params)&&function z9(t,e){return pu(t,e)&&t.every((n,r)=>Ns(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||CT(t.parent,e.parent))}let AT=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ze,this.activateEvents=new _n,this.deactivateEvents=new _n,this.attachEvents=new _n,this.detachEvents=new _n,this.parentContexts=Ie(vf),this.location=Ie(ss),this.changeDetector=Ie(Gm),this.environmentInjector=Ie(Hi),this.inputBinder=Ie(F_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new C6(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=xe({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ti]})}return t})();class C6{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===wl?this.route:e===vf?this.childContexts:this.parent.get(e,n)}}const F_=new ce("");let MO=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=cT([r.queryParams,r.params,r.data]).pipe(ve(([s,o,a],u)=>(a={...s,...o,...a},0===u?A(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function eq(t){const e=rt(t);if(!e)return null;const n=new Vh(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();function If(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function b6(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return If(t,r,i);return If(t,r)})}(t,e,n);return new vo(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>If(t,a)),o}}const r=function S6(t){return new wl(new v(t.url),new v(t.params),new v(t.queryParams),new v(t.fragment),new v(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>If(t,s));return new vo(r,i)}}const bT="ngNavigationCancelingError";function NO(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=gu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=xO(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function xO(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[bT]=!0,r.cancellationCode=e,n&&(r.url=n),r}function OO(t){return t&&t[bT]}let kO=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Lo({type:t,selectors:[["ng-component"]],standalone:!0,features:[bP],decls:1,vars:0,template:function(r,i){1&r&&Ss(0,"router-outlet")},dependencies:[AT],encapsulation:2})}return t})();function ST(t){const e=t.children&&t.children.map(ST),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ze&&(n.component=kO),n}function cs(t){return t.outlet||Ze}function Ef(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class V6{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),DT(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=El(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=El(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=El(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=El(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new E6(s.value.snapshot))}),e.children.length&&this.forwardEvent(new v6(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(DT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),DT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Ef(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class VO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class L_{constructor(e,n){this.component=e,this.route=n}}function F6(t,e,n){const r=t._root;return wf(r,e?e._root:null,n,[r.value])}function Tl(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function qp(t){return null!==ju(t)}(t)?e.get(t):t:r}function wf(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=El(e);return t.children.forEach(o=>{(function U6(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function B6(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!pu(t.url,e.url);case"pathParamsOrQueryParamsChange":return!pu(t.url,e.url)||!Ns(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!CT(t,e)||!Ns(t.queryParams,e.queryParams);default:return!CT(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new VO(r)):(s.data=o.data,s._resolvedData=o._resolvedData),wf(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new L_(a.outlet.component,o))}else o&&Tf(e,a,i),i.canActivateChecks.push(new VO(r)),wf(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Tf(a,n.getContext(o),i)),i}function Tf(t,e,n){const r=El(t),i=t.value;Object.entries(r).forEach(([s,o])=>{Tf(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new L_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Df(t){return"function"==typeof t}function FO(t){return t instanceof D_||"EmptyError"===t?.name}const U_=Symbol("INITIAL_VALUE");function Dl(){return ve(t=>cT(t.map(e=>e.pipe(_l(1),C_(U_)))).pipe(ge(e=>{for(const n of e)if(!0!==n){if(n===U_)return U_;if(!1===n||n instanceof vl)return n}return!0}),us(e=>e!==U_),_l(1)))}function LO(t){return function li(...t){return di(t)}(dr(e=>{if(gu(e))throw NO(0,e)}),ge(e=>!0===e))}class B_{constructor(e){this.segmentGroup=e||null}}class UO{constructor(e){this.urlTree=e}}function Cl(t){return cf(new B_(t))}function BO(t){return cf(new UO(t))}class o5{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new H(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return A(r);if(i.numberOfChildren>1||!i.children[Ze])return cf(new H(4e3,!1));i=i.children[Ze]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new vl(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Rt(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const RT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function a5(t,e,n,r,i){const s=PT(t,e,n);return s.matched?(r=function P6(t,e){return t.providers&&!t._injector&&(t._injector=BE(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function r5(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?A(i.map(o=>{const a=Tl(o,t);return da(function q6(t){return t&&Df(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Dl(),LO()):A(!0)}(r,e,n).pipe(ge(o=>!0===o?s:{...RT}))):A(s)}function PT(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...RT}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||U9)(n,t,e);if(!i)return{...RT};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function $O(t,e,n,r){return n.length>0&&function l5(t,e,n){return n.some(r=>$_(t,e,r)&&cs(r)!==Ze)}(t,n,r)?{segmentGroup:new Rt(e,c5(r,new Rt(n,t.children))),slicedSegments:[]}:0===n.length&&function d5(t,e,n){return n.some(r=>$_(t,e,r))}(t,n,r)?{segmentGroup:new Rt(t.segments,u5(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Rt(t.segments,t.children),slicedSegments:n}}function u5(t,e,n,r,i){const s={};for(const o of r)if($_(t,n,o)&&!i[cs(o)]){const a=new Rt([],{});s[cs(o)]=a}return{...i,...s}}function c5(t,e){const n={};n[Ze]=e;for(const r of t)if(""===r.path&&cs(r)!==Ze){const i=new Rt([],{});n[cs(r)]=i}return n}function $_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class g5{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new o5(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,!1)}recognize(){const e=$O(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ze).pipe(fu(n=>{if(n instanceof UO)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof B_?this.noMatchError(n):n}),ge(n=>{const r=new V_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ze,this.rootComponentType,null,{}),i=new vo(r,n),s=new RO("",i),o=function s6(t,e,n=null,r=null){return _O(mO(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ze).pipe(fu(r=>{throw r instanceof B_?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=SO(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return I(i).pipe(lf(s=>{const o=r.children[s],a=function O6(t,e){const n=t.filter(r=>cs(r)===e);return n.push(...t.filter(r=>cs(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),b_((s,o)=>(s.push(...o),s)),A_(null),function k9(t,e){const n=arguments.length>=2;return r=>r.pipe(t?us((i,s)=>t(i,s,r)):un,hT(1),n?A_(e):rO(()=>new D_))}(),Et(s=>{if(null===s)return Cl(r);const o=jO(s);return function m5(t){t.sort((e,n)=>e.value.outlet===Ze?-1:n.value.outlet===Ze?1:e.value.outlet.localeCompare(n.value.outlet))}(o),A(o)}))}processSegment(e,n,r,i,s,o){return I(n).pipe(lf(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(fu(u=>{if(u instanceof B_)return A(null);throw u}))),la(a=>!!a),fu(a=>{if(FO(a))return function f5(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?A([]):Cl(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function h5(t,e,n,r){return!!(cs(t)===r||r!==Ze&&$_(e,n,t))&&("**"===t.path||PT(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Cl(i):Cl(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?BO(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Et(o=>{const a=new Rt(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:h}=PT(n,i,s);if(!a)return Cl(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h);return i.redirectTo.startsWith("/")?BO(g):this.applyRedirects.lineralizeSegments(i,g).pipe(Et(m=>this.processSegment(e,r,n,m.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?sO(i).parameters:{};a=A({snapshot:new V_(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,HO(r),cs(r),r.component??r._loadedComponent??null,r,zO(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=a5(n,r,i,e).pipe(ge(({matched:u,consumedSegments:l,remainingSegments:h,parameters:g})=>u?{snapshot:new V_(l,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,HO(r),cs(r),r.component??r._loadedComponent??null,r,zO(r)),consumedSegments:l,remainingSegments:h}:null));return a.pipe(ve(u=>null===u?Cl(n):this.getChildConfig(e=r._injector??e,r,i).pipe(ve(({routes:l})=>{const h=r._loadedInjector??e,{snapshot:g,consumedSegments:m,remainingSegments:y}=u,{segmentGroup:D,slicedSegments:b}=$O(n,m,y,l);if(0===b.length&&D.hasChildren())return this.processChildren(h,l,D).pipe(ge(U=>null===U?null:[new vo(g,U)]));if(0===l.length&&0===b.length)return A([new vo(g,[])]);const M=cs(r)===s;return this.processSegment(h,l,D,b,M?Ze:s,!0).pipe(ge(U=>[new vo(g,U)]))}))))}getChildConfig(e,n,r){return n.children?A({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?A({routes:n._loadedRoutes,injector:n._loadedInjector}):function n5(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?A(!0):A(i.map(o=>{const a=Tl(o,t);return da(function j6(t){return t&&Df(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Dl(),LO())}(e,n,r).pipe(Et(i=>i?this.configLoader.loadChildren(e,n).pipe(dr(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function s5(t){return cf(xO(!1,3))}())):A({routes:[],injector:e})}}function _5(t){const e=t.value.routeConfig;return e&&""===e.path}function jO(t){const e=[],n=new Set;for(const r of t){if(!_5(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=jO(r.children);e.push(new vo(r.value,i))}return e.filter(r=>!n.has(r))}function HO(t){return t.data||{}}function zO(t){return t.resolve||{}}function WO(t){return"string"==typeof t.title||null===t.title}function MT(t){return ve(e=>{const n=t(e);return n?I(n).pipe(ge(()=>e)):A(e)})}const Al=new ce("ROUTES");let NT=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ie(wM)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return A(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=da(n.loadComponent()).pipe(ge(qO),dr(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),fT(()=>{this.componentLoaders.delete(n)})),i=new nO(r,()=>new j).pipe(dT());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return A({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function D5(t,e,n,r){return da(t.loadChildren()).pipe(ge(qO),Et(i=>i instanceof CP||Array.isArray(i)?A(i):I(e.compileModuleAsync(i))),ge(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Al,[],{optional:!0,self:!0}).flat()),{routes:o.map(ST),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(fT(()=>{this.childrenLoaders.delete(r)})),o=new nO(s,()=>new j).pipe(dT());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qO(t){return function C5(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let j_=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new j,this.transitionAbortSubject=new j,this.configLoader=Ie(NT),this.environmentInjector=Ie(Hi),this.urlSerializer=Ie(ff),this.rootContexts=Ie(vf),this.inputBindingEnabled=null!==Ie(F_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>A(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new _6(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new m6(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new v({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:_f,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(us(s=>0!==s.id),ge(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),ve(s=>{this.currentTransition=s;let o=!1,a=!1;return A(s).pipe(dr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ve(u=>{const l=u.currentBrowserUrl.toString(),h=!n.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!h&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const m="";return this.events.next(new Il(u.id,this.urlSerializer.serialize(u.rawUrl),m,0)),u.resolve(null),cn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return A(u).pipe(ve(m=>{const y=this.transitions?.getValue();return this.events.next(new O_(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?cn:Promise.resolve(m)}),function y5(t,e,n,r,i,s){return Et(o=>function p5(t,e,n,r,i,s,o="emptyOnly"){return new g5(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(ge(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),dr(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new TO(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(h&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:m,extractedUrl:y,source:D,restoredState:b,extras:M}=u,U=new O_(m,this.urlSerializer.serialize(y),D,b);this.events.next(U);const N=bO(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:N,urlAfterRedirects:y,extras:{...M,skipLocationChange:!1,replaceUrl:!1}},A(s)}{const m="";return this.events.next(new Il(u.id,this.urlSerializer.serialize(u.extractedUrl),m,1)),u.resolve(null),cn}}),dr(u=>{const l=new h6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ge(u=>(this.currentTransition=s={...u,guards:F6(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function Z6(t,e){return Et(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?A({...n,guardsResult:!0}):function K6(t,e,n,r){return I(t).pipe(Et(i=>function t5(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?A(s.map(a=>{const u=Ef(e)??i,l=Tl(a,u);return da(function W6(t){return t&&Df(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):u.runInContext(()=>l(t,e,n,r))).pipe(la())})).pipe(Dl()):A(!0)}(i.component,i.route,n,e,r)),la(i=>!0!==i,!0))}(o,r,i,t).pipe(Et(a=>a&&function $6(t){return"boolean"==typeof t}(a)?function Q6(t,e,n,r){return I(e).pipe(lf(i=>lT(function J6(t,e){return null!==t&&e&&e(new y6(t)),A(!0)}(i.route.parent,r),function Y6(t,e){return null!==t&&e&&e(new I6(t)),A(!0)}(i.route,r),function e5(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function L6(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>tO(()=>A(o.guards.map(u=>{const l=Ef(o.node)??n,h=Tl(u,l);return da(function z6(t){return t&&Df(t.canActivateChild)}(h)?h.canActivateChild(r,t):l.runInContext(()=>h(r,t))).pipe(la())})).pipe(Dl())));return A(s).pipe(Dl())}(t,i.path,n),function X6(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return A(!0);const i=r.map(s=>tO(()=>{const o=Ef(e)??n,a=Tl(s,o);return da(function H6(t){return t&&Df(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(la())}));return A(i).pipe(Dl())}(t,i.route,n))),la(i=>!0!==i,!0))}(r,s,t,e):A(a)),ge(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),dr(u=>{if(s.guardsResult=u.guardsResult,gu(u.guardsResult))throw NO(0,u.guardsResult);const l=new f6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),us(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),MT(u=>{if(u.guards.canActivateChecks.length)return A(u).pipe(dr(l=>{const h=new p6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ve(l=>{let h=!1;return A(l).pipe(function v5(t,e){return Et(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return A(n);let s=0;return I(i).pipe(lf(o=>function I5(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!WO(i)&&(s[df]=i.title),function E5(t,e,n,r){const i=function w5(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return A({});const s={};return I(i).pipe(Et(o=>function T5(t,e,n,r){const i=Ef(e)??r,s=Tl(t,i);return da(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(la(),dr(a=>{s[o]=a}))),hT(1),function V9(t){return ge(()=>t)}(s),fu(o=>FO(o)?cn:cf(o)))}(s,t,e,r).pipe(ge(o=>(t._resolvedData=o,t.data=SO(t,n).resolve,i&&WO(i)&&(t.data[df]=i.title),null)))}(o.route,r,t,e)),dr(()=>s++),hT(1),Et(o=>s===i.length?A(n):cn))})}(n.paramsInheritanceStrategy,this.environmentInjector),dr({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",2)}}))}),dr(l=>{const h=new g6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),MT(u=>{const l=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(dr(m=>{h.component=m}),ge(()=>{})));for(const m of h.children)g.push(...l(m));return g};return cT(l(u.targetSnapshot.root)).pipe(A_(),_l(1))}),MT(()=>this.afterPreactivation()),ge(u=>{const l=function A6(t,e,n){const r=If(t,e._root,n?n._root:void 0);return new AO(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:l},s}),dr(()=>{this.events.next(new vT)}),((t,e,n,r)=>ge(i=>(new V6(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),_l(1),dr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ha(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function F9(t){return K((e,n)=>{ct(t).subscribe(ue(n,()=>n.complete(),Te)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(dr(u=>{throw u}))),fT(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),fu(u=>{if(a=!0,OO(u))this.events.next(new yf(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function R6(t){return OO(t)&&gu(t.url)}(u)?this.events.next(new IT(u.url)):s.resolve(!1);else{this.events.next(new k_(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(l){s.reject(l)}}return cn}))}))}cancelNavigationTransition(n,r,i){const s=new yf(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function GO(t){return t!==_f}let ZO=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ze);return r}getResolvedTitleForRoute(n){return n.data[df]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return Ie(A5)},providedIn:"root"})}return t})(),A5=(()=>{class t extends ZO{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(oe($N))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),b5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return Ie(R5)},providedIn:"root"})}return t})();class S5{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let R5=(()=>{class t extends S5{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Rn(t)))(i||t)}}();static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const H_=new ce("",{providedIn:"root",factory:()=>({})});let P5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return Ie(M5)},providedIn:"root"})}return t})(),M5=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Cf=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Cf||{});function KO(t,e){t.events.pipe(us(n=>n instanceof ha||n instanceof yf||n instanceof k_||n instanceof Il),ge(n=>n instanceof ha||n instanceof Il?Cf.COMPLETE:n instanceof yf&&(0===n.code||1===n.code)?Cf.REDIRECTING:Cf.FAILED),us(n=>n!==Cf.REDIRECTING),_l(1)).subscribe(()=>{e()})}function N5(t){throw t}function x5(t,e,n){return e.parse("/")}const O5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},k5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let oi=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ie(IM),this.isNgZoneEnabled=!1,this._events=new j,this.options=Ie(H_,{optional:!0})||{},this.pendingTasks=Ie(EM),this.errorHandler=this.options.errorHandler||N5,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||x5,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ie(P5),this.routeReuseStrategy=Ie(b5),this.titleStrategy=Ie(ZO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ie(Al,{optional:!0})?.flat()??[],this.navigationTransitions=Ie(j_),this.urlSerializer=Ie(ff),this.location=Ie(yw),this.componentInputBindingEnabled=!!Ie(F_,{optional:!0}),this.eventsSubscription=new ft,this.isNgZoneEnabled=Ie(vt)instanceof vt&&vt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new vl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=bO(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(QO(r)&&this._events.next(r));if(r instanceof O_)GO(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Il)this.rawUrlTree=i.rawUrl;else if(r instanceof TO){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof vT)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof yf)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof IT){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||GO(i.source)};this.scheduleNavigation(s,_f,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof k_&&this.restoreHistory(i,!0),r instanceof ha&&(this.navigated=!0),QO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),_f,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(ST),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{g=mO(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return _O(g,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=gu(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,_f,null,r)}navigate(n,r={skipLocationChange:!1}){return function V5(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new H(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...O5}:!1===r?{...k5}:r,gu(n))return aO(this.currentUrlTree,n,i);const s=this.parseUrl(n);return aO(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((g,m)=>{a=g,u=m});const h=this.pendingTasks.add();return KO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function QO(t){return!(t instanceof vT||t instanceof IT)}let Af=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new j,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof ha&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function Tb(t,e,n){return function pB(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?wb:Eb}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(ie(oi),ie(wl),function Wg(t){return function Re(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(Ju(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(jn(),t)}("tabindex"),ie(uo),ie(Ii),ie(lu))};static#t=this.\u0275dir=xe({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&zn("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&bs("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",fl],skipLocationChange:["skipLocationChange","skipLocationChange",fl],replaceUrl:["replaceUrl","replaceUrl",fl],routerLink:"routerLink"},standalone:!0,features:[LS,ti]})}return t})();class YO{}let U5=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(us(n=>n instanceof ha),lf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=BE(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return I(i).pipe(Or())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):A(null);const s=i.pipe(Et(o=>null===o?A(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?I([s,this.loader.loadComponent(r)]).pipe(Or()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(oe(oi),oe(wM),oe(Hi),oe(YO),oe(NT))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const xT=new ce("");let JO=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof O_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ha?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Il&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof DO&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new DO(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function dS(){throw new Error("invalid")}()};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();function Io(t,e){return{\u0275kind:t,\u0275providers:e}}function e1(){const t=Ie(Hr);return e=>{const n=t.get(hl);if(e!==n.components[0])return;const r=t.get(oi),i=t.get(t1);1===t.get(OT)&&r.initialNavigation(),t.get(n1,null,Ye.Optional)?.setUpPreloading(),t.get(xT,null,Ye.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const t1=new ce("",{factory:()=>new j}),OT=new ce("",{providedIn:"root",factory:()=>1}),n1=new ce("");function H5(t){return Io(0,[{provide:n1,useExisting:U5},{provide:YO,useExisting:t}])}const r1=new ce("ROUTER_FORROOT_GUARD"),W5=[yw,{provide:ff,useClass:pT},oi,vf,{provide:wl,useFactory:function XO(t){return t.routerState.root},deps:[oi]},NT,[]];function q5(){return new RM("Router",oi)}let i1=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[W5,[],{provide:Al,multi:!0,useValue:n},{provide:r1,useFactory:Q5,deps:[[oi,new vi,new Zg]]},{provide:H_,useValue:r||{}},r?.useHash?{provide:lu,useClass:sq}:{provide:lu,useClass:oN},{provide:xT,useFactory:()=>{const t=Ie(CG),e=Ie(vt),n=Ie(H_),r=Ie(j_),i=Ie(ff);return n.scrollOffset&&t.setOffset(n.scrollOffset),new JO(i,r,t,e,n)}},r?.preloadingStrategy?H5(r.preloadingStrategy).\u0275providers:[],{provide:RM,multi:!0,useFactory:q5},r?.initialNavigation?Y5(r):[],r?.bindToComponentInputs?Io(8,[MO,{provide:F_,useExisting:MO}]).\u0275providers:[],[{provide:s1,useFactory:e1},{provide:uw,multi:!0,useExisting:s1}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Al,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(oe(r1,8))};static#t=this.\u0275mod=Yn({type:t});static#n=this.\u0275inj=vr({})}return t})();function Q5(t){return"guarded"}function Y5(t){return["disabled"===t.initialNavigation?Io(3,[{provide:ew,multi:!0,useFactory:()=>{const e=Ie(oi);return()=>{e.setUpLocationChangeListener()}}},{provide:OT,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Io(2,[{provide:OT,useValue:0},{provide:ew,multi:!0,deps:[Hr],useFactory:e=>{const n=e.get(rq,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(oi),s=e.get(t1);KO(i,()=>{r(!0)}),e.get(j_).afterPreactivation=()=>(r(!0),s.closed?A(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const s1=new ce("");class o1{}var Kr=Me(534);(0,Kr.registerVersion)("firebase","10.6.0","app");class t8 extends ft{constructor(e,n){super()}schedule(e,n=0){return this}}const z_={setInterval(t,e,...n){const{delegate:r}=z_;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=z_;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class a1 extends t8{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return z_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&z_.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,De(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const kT={now:()=>(kT.delegate||Date).now(),delegate:void 0};class bf{constructor(e,n=bf.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}bf.now=kT.now;class u1 extends bf{constructor(e,n=bf.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const i8=new class r8 extends u1{}(class n8 extends a1{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),c1=new u1(a1),VT=new Zc("ANGULARFIRE2_VERSION");const FT=(t,e)=>{const n=e?[e]:(0,Kr.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class LT{constructor(){return FT(s8)}}const s8="app-check";function bl(){}class d1{zone;delegate;constructor(e,n=i8){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class o8{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bl,{},bl,bl)),n.pipe(dr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let W_=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new d1(Zone.current)),this.insideAngular=n.run(()=>new d1(Zone.current,c1)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(oe(vt))};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Sl(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function mu(t){return Sl().ngZone.run(()=>t())}function Ti(t){return function u8(t){return function(n){return(n=n.lift(new o8(t.ngZone))).pipe(Kn(t.outsideAngular),gn(t.insideAngular))}}(Sl())(t)}const c8=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),mu(()=>t.apply(void 0,r))},h1=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||=mu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bl,{},bl,bl))),r[s]=c8(r[s],n));const i=function a8(t){return Sl().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof We){const s=Sl();return i.pipe(Kn(s.outsideAngular),gn(s.insideAngular))}return mu(()=>i)}return i instanceof We?i.pipe(Ti):i instanceof Promise?mu(()=>new Promise((s,o)=>i.then(a=>mu(()=>s(a)),a=>mu(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:mu(()=>i)};var q_=Me(106);q_.Z.registerVersion("firebase","10.6.0","app-compat");const h8=["ngOnDestroy"];class f1{constructor(e){return e}}const G_=new ce("angularfire2.app.options"),UT=new ce("angularfire2.app.name");function BT(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=q_.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>q_.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;g8("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new f1(o)}const g8=(t,...e)=>{};function p1(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function m8(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(g1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${_8?" You may need to reload as Firebase is not HMR aware.":""}`),g1("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const _8=typeof module<"u"&&!!module.hot,g1=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Me(365);class y8 extends j{constructor(e=1/0,n=1/0,r=kT){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function m1(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,W({connector:()=>new y8(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function _1(t,e){return T(e)?ve(()=>t,e):ve(()=>t)}const y1=new ce("angularfire2.auth.use-emulator"),v1=new ce("angularfire2.auth.settings"),I1=new ce("angularfire2.auth.tenant-id"),E1=new ce("angularfire2.auth.langugage-code"),w1=new ce("angularfire2.auth.use-device-language"),T1=new ce("angularfire.auth.persistence"),D1=(t,e,n,r,i,s,o,a)=>p1(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[l,h]of Object.entries(o))u.settings[l]=h;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let C1=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,l,h,g,m,y){const D=new j,b=A(void 0).pipe(gn(o.outsideAngular),ve(()=>s.runOutsideAngular(()=>Promise.resolve().then(Me.bind(Me,365)))),ge(()=>BT(n,s,r)),ge(M=>D1(M,s,a,l,h,g,u,m)),m1({bufferSize:1,refCount:!1}));if(u_(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=A(null);else{b.pipe(la()).subscribe();const M=b.pipe(ve(z=>z.getRedirectResult().then(se=>se,()=>null)),Ti,m1({bufferSize:1,refCount:!1})),U=b.pipe(ve(z=>new We(se=>({unsubscribe:s.runOutsideAngular(()=>z.onAuthStateChanged(de=>se.next(de),de=>se.error(de),()=>se.complete()))})))),N=b.pipe(ve(z=>new We(se=>({unsubscribe:s.runOutsideAngular(()=>z.onIdTokenChanged(de=>se.next(de),de=>se.error(de),()=>se.complete()))}))));this.authState=M.pipe(_1(U),Kn(o.outsideAngular),gn(o.insideAngular)),this.user=M.pipe(_1(N),Kn(o.outsideAngular),gn(o.insideAngular)),this.idToken=this.user.pipe(ve(z=>z?I(z.getIdToken()):A(null))),this.idTokenResult=this.user.pipe(ve(z=>z?I(z.getIdTokenResult()):A(null))),this.credential=w(M,D,this.authState.pipe(us(z=>!z))).pipe(ge(z=>z?.user?z:null),Kn(o.outsideAngular),gn(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(h8.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>n.run(()=>l)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,l)=>o.then(h=>{const g=h?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,g),g})})})}))(this,b,s,{spy:{apply:(M,U,N)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&N.then(z=>D.next(z))}}})}static \u0275fac=function(r){return new(r||t)(oe(G_),oe(UT,8),oe(ao),oe(vt),oe(W_),oe(y1,8),oe(v1,8),oe(I1,8),oe(E1,8),oe(w1,8),oe(T1,8),oe(LT,8))};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function $T(){return K((t,e)=>{let n,r=!1;t.subscribe(ue(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}var pe,G=Me(861),A1=Me(537),Os=Me(879),Ot=Me(58),I8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ls={},jT=jT||{},He=I8||self;function Z_(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Sf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var HT="closure_uid_"+(1e9*Math.random()>>>0),w8=0;function T8(t,e,n){return t.call.apply(t.bind,arguments)}function D8(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Dr(t,e,n){return(Dr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?T8:D8).apply(null,arguments)}function K_(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function nr(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function fa(){this.s=this.s,this.o=this.o}fa.prototype.s=!1,fa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function E8(t){Object.prototype.hasOwnProperty.call(t,HT)&&t[HT]||(t[HT]=++w8)}(this)},fa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const b1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function zT(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function S1(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Z_(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Cr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Cr.prototype.h=function(){this.defaultPrevented=!0};var A8=function(){if(!He.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{He.addEventListener("test",()=>{},e),He.removeEventListener("test",()=>{},e)}catch{}return t}();function Rf(t){return/^[\s\xa0]*$/.test(t)}function Q_(){var t=He.navigator;return t&&(t=t.userAgent)?t:""}function ks(t){return-1!=Q_().indexOf(t)}function WT(t){return WT[" "](t),t}WT[" "]=function(){};var GT,t,S8=ks("Opera"),Rl=ks("Trident")||ks("MSIE"),R1=ks("Edge"),qT=R1||Rl,P1=ks("Gecko")&&!(-1!=Q_().toLowerCase().indexOf("webkit")&&!ks("Edge"))&&!(ks("Trident")||ks("MSIE"))&&!ks("Edge"),R8=-1!=Q_().toLowerCase().indexOf("webkit")&&!ks("Edge");function M1(){var t=He.document;return t?t.documentMode:void 0}e:{var ZT="",KT=(t=Q_(),P1?/rv:([^\);]+)(\)|;)/.exec(t):R1?/Edge\/([\d\.]+)/.exec(t):Rl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):R8?/WebKit\/(\S+)/.exec(t):S8?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(KT&&(ZT=KT?KT[1]:""),Rl){var QT=M1();if(null!=QT&&QT>parseFloat(ZT)){GT=String(QT);break e}}GT=ZT}var P8=He.document&&Rl&&(M1()||parseInt(GT,10))||void 0;function Pf(t,e){if(Cr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(P1){e:{try{WT(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:M8[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Pf.$.h.call(this)}}nr(Pf,Cr);var M8={2:"touch",3:"pen",4:"mouse"};Pf.prototype.h=function(){Pf.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Mf="closure_listenable_"+(1e6*Math.random()|0),N8=0;function x8(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++N8,this.fa=this.ia=!1}function Y_(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function JT(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function x1(t){const e={};for(const n in t)e[n]=t[n];return e}const O1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k1(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<O1.length;s++)n=O1[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function J_(t){this.src=t,this.g={},this.h=0}function XT(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=b1(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Y_(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function eD(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}J_.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=eD(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new x8(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var tD="closure_lm_"+(1e6*Math.random()|0),nD={};function V1(t,e,n,r,i){if(r&&r.once)return L1(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)V1(t,e[s],n,r,i);return null}return n=oD(n),t&&t[Mf]?t.O(e,n,Sf(r)?!!r.capture:!!r,i):F1(t,e,n,!1,r,i)}function F1(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Sf(i)?!!i.capture:!!i,a=iD(t);if(a||(t[tD]=a=new J_(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function k8(){const e=V8;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)A8||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(B1(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function L1(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)L1(t,e[s],n,r,i);return null}return n=oD(n),t&&t[Mf]?t.P(e,n,Sf(r)?!!r.capture:!!r,i):F1(t,e,n,!0,r,i)}function U1(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)U1(t,e[s],n,r,i);else r=Sf(r)?!!r.capture:!!r,n=oD(n),t&&t[Mf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=eD(s=t.g[e],n,r,i))&&(Y_(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=iD(t))&&(e=t.g[e.toString()],t=-1,e&&(t=eD(e,n,r,i)),(n=-1<t?e[t]:null)&&rD(n))}function rD(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Mf])XT(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(B1(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=iD(e))?(XT(n,t),0==n.h&&(n.src=null,e[tD]=null)):Y_(t)}}}function B1(t){return t in nD?nD[t]:nD[t]="on"+t}function V8(t,e){if(t.fa)t=!0;else{e=new Pf(e,this);var n=t.listener,r=t.la||t.src;t.ia&&rD(t),t=n.call(r,e)}return t}function iD(t){return(t=t[tD])instanceof J_?t:null}var sD="__closure_events_fn_"+(1e9*Math.random()>>>0);function oD(t){return"function"==typeof t?t:(t[sD]||(t[sD]=function(e){return t.handleEvent(e)}),t[sD])}function rr(){fa.call(this),this.i=new J_(this),this.S=this,this.J=null}function hr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Cr(e,t);else if(e instanceof Cr)e.target=e.target||t;else{var i=e;k1(e=new Cr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=X_(o,r,!0,e)&&i}if(i=X_(o=e.g=t,r,!0,e)&&i,i=X_(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=X_(o=e.g=n[s],r,!1,e)&&i}function X_(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&XT(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}nr(rr,fa),rr.prototype[Mf]=!0,rr.prototype.removeEventListener=function(t,e,n,r){U1(this,t,e,n,r)},rr.prototype.N=function(){if(rr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Y_(n[r]);delete t.g[e],t.h--}}this.J=null},rr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},rr.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var aD=He.JSON.stringify;function L8(){var t=uD;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var $1=new class F8{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new B8,t=>t.reset());class B8{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function $8(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function j8(t){He.setTimeout(()=>{throw t},0)}let Nf,xf=!1,uD=new class U8{constructor(){this.h=this.g=null}add(e,n){const r=$1.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},j1=()=>{const t=He.Promise.resolve(void 0);Nf=()=>{t.then(H8)}};var H8=()=>{for(var t;t=L8();){try{t.h.call(t.g)}catch(n){j8(n)}var e=$1;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}xf=!1};function ey(t,e){rr.call(this),this.h=t||1,this.g=e||He,this.j=Dr(this.qb,this),this.l=Date.now()}function cD(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function lD(t,e,n){if("function"==typeof t)n&&(t=Dr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Dr(t.handleEvent,t)}return 2147483647<Number(e)?-1:He.setTimeout(t,e||0)}function H1(t){t.g=lD(()=>{t.g=null,t.i&&(t.i=!1,H1(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}nr(ey,rr),(pe=ey.prototype).ga=!1,pe.T=null,pe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hr(this,"tick"),this.ga&&(cD(this),this.start()))}},pe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pe.N=function(){ey.$.N.call(this),cD(this),delete this.g};class z8 extends fa{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:H1(this)}N(){super.N(),this.g&&(He.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Of(t){fa.call(this),this.h=t,this.g={}}nr(Of,fa);var z1=[];function W1(t,e,n,r){Array.isArray(n)||(n&&(z1[0]=n.toString()),n=z1);for(var i=0;i<n.length;i++){var s=V1(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function q1(t){JT(t.g,function(e,n){this.g.hasOwnProperty(n)&&rD(e)},t),t.g={}}function ty(){this.g=!0}function Pl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Z8(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return aD(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Of.prototype.N=function(){Of.$.N.call(this),q1(this)},Of.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ty.prototype.Ea=function(){this.g=!1},ty.prototype.info=function(){};var _u={},G1=null;function ny(){return G1=G1||new rr}function Z1(t){Cr.call(this,_u.Ta,t)}function kf(t){const e=ny();hr(e,new Z1(e))}function K1(t,e){Cr.call(this,_u.STAT_EVENT,t),this.stat=e}function Qr(t){const e=ny();hr(e,new K1(e,t))}function Q1(t,e){Cr.call(this,_u.Ua,t),this.size=e}function Vf(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return He.setTimeout(function(){t()},e)}_u.Ta="serverreachability",nr(Z1,Cr),_u.STAT_EVENT="statevent",nr(K1,Cr),_u.Ua="timingevent",nr(Q1,Cr);var ry={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Y1={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function dD(){}function X1(){}dD.prototype.h=null;var pD,Ff={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function hD(){Cr.call(this,"d")}function fD(){Cr.call(this,"c")}function iy(){}function Lf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Of(this),this.P=K8,this.V=new ey(t=qT?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ek}function ek(){this.i=null,this.g="",this.h=!1}nr(hD,Cr),nr(fD,Cr),nr(iy,dD),iy.prototype.g=function(){return new XMLHttpRequest},iy.prototype.i=function(){return{}},pD=new iy;var K8=45e3,gD={},sy={};function mD(t,e,n){t.L=1,t.v=cy(Eo(e)),t.s=n,t.S=!0,tk(t,null)}function tk(t,e){t.G=Date.now(),Uf(t),t.A=Eo(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),dk(n.i,"t",r),t.C=0,n=t.l.J,t.h=new ek,t.g=kk(t.l,n?e:null,!t.s),0<t.O&&(t.M=new z8(Dr(t.Pa,t,t.g),t.O)),W1(t.U,t.g,"readystatechange",t.nb),e=t.I?x1(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),kf(),function W8(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var h=l[0];l=l[1];var g=h.split("_");o=2<=g.length&&"type"==g[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function nk(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function rk(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=Q8(t,n),i==sy){4==e&&(t.o=4,Qr(14),r=!1),Pl(t.j,t.m,null,"[Incomplete Response]");break}if(i==gD){t.o=4,Qr(15),Pl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Pl(t.j,t.m,i,null),_D(t,i)}nk(t)&&i!=sy&&i!=gD&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Qr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),DD(e),e.M=!0,Qr(11))):(Pl(t.j,t.m,n,"[Invalid Chunked Response]"),yu(t),Bf(t))}function Q8(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?sy:(n=Number(e.substring(n,r)),isNaN(n)?gD:(r+=1)+n>e.length?sy:(e=e.slice(r,r+n),t.C=r+n,e))}function Uf(t){t.Y=Date.now()+t.P,ik(t,t.P)}function ik(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Vf(Dr(t.lb,t),e)}function oy(t){t.B&&(He.clearTimeout(t.B),t.B=null)}function Bf(t){0==t.l.H||t.J||Mk(t.l,t)}function yu(t){oy(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,cD(t.V),q1(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function _D(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||yD(n.i,t)))if(!t.K&&yD(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;gy(n),fy(n)}TD(n),Qr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Vf(Dr(n.ib,n),6e3));if(1>=pk(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Iu(n,11)}else if((t.K||n.g==t)&&gy(n),!Rf(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const h=l[3];null!=h&&(n.ra=h,n.l.info("VER="+n.ra));const g=l[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const m=l[5];null!=m&&"number"==typeof m&&0<m&&(n.L=r=1.5*m,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const D=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(D){var s=r.i;s.g||-1==D.indexOf("spdy")&&-1==D.indexOf("quic")&&-1==D.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(vD(s,s.h),s.h=null))}if(r.F){const b=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(r.Da=b,Jt(r.I,r.F,b))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=Ok(r,r.J?r.pa:null,r.Y),o.K){gk(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(oy(a),Uf(a)),r.g=o}else Rk(r);0<n.j.length&&py(n)}else"stop"!=l[0]&&"close"!=l[0]||Iu(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Iu(n,7):wD(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}kf()}catch{}}function sk(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Z_(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function J8(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Z_(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function Y8(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Z_(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(pe=Lf.prototype).setTimeout=function(t){this.P=t},pe.nb=function(t){t=t.target;const e=this.M;e&&3==Vs(t)?e.l():this.Pa(t)},pe.Pa=function(t){try{if(t==this.g)e:{const h=Vs(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||qT||this.g&&(this.h.h||this.g.ja()||Tk(this.g)))){this.J||4!=h||7==e||kf(),oy(this);var n=this.g.da();this.ca=n;t:if(nk(this)){var r=Tk(this.g);t="";var i=r.length,s=4==Vs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){yu(this),Bf(this);var o="";break t}this.h.i=new He.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function q8(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rf(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,Qr(12),yu(this),Bf(this);break e}Pl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_D(this,n)}this.S?(rk(this,h,o),qT&&this.i&&3==h&&(W1(this.U,this.V,"tick",this.mb),this.V.start())):(Pl(this.j,this.m,o,null),_D(this,o)),4==h&&yu(this),this.i&&!this.J&&(4==h?Mk(this.l,this):(this.i=!1,Uf(this)))}else(function m7(t){const e={};t=(t.g&&2<=Vs(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Rf(t[r]))continue;var n=$8(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function O8(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Qr(12)):(this.o=0,Qr(13)),yu(this),Bf(this)}}}catch{}},pe.mb=function(){if(this.g){var t=Vs(this.g),e=this.g.ja();this.C<e.length&&(oy(this),rk(this,t,e),this.i&&4!=t&&Uf(this))}},pe.cancel=function(){this.J=!0,yu(this)},pe.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function G8(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(kf(),Qr(17)),yu(this),this.o=2,Bf(this)):ik(this,this.Y-t)};var ok=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vu(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof vu){this.h=t.h,ay(this,t.j),this.s=t.s,this.g=t.g,uy(this,t.m),this.l=t.l;var e=t.i,n=new Hf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ak(this,n),this.o=t.o}else t&&(e=String(t).match(ok))?(this.h=!1,ay(this,e[1]||"",!0),this.s=$f(e[2]||""),this.g=$f(e[3]||"",!0),uy(this,e[4]),this.l=$f(e[5]||"",!0),ak(this,e[6]||"",!0),this.o=$f(e[7]||"")):(this.h=!1,this.i=new Hf(null,this.h))}function Eo(t){return new vu(t)}function ay(t,e,n){t.j=n?$f(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function uy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ak(t,e,n){e instanceof Hf?(t.i=e,function s7(t,e){e&&!t.j&&(pa(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(ck(this,r),dk(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=jf(e,r7)),t.i=new Hf(e,t.h))}function Jt(t,e,n){t.i.set(e,n)}function cy(t){return Jt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function $f(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function jf(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,e7),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function e7(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}vu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(jf(e,uk,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(jf(e,uk,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(jf(n,"/"==n.charAt(0)?n7:t7,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",jf(n,i7)),t.join("")};var uk=/[#\/\?@]/g,t7=/[#\?:]/g,n7=/[#\?]/g,r7=/[#\?@]/g,i7=/#/g;function Hf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function pa(t){t.g||(t.g=new Map,t.h=0,t.i&&function X8(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function ck(t,e){pa(t),e=Ml(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function lk(t,e){return pa(t),e=Ml(t,e),t.g.has(e)}function dk(t,e,n){ck(t,e),0<n.length&&(t.i=null,t.g.set(Ml(t,e),zT(n)),t.h+=n.length)}function Ml(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function hk(t){this.l=t||a7,t=He.PerformanceNavigationTiming?0<(t=He.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(He.g&&He.g.Ka&&He.g.Ka()&&He.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pe=Hf.prototype).add=function(t,e){pa(this),this.i=null,t=Ml(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},pe.forEach=function(t,e){pa(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},pe.ta=function(){pa(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},pe.Z=function(t){pa(this);let e=[];if("string"==typeof t)lk(this,t)&&(e=e.concat(this.g.get(Ml(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},pe.set=function(t,e){return pa(this),this.i=null,lk(this,t=Ml(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},pe.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},pe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var a7=10;function fk(t){return!!t.h||!!t.g&&t.g.size>=t.j}function pk(t){return t.h?1:t.g?t.g.size:0}function yD(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function vD(t,e){t.g?t.g.add(e):t.h=e}function gk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function mk(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return zT(t.i)}hk.prototype.cancel=function(){if(this.i=mk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var u7=class{stringify(t){return He.JSON.stringify(t,void 0)}parse(t){return He.JSON.parse(t,void 0)}};function c7(){this.g=new u7}function l7(t,e,n){const r=n||"";try{sk(t,function(i,s){let o=i;Sf(i)&&(o=aD(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ly(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function zf(t){this.l=t.ec||null,this.j=t.ob||!1}function dy(t,e){rr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=ID,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nr(zf,dD),zf.prototype.g=function(){return new dy(this.l,this.j)},zf.prototype.i=function(t){return function(){return t}}({}),nr(dy,rr);var ID=0;function _k(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Wf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,qf(t)}function qf(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(pe=dy.prototype).open=function(t,e){if(this.readyState!=ID)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,qf(this)},pe.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||He).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},pe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wf(this)),this.readyState=ID},pe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,qf(this)),this.g&&(this.readyState=3,qf(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof He.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_k(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},pe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Wf(this):qf(this),3==this.readyState&&_k(this)}},pe.Za=function(t){this.g&&(this.response=this.responseText=t,Wf(this))},pe.Ya=function(t){this.g&&(this.response=t,Wf(this))},pe.ka=function(){this.g&&Wf(this)},pe.setRequestHeader=function(t,e){this.v.append(t,e)},pe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},pe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(dy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var h7=He.JSON.parse;function En(t){rr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=yk,this.L=this.M=!1}nr(En,rr);var yk="",f7=/^https?$/i,p7=["POST","PUT"];function vk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ik(t),hy(t)}function Ik(t){t.F||(t.F=!0,hr(t,"complete"),hr(t,"error"))}function Ek(t){if(t.h&&typeof jT<"u"&&(!t.C[1]||4!=Vs(t)||2!=t.da()))if(t.v&&4==Vs(t))lD(t.La,0,t);else if(hr(t,"readystatechange"),4==Vs(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(ok)[1]||null;!i&&He.self&&He.self.location&&(i=He.self.location.protocol.slice(0,-1)),r=!f7.test(i?i.toLowerCase():"")}n=r}if(n)hr(t,"complete"),hr(t,"success");else{t.m=6;try{var s=2<Vs(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Ik(t)}}finally{hy(t)}}}function hy(t,e){if(t.g){wk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||hr(t,"ready");try{n.onreadystatechange=r}catch{}}}function wk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(He.clearTimeout(t.A),t.A=null)}function Vs(t){return t.g?t.g.readyState:0}function Tk(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case yk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Dk(t){let e="";return JT(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function ED(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dk(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Jt(t,e,n))}function Gf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ck(t){this.Ga=0,this.j=[],this.l=new ty,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Gf("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Gf("baseRetryDelayMs",5e3,t),this.hb=Gf("retryDelaySeedMs",1e4,t),this.eb=Gf("forwardChannelMaxRetries",2,t),this.xa=Gf("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new hk(t&&t.concurrentRequestLimit),this.Ja=new c7,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function wD(t){if(Ak(t),3==t.H){var e=t.W++,n=Eo(t.I);if(Jt(n,"SID",t.K),Jt(n,"RID",e),Jt(n,"TYPE","terminate"),Zf(t,n),(e=new Lf(t,t.l,e)).L=2,e.v=cy(Eo(n)),n=!1,He.navigator&&He.navigator.sendBeacon)try{n=He.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&He.Image&&((new Image).src=e.v,n=!0),n||(e.g=kk(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Uf(e)}xk(t)}function fy(t){t.g&&(DD(t),t.g.cancel(),t.g=null)}function Ak(t){fy(t),t.u&&(He.clearTimeout(t.u),t.u=null),gy(t),t.i.cancel(),t.m&&("number"==typeof t.m&&He.clearTimeout(t.m),t.m=null)}function py(t){if(!fk(t.i)&&!t.m){t.m=!0;var e=t.Na;Nf||j1(),xf||(Nf(),xf=!0),uD.add(e,t),t.C=0}}function bk(t,e){var n;n=e?e.m:t.W++;const r=Eo(t.I);Jt(r,"SID",t.K),Jt(r,"RID",n),Jt(r,"AID",t.V),Zf(t,r),t.o&&t.s&&ED(r,t.o,t.s),n=new Lf(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Sk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),vD(t.i,n),mD(n,r,e)}function Zf(t,e){t.na&&JT(t.na,function(n,r){Jt(e,r,n)}),t.h&&sk({},function(n,r){Jt(e,r,n)})}function Sk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Dr(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const h=i[u].map;if(l-=s,0>l)s=Math.max(0,i[u].g-100),a=!1;else try{l7(h,o,"req"+l+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Rk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Nf||j1(),xf||(Nf(),xf=!0),uD.add(e,t),t.A=0}}function TD(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Vf(Dr(t.Ma,t),Nk(t,t.A)),t.A++,0))}function DD(t){null!=t.B&&(He.clearTimeout(t.B),t.B=null)}function Pk(t){t.g=new Lf(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Eo(t.wa);Jt(e,"RID","rpc"),Jt(e,"SID",t.K),Jt(e,"AID",t.V),Jt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Jt(e,"TO",t.qa),Jt(e,"TYPE","xmlhttp"),Zf(t,e),t.o&&t.s&&ED(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=cy(Eo(e)),n.s=null,n.S=!0,tk(n,t)}function gy(t){null!=t.v&&(He.clearTimeout(t.v),t.v=null)}function Mk(t,e){var n=null;if(t.g==e){gy(t),DD(t),t.g=null;var r=2}else{if(!yD(t.i,e))return;n=e.F,gk(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;hr(r=ny(),new Q1(r,n)),py(t)}else Rk(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function _7(t,e){return!(pk(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Vf(Dr(t.Na,t,e),Nk(t,t.C)),t.C++,0)))}(t,e)||2==r&&TD(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Iu(t,5);break;case 4:Iu(t,10);break;case 3:Iu(t,6);break;default:Iu(t,2)}}function Nk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Iu(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Dr(t.pb,t);n||(n=new vu("//www.google.com/images/cleardot.gif"),He.location&&"http"==He.location.protocol||ay(n,"https"),cy(n)),function d7(t,e){const n=new ty;if(He.Image){const r=new Image;r.onload=K_(ly,n,r,"TestLoadImage: loaded",!0,e),r.onerror=K_(ly,n,r,"TestLoadImage: error",!1,e),r.onabort=K_(ly,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=K_(ly,n,r,"TestLoadImage: timeout",!1,e),He.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Qr(2);t.H=0,t.h&&t.h.za(e),xk(t),Ak(t)}function xk(t){if(t.H=0,t.ma=[],t.h){const e=mk(t.i);(0!=e.length||0!=t.j.length)&&(S1(t.ma,e),S1(t.ma,t.j),t.i.i.length=0,zT(t.j),t.j.length=0),t.h.ya()}}function Ok(t,e,n){var r=n instanceof vu?Eo(n):new vu(n);if(""!=r.g)e&&(r.g=e+"."+r.g),uy(r,r.m);else{var i=He.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new vu(null);r&&ay(s,r),e&&(s.g=e),i&&uy(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&Jt(r,n,e),Jt(r,"VER",t.ra),Zf(t,r),r}function kk(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new En(n&&t.Ha&&!t.va?new zf({ob:!0}):t.va)).Oa(t.J),e}function Vk(){}function my(){if(Rl&&!(10<=Number(P8)))throw Error("Environmental error: no available transport.")}function Di(t,e){rr.call(this),this.g=new Ck(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Rf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Rf(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Nl(this)}function Fk(t){hD.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Lk(){fD.call(this),this.status=1}function Nl(t){this.g=t}function ds(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function CD(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Pt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(pe=En.prototype).Oa=function(t){this.M=t},pe.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():pD.g(),this.C=function J1(t){return t.h||(t.h=t.i())}(this.u?this.u:pD),this.g.onreadystatechange=Dr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void vk(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=He.FormData&&t instanceof He.FormData,!(0<=b1(p7,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wk(this),0<this.B&&((this.L=function g7(t){return Rl&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dr(this.ua,this)):this.A=lD(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){vk(this,s)}},pe.ua=function(){typeof jT<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hr(this,"timeout"),this.abort(8))},pe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,hr(this,"complete"),hr(this,"abort"),hy(this))},pe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hy(this,!0)),En.$.N.call(this)},pe.La=function(){this.s||(this.G||this.v||this.l?Ek(this):this.kb())},pe.kb=function(){Ek(this)},pe.isActive=function(){return!!this.g},pe.da=function(){try{return 2<Vs(this)?this.g.status:-1}catch{return-1}},pe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},pe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),h7(e)}},pe.Ia=function(){return this.m},pe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(pe=Ck.prototype).ra=8,pe.H=1,pe.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Lf(this,this.l,t);let s=this.s;if(this.U&&(s?(s=x1(s),k1(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Sk(this,i,e),Jt(n=Eo(this.I),"RID",t),Jt(n,"CVER",22),this.F&&Jt(n,"X-HTTP-Session-Id",this.F),Zf(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Dk(s)))+"&"+e:this.o&&ED(n,this.o,s)),vD(this.i,i),this.bb&&Jt(n,"TYPE","init"),this.P?(Jt(n,"$req",e),Jt(n,"SID","null"),i.aa=!0,mD(i,n,null)):mD(i,n,e),this.H=2}}else 3==this.H&&(t?bk(this,t):0==this.j.length||fk(this.i)||bk(this))},pe.Ma=function(){if(this.u=null,Pk(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Vf(Dr(this.jb,this),t)}},pe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Qr(10),fy(this),Pk(this))},pe.ib=function(){null!=this.v&&(this.v=null,fy(this),TD(this),Qr(19))},pe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Qr(2)):(this.l.info("Failed to ping google.com"),Qr(1))},pe.isActive=function(){return!!this.h&&this.h.isActive(this)},(pe=Vk.prototype).Ba=function(){},pe.Aa=function(){},pe.za=function(){},pe.ya=function(){},pe.isActive=function(){return!0},pe.Va=function(){},my.prototype.g=function(t,e){return new Di(t,e)},nr(Di,rr),Di.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Qr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Ok(t,null,t.Y),py(t)},Di.prototype.close=function(){wD(this.g)},Di.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=aD(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&py(e)},Di.prototype.N=function(){this.g.h=null,delete this.j,wD(this.g),delete this.g,Di.$.N.call(this)},nr(Fk,hD),nr(Lk,fD),nr(Nl,Vk),Nl.prototype.Ba=function(){hr(this.g,"a")},Nl.prototype.Aa=function(t){hr(this.g,new Fk(t))},Nl.prototype.za=function(t){hr(this.g,new Lk)},Nl.prototype.ya=function(){hr(this.g,"b")},nr(ds,function y7(){this.blockSize=-1}),ds.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ds.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)CD(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){CD(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){CD(this,r),i=0;break}}this.h=i,this.i+=e},ds.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var v7={};function AD(t){return-128<=t&&128>t?function b8(t,e){var n=v7;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Pt([0|e],0>e?-1:0)}):new Pt([0|t],0>t?-1:0)}function Fs(t){if(isNaN(t)||!isFinite(t))return xl;if(0>t)return fr(Fs(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=bD;return new Pt(e,0)}var bD=4294967296,xl=AD(0),SD=AD(1),Bk=AD(16777216);function wo(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Ki(t){return-1==t.h}function fr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Pt(n,~t.h).add(SD)}function _y(t,e){return t.add(fr(e))}function yy(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Kf(t,e){this.g=t,this.h=e}function vy(t,e){if(wo(e))throw Error("division by zero");if(wo(t))return new Kf(xl,xl);if(Ki(t))return e=vy(fr(t),e),new Kf(fr(e.g),fr(e.h));if(Ki(e))return e=vy(t,fr(e)),new Kf(fr(e.g),e.h);if(30<t.g.length){if(Ki(t)||Ki(e))throw Error("slowDivide_ only works with positive integers.");for(var n=SD,r=e;0>=r.X(t);)n=$k(n),r=$k(r);var i=Ol(n,1),s=Ol(r,1);for(r=Ol(r,2),n=Ol(n,2);!wo(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ol(r,1),n=Ol(n,1)}return e=_y(t,i.R(e)),new Kf(i,e)}for(i=xl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Fs(n)).R(e);Ki(o)||0<o.X(t);)o=(s=Fs(n-=r)).R(e);wo(s)&&(s=SD),i=i.add(s),t=_y(t,o)}return new Kf(i,t)}function $k(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Pt(n,t.h)}function Ol(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Pt(i,t.h)}(pe=Pt.prototype).ea=function(){if(Ki(this))return-fr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:bD+r)*e,e*=bD}return t},pe.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(wo(this))return"0";if(Ki(this))return"-"+fr(this).toString(t);for(var e=Fs(Math.pow(t,6)),n=this,r="";;){var i=vy(n,e).g,s=((0<(n=_y(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(wo(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},pe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},pe.X=function(t){return Ki(t=_y(this,t))?-1:wo(t)?0:1},pe.abs=function(){return Ki(this)?fr(this):this},pe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Pt(n,-2147483648&n[n.length-1]?-1:0)},pe.R=function(t){if(wo(this)||wo(t))return xl;if(Ki(this))return Ki(t)?fr(this).R(fr(t)):fr(fr(this).R(t));if(Ki(t))return fr(this.R(fr(t)));if(0>this.X(Bk)&&0>t.X(Bk))return Fs(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,yy(n,2*r+2*i),n[2*r+2*i+1]+=s*u,yy(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,yy(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,yy(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Pt(n,0)},pe.gb=function(t){return vy(this,t).h},pe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Pt(n,this.h&t.h)},pe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Pt(n,this.h|t.h)},pe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Pt(n,this.h^t.h)},my.prototype.createWebChannel=my.prototype.g,Di.prototype.send=Di.prototype.u,Di.prototype.open=Di.prototype.m,Di.prototype.close=Di.prototype.close,ry.NO_ERROR=0,ry.TIMEOUT=8,ry.HTTP_ERROR=6,Y1.COMPLETE="complete",X1.EventType=Ff,Ff.OPEN="a",Ff.CLOSE="b",Ff.ERROR="c",Ff.MESSAGE="d",rr.prototype.listen=rr.prototype.O,En.prototype.listenOnce=En.prototype.P,En.prototype.getLastError=En.prototype.Sa,En.prototype.getLastErrorCode=En.prototype.Ia,En.prototype.getStatus=En.prototype.da,En.prototype.getResponseJson=En.prototype.Wa,En.prototype.getResponseText=En.prototype.ja,En.prototype.send=En.prototype.ha,En.prototype.setWithCredentials=En.prototype.Oa,ds.prototype.digest=ds.prototype.l,ds.prototype.reset=ds.prototype.reset,ds.prototype.update=ds.prototype.j,Pt.prototype.add=Pt.prototype.add,Pt.prototype.multiply=Pt.prototype.R,Pt.prototype.modulo=Pt.prototype.gb,Pt.prototype.compare=Pt.prototype.X,Pt.prototype.toNumber=Pt.prototype.ea,Pt.prototype.toString=Pt.prototype.toString,Pt.prototype.getBits=Pt.prototype.D,Pt.fromNumber=Fs,Pt.fromString=function Uk(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return fr(Uk(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Fs(Math.pow(e,8)),r=xl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Fs(Math.pow(e,s)),r=r.R(s).add(Fs(o))):r=(r=r.R(n)).add(Fs(o))}return r};var I7=ls.createWebChannelTransport=function(){return new my},E7=ls.getStatEventTarget=function(){return ny()},RD=ls.ErrorCode=ry,w7=ls.EventType=Y1,T7=ls.Event=_u,jk=ls.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},D7=ls.FetchXmlHttpFactory=zf,Iy=ls.WebChannel=X1,C7=ls.XhrIo=En,A7=ls.Md5=ds,kl=ls.Integer=Pt;const Hk="@firebase/firestore";class ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ir.UNAUTHENTICATED=new ir(null),ir.GOOGLE_CREDENTIALS=new ir("google-credentials-uid"),ir.FIRST_PARTY=new ir("first-party-uid"),ir.MOCK_USER=new ir("mock-user");let Vl="10.5.2";const ga=new Os.Yd("@firebase/firestore");function Fl(){return ga.logLevel}function ne(t,...e){if(ga.logLevel<=Os.in.DEBUG){const n=e.map(PD);ga.debug(`Firestore (${Vl}): ${t}`,...n)}}function Mn(t,...e){if(ga.logLevel<=Os.in.ERROR){const n=e.map(PD);ga.error(`Firestore (${Vl}): ${t}`,...n)}}function ai(t,...e){if(ga.logLevel<=Os.in.WARN){const n=e.map(PD);ga.warn(`Firestore (${Vl}): ${t}`,...n)}}function PD(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function ye(t="Unexpected state"){const e=`FIRESTORE (${Vl}) INTERNAL ASSERTION FAILED: `+t;throw Mn(e),new Error(e)}function Ae(t,e){t||ye()}function ae(t,e){return t}const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Ot.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class zk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ir.UNAUTHENTICATED))}shutdown(){}}class P7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class M7{constructor(e){this.t=e,this.currentUser=ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let o=new qn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,G.Z)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae("string"==typeof r.accessToken),new zk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(null===e||"string"==typeof e),new ir(e)}}class N7{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class x7{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new N7(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class O7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae("string"==typeof n.token),this.R=n.token,new Wk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function k7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class qk{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=k7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function $e(t,e){return t<e?-1:t>e?1:0}function Ll(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Gk(t){return t+"\0"}class sn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return sn.fromMillis(Date.now())}static fromDate(e){return sn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new sn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new sn(0,0))}static max(){return new be(new sn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qf{constructor(e,n,r){void 0===n?n=0:n>e.length&&ye(),void 0===r?r=e.length-n:r>e.length-n&&ye(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Qf.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class mt extends Qf{construct(e,n,r){return new mt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new mt(n)}static emptyPath(){return new mt([])}}const V7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Qf{construct(e,n,r){return new Xt(e,n,r)}static isValidIdentifier(e){return V7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new J(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new J(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new J(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new J(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(n)}static emptyPath(){return new Xt([])}}class le{constructor(e){this.path=e}static fromPath(e){return new le(mt.fromString(e))}static fromName(e){return new le(mt.fromString(e).popFirst(5))}static empty(){return new le(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new mt(e.slice()))}}class Ul{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function MD(t){return t.fields.find(e=>2===e.kind)}function Eu(t){return t.fields.filter(e=>2!==e.kind)}Ul.UNKNOWN_ID=-1;class wu{constructor(e,n){this.fieldPath=e,this.kind=n}}class Bl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Bl(0,Ci.min())}}function Zk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=be.fromTimestamp(1e9===r?new sn(n+1,0):new sn(n,r));return new Ci(i,le.empty(),e)}function Kk(t){return new Ci(t.readTime,t.key,-1)}class Ci{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ci(be.min(),le.empty(),-1)}static max(){return new Ci(be.max(),le.empty(),-1)}}function ND(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=le.comparator(t.documentKey,e.documentKey),0!==n?n:$e(t.largestBatchId,e.largestBatchId))}const Qk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ma(t){return xD.apply(this,arguments)}function xD(){return xD=(0,G.Z)(function*(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==Qk)throw t;ne("LocalStore","Unexpectedly lost primary lease")}),xD.apply(this,arguments)}class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class Ey{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new qn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Yf(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=OD(r.target.error);this.V.reject(new Yf(e,i))}}static open(e,n,r,i){try{return new Ey(n,e.transaction(i,r))}catch(s){throw new Yf(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new B7(n)}}class hs{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===hs.S((0,Ot.z$)())&&Mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ne("SimpleDb","Removing database:",e),Tu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ot.hl)())return!1;if(hs.C())return!0;const e=(0,Ot.z$)(),n=hs.S(e),r=0<n&&n<10,i=hs.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,G.Z)(function*(){return n.db||(ne("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Yf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new J(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new J(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Yf(e,a))},s.onupgradeneeded=o=>{ne("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.N(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{ne("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,G.Z)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.O(e);const u=Ey.open(s.db,e,o?"readonly":"readwrite",r),l=i(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),O.reject(h))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,h="FirebaseError"!==l.name&&a<3;if(ne("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),s.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class U7{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Tu(this.k.delete())}}class Yf extends J{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function _a(t){return"IndexedDbTransactionError"===t.name}class B7{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(ne("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Tu(r)}add(e){return ne("SimpleDb","ADD",this.store.name,e,e),Tu(this.store.add(e))}get(e){return Tu(this.store.get(e)).next(n=>(void 0===n&&(n=null),ne("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ne("SimpleDb","DELETE",this.store.name,e),Tu(this.store.delete(e))}count(){return ne("SimpleDb","COUNT",this.store.name),Tu(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new O((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new O((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new O((r,i)=>{n.onerror=s=>{const o=OD(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new O((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new U7(a),l=n(a.primaryKey,a.value,u);if(l instanceof O){const h=l.catch(g=>(u.done(),O.reject(g)));r.push(h)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>O.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Tu(t){return new O((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=OD(r.target.error);n(i)}})}let Jk=!1;function OD(t){const e=hs.S((0,Ot.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jk||(Jk=!0,setTimeout(()=>{throw r},0)),r}}return t}class $7{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,G.Z)(function*(){n.task=null;try{ne("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){_a(r)?ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ma(r)}yield n.ee(6e4)}))}}class j7{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,G.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,s=!0;return O.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ne("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(ne("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Kk(s);ND(o,r)>0&&(r=o)}),new Ci(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Ai=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Jf(t){return null==t}function Xf(t){return 0===t&&1/t==-1/0}function Xk(t){return"number"==typeof t&&Number.isInteger(t)&&!Xf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Ar(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=eV(e)),e=H7(t.get(n),e);return eV(e)}function H7(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function eV(t){return t+"\x01\x01"}function Ls(t){const e=t.length;if(Ae(e>=2),2===e)return Ae("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),mt.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&ye(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:ye()}s=o+2}return new mt(r)}const tV=["userId","batchId"];function wy(t,e){return[t,Ar(e)]}function nV(t,e,n){return[t,Ar(e),n]}const z7={},W7=["prefixPath","collectionGroup","readTime","documentId"],q7=["prefixPath","collectionGroup","documentId"],G7=["collectionGroup","readTime","prefixPath","documentId"],Z7=["canonicalId","targetId"],K7=["targetId","path"],Q7=["path","targetId"],Y7=["collectionId","parent"],J7=["indexId","uid"],X7=["uid","sequenceNumber"],eZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tZ=["indexId","uid","orderedDocumentKey"],nZ=["userId","collectionPath","documentId"],rZ=["userId","collectionPath","largestBatchId"],iZ=["userId","collectionGroup","largestBatchId"],rV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sZ=[...rV,"documentOverlays"],iV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sV=iV,oZ=[...sV,"indexConfiguration","indexState","indexEntries"];class kD extends Yk{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function sr(t,e){const n=ae(t);return hs.M(n.ae,e)}function oV(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ya(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ht{constructor(e,n){this.comparator=e,this.root=n||pr.EMPTY}insert(e,n){return new Ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pr.BLACK,null,null))}remove(e){return new Ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ty(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ty(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ty(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ty(this.root,e,this.comparator,!0)}}class Ty{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??pr.RED,this.left=i??pr.EMPTY,this.right=s??pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new pr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return pr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}pr.EMPTY=null,pr.RED=!0,pr.BLACK=!1,pr.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,n,r,i,s){return this}insert(e,n,r){return new pr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kt{constructor(e){this.comparator=e,this.data=new Ht(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uV(this.data.getIterator())}getIteratorFrom(e){return new uV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class uV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $l(t){return t.hasNext()?t.getNext():void 0}class ui{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new ui([])}unionWith(e){let n=new kt(Xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ui(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ll(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class cV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new cV("Invalid base64 string: "+s):s}}(e);return new Gn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gn.EMPTY_BYTE_STRING=new Gn("");const uZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function va(t){if(Ae(!!t),"string"==typeof t){let e=0;const n=uZ.exec(t);if(Ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wn(t.seconds),nanos:wn(t.nanos)}}function wn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function To(t){return"string"==typeof t?Gn.fromBase64String(t):Gn.fromUint8Array(t)}function Dy(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Cy(t){const e=t.mapValue.fields.__previous_value__;return Dy(e)?Cy(e):e}function ep(t){const e=va(t.mapValue.fields.__local_write_time__.timestampValue);return new sn(e.seconds,e.nanos)}class cZ{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Ia{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ia("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ia&&e.projectId===this.projectId&&e.database===this.database}}const Ea={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ay={nullValue:"NULL_VALUE"};function wa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dy(t)?4:fV(t)?9007199254740991:10:ye()}function Us(t,e){if(t===e)return!0;const n=wa(t);if(n!==wa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ep(t).isEqual(ep(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=va(i.timestampValue),a=va(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,To(t.bytesValue).isEqual(To(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return wn(i.geoPointValue.latitude)===wn(s.geoPointValue.latitude)&&wn(i.geoPointValue.longitude)===wn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return wn(i.integerValue)===wn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=wn(i.doubleValue),a=wn(s.doubleValue);return o===a?Xf(o)===Xf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ll(t.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(oV(o)!==oV(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Us(o[u],a[u])))return!1;return!0}(t,e);default:return ye()}var s}function tp(t,e){return void 0!==(t.values||[]).find(n=>Us(n,e))}function Ta(t,e){if(t===e)return 0;const n=wa(t),r=wa(e);if(n!==r)return $e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=wn(s.integerValue||s.doubleValue),u=wn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return lV(t.timestampValue,e.timestampValue);case 4:return lV(ep(t),ep(e));case 5:return $e(t.stringValue,e.stringValue);case 6:return function(s,o){const a=To(s),u=To(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const h=$e(a[l],u[l]);if(0!==h)return h}return $e(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=$e(wn(s.latitude),wn(o.latitude));return 0!==a?a:$e(wn(s.longitude),wn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const h=Ta(a[l],u[l]);if(h)return h}return $e(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ea.mapValue&&o===Ea.mapValue)return 0;if(s===Ea.mapValue)return 1;if(o===Ea.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=$e(u[g],h[g]);if(0!==m)return m;const y=Ta(a[u[g]],l[h[g]]);if(0!==y)return y}return $e(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ye()}}function lV(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return $e(t,e);const n=va(t),r=va(e),i=$e(n.seconds,r.seconds);return 0!==i?i:$e(n.nanos,r.nanos)}function jl(t){return VD(t)}function VD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=va(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?To(t.bytesValue).toBase64():"referenceValue"in t?le.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=VD(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${VD(n.fields[o])}`;return i+"}"}(t.mapValue):ye()}function Du(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function FD(t){return!!t&&"integerValue"in t}function np(t){return!!t&&"arrayValue"in t}function dV(t){return!!t&&"nullValue"in t}function hV(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sy(t){return!!t&&"mapValue"in t}function rp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ya(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=rp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function fV(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function lZ(t){return"nullValue"in t?Ay:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Du(Ia.empty(),le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ye()}function dZ(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Du(Ia.empty(),le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ea:ye()}function pV(t,e){const n=Ta(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function gV(t,e){const n=Ta(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class gr{constructor(e){this.value=e}static empty(){return new gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Sy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rp(n)}setAll(e){let n=Xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=rp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Sy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Us(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Sy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ya(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new gr(rp(this.value))}}function mV(t){const e=[];return ya(t.fields,(n,r)=>{const i=new Xt([n]);if(Sy(r)){const s=mV(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ui(e)}class en{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new en(e,0,be.min(),be.min(),be.min(),gr.empty(),0)}static newFoundDocument(e,n,r,i){return new en(e,1,n,be.min(),r,i,0)}static newNoDocument(e,n){return new en(e,2,n,be.min(),be.min(),gr.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,be.min(),be.min(),gr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Da{constructor(e,n){this.position=e,this.inclusive=n}}function _V(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?le.comparator(le.fromName(o.referenceValue),n.key):Ta(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function yV(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Us(t.position[n],e.position[n]))return!1;return!0}class ip{constructor(e,n="asc"){this.field=e,this.dir=n}}function hZ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class vV{}class ht extends vV{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new fZ(e,n,r):"array-contains"===n?new mZ(e,r):"in"===n?new CV(e,r):"not-in"===n?new _Z(e,r):"array-contains-any"===n?new yZ(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new pZ(e,r):new gZ(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ta(n,this.value)):null!==n&&wa(this.value)===wa(n)&&this.matchesComparison(Ta(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mt extends vV{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Mt(e,n)}matches(e){return Hl(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Hl(t){return"and"===t.op}function LD(t){return"or"===t.op}function UD(t){return IV(t)&&Hl(t)}function IV(t){for(const e of t.filters)if(e instanceof Mt)return!1;return!0}function BD(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+jl(t.value);if(UD(t))return t.filters.map(e=>BD(e)).join(",");{const e=t.filters.map(n=>BD(n)).join(",");return`${t.op}(${e})`}}function EV(t,e){return t instanceof ht?(r=t,(i=e)instanceof ht&&r.op===i.op&&r.field.isEqual(i.field)&&Us(r.value,i.value)):t instanceof Mt?function(r,i){return i instanceof Mt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&EV(o,i.filters[a]),!0)}(t,e):void ye();var r,i}function wV(t,e){const n=t.filters.concat(e);return Mt.create(n,t.op)}function TV(t){return t instanceof ht?`${(n=t).field.canonicalString()} ${n.op} ${jl(n.value)}`:t instanceof Mt?function(n){return n.op.toString()+" {"+n.getFilters().map(TV).join(" ,")+"}"}(t):"Filter";var n}class fZ extends ht{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class pZ extends ht{constructor(e,n){super(e,"in",n),this.keys=DV(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gZ extends ht{constructor(e,n){super(e,"not-in",n),this.keys=DV(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function DV(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class mZ extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return np(n)&&tp(n.arrayValue,this.value)}}class CV extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&tp(this.value.arrayValue,n)}}class _Z extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(tp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!tp(this.value.arrayValue,n)}}class yZ extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!np(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tp(this.value.arrayValue,r))}}class vZ{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function $D(t,e=null,n=[],r=[],i=null,s=null,o=null){return new vZ(t,e,n,r,i,s,o)}function Cu(t){const e=ae(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>BD(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Jf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>jl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>jl(r)).join(",")),e.ce=n}return e.ce}function sp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hZ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!EV(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yV(t.startAt,e.startAt)&&yV(t.endAt,e.endAt)}function Ry(t){return le.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Py(t,e){return t.filters.filter(n=>n instanceof ht&&n.field.isEqual(e))}function AV(t,e,n){let r=Ay,i=!0;for(const s of Py(t,e)){let o=Ay,a=!0;switch(s.op){case"<":case"<=":o=lZ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Ay}pV({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];pV({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function bV(t,e,n){let r=Ea,i=!0;for(const s of Py(t,e)){let o=Ea,a=!0;switch(s.op){case">=":case">":o=dZ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ea}gV({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];gV({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class Do{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function SV(t,e,n,r,i,s,o,a){return new Do(t,e,n,r,i,s,o,a)}function zl(t){return new Do(t)}function RV(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function jD(t){return null!==t.collectionGroup}function Wl(t){const e=ae(t);if(null===e.le){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new kt(Xt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new ip(s,r))}),n.has(Xt.keyField().canonicalString())||e.le.push(new ip(Xt.keyField(),r))}return e.le}function Yr(t){const e=ae(t);return e.he||(e.he=function PV(t,e){if("F"===t.limitType)return $D(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new ip(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Da(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Da(t.startAt.position,t.startAt.inclusive):null;return $D(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Wl(t))),e.he}function HD(t,e){const n=t.filters.concat([e]);return new Do(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function My(t,e,n){return new Do(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function op(t,e){return sp(Yr(t),Yr(e))&&t.limitType===e.limitType}function MV(t){return`${Cu(Yr(t))}|lt:${t.limitType}`}function ql(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>TV(i)).join(", ")}]`),Jf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>jl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>jl(i)).join(",")),`Target(${r})`}(Yr(t))}; limitType=${t.limitType})`}function ap(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Wl(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const l=_V(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Wl(r),i)||r.endAt&&!function(o,a,u){const l=_V(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Wl(r),i)));var r,i}function NV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xV(t){return(e,n)=>{let r=!1;for(const i of Wl(t)){const s=IZ(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function IZ(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return null!==u&&null!==l?Ta(u,l):ye()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}class Co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ya(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return aV(this.inner)}size(){return this.innerSize}}const EZ=new Ht(le.comparator);function ci(){return EZ}const OV=new Ht(le.comparator);function up(...t){let e=OV;for(const n of t)e=e.insert(n.key,n);return e}function kV(t){let e=OV;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Bs(){return cp()}function VV(){return cp()}function cp(){return new Co(t=>t.toString(),(t,e)=>t.isEqual(e))}const wZ=new Ht(le.comparator),TZ=new kt(le.comparator);function Ke(...t){let e=TZ;for(const n of t)e=e.add(n);return e}const DZ=new kt($e);function zD(){return DZ}function FV(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xf(e)?"-0":e}}function LV(t){return{integerValue:""+t}}function UV(t,e){return Xk(e)?LV(e):FV(t,e)}class Ny{constructor(){this._=void 0}}function CZ(t,e,n){return t instanceof Gl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Dy(s)&&(s=Cy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Au?$V(t,e):t instanceof bu?jV(t,e):function(i,s){const o=BV(i,s),a=HV(o)+HV(i.Ie);return FD(o)&&FD(i.Ie)?LV(a):FV(i.serializer,a)}(t,e)}function AZ(t,e,n){return t instanceof Au?$V(t,e):t instanceof bu?jV(t,e):n}function BV(t,e){return t instanceof Zl?FD(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Gl extends Ny{}class Au extends Ny{constructor(e){super(),this.elements=e}}function $V(t,e){const n=zV(e);for(const r of t.elements)n.some(i=>Us(i,r))||n.push(r);return{arrayValue:{values:n}}}class bu extends Ny{constructor(e){super(),this.elements=e}}function jV(t,e){let n=zV(e);for(const r of t.elements)n=n.filter(i=>!Us(i,r));return{arrayValue:{values:n}}}class Zl extends Ny{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function HV(t){return wn(t.integerValue||t.doubleValue)}function zV(t){return np(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class lp{constructor(e,n){this.field=e,this.transform=n}}class SZ{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xy(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Oy{}function WV(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Ql(t.key,on.none()):new Kl(t.key,t.data,on.none());{const n=t.data,r=gr.empty();let i=new kt(Xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ao(t.key,r,new ui(i.toArray()),on.none())}}function RZ(t,e,n){t instanceof Kl?function(i,s,o){const a=i.value.clone(),u=ZV(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ao?function(i,s,o){if(!xy(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ZV(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(GV(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function dp(t,e,n,r){return t instanceof Kl?function(s,o,a,u){if(!xy(s.precondition,o))return a;const l=s.value.clone(),h=KV(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ao?function(s,o,a,u){if(!xy(s.precondition,o))return a;const l=KV(s.fieldTransforms,u,o),h=o.data;return h.setAll(GV(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,xy(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function PZ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=BV(r.transform,i||null);null!=s&&(null===n&&(n=gr.empty()),n.set(r.field,s))}return n||null}function qV(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Ll(r,i,(s,o)=>function bZ(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Au&&i instanceof Au||r instanceof bu&&i instanceof bu?Ll(r.elements,i.elements,Us):r instanceof Zl&&i instanceof Zl?Us(r.Ie,i.Ie):r instanceof Gl&&i instanceof Gl);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Kl extends Oy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ao extends Oy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function GV(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ZV(t,e,n){const r=new Map;Ae(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,AZ(o,a,n[i]))}return r}function KV(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,CZ(s,o,e))}return r}class Ql extends Oy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WD extends Oy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&RZ(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=dp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=dp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=VV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=WV(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ke())}isEqual(e){return this.batchId===e.batchId&&Ll(this.mutations,e.mutations,(n,r)=>qV(n,r))&&Ll(this.baseMutations,e.baseMutations,(n,r)=>qV(n,r))}}class GD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ae(e.mutations.length===r.length);let i=wZ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new GD(e,n,r,i)}}class ZD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class NZ{constructor(e,n){this.count=e,this.unchangedNames=n}}var Vn,_t;function QV(t){switch(t){default:return ye();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function YV(t){if(void 0===t)return Mn("GRPC error has no .code"),B.UNKNOWN;switch(t){case Vn.OK:return B.OK;case Vn.CANCELLED:return B.CANCELLED;case Vn.UNKNOWN:return B.UNKNOWN;case Vn.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Vn.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Vn.INTERNAL:return B.INTERNAL;case Vn.UNAVAILABLE:return B.UNAVAILABLE;case Vn.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Vn.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Vn.NOT_FOUND:return B.NOT_FOUND;case Vn.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Vn.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Vn.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Vn.ABORTED:return B.ABORTED;case Vn.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Vn.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Vn.DATA_LOSS:return B.DATA_LOSS;default:return ye()}}(_t=Vn||(Vn={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";function JV(){return new TextEncoder}const xZ=new kl([4294967295,4294967295],0);function XV(t){const e=JV().encode(t),n=new A7;return n.update(e),new Uint8Array(n.digest())}function eF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new kl([n,r],0),new kl([i,s],0)]}class KD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hp(`Invalid padding: ${n}`);if(r<0)throw new hp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new hp(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new hp(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=kl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(kl.fromNumber(r)));return 1===i.compare(xZ)&&(i=new kl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=XV(e),[r,i]=eF(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new KD(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const n=XV(e),[r,i]=eF(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class hp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,pp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fp(be.min(),i,new Ht($e),ci(),Ke())}}class pp{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pp(r,n,Ke(),Ke(),Ke())}}class Vy{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class tF{constructor(e,n){this.targetId=e,this.fe=n}}class nF{constructor(e,n,r=Gn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class rF{constructor(){this.ge=0,this.pe=sF(),this.ye=Gn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ke(),n=Ke(),r=Ke();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ye()}}),new pp(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=sF()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class OZ{constructor(e){this.Le=e,this.ke=new Map,this.qe=ci(),this.Qe=iF(),this.Ke=new Ht($e)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:ye()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(Ry(s))if(0===r){const o=new le(s.path);this.We(n,o,en.newNoDocument(o,be.min()))}else Ae(1===r);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=To(r).toUint8Array()}catch(u){if(u instanceof cV)return ai("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new KD(o,i,s)}catch(u){return ai(u instanceof hp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Ry(a.target)){const u=new le(a.target.path);null!==this.qe.get(u)||this.st(o,u)||this.We(o,u,en.newNoDocument(u,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Ke();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new fp(e,n,this.Ke,this.qe,r);return this.qe=ci(),this.Qe=iF(),this.Ke=new Ht($e),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new rF,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new kt($e),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new rF),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function iF(){return new Ht(le.comparator)}function sF(){return new Ht(le.comparator)}const kZ={asc:"ASCENDING",desc:"DESCENDING"},VZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FZ={and:"AND",or:"OR"};class LZ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function QD(t,e){return t.useProto3Json||Jf(e)?e:{value:e}}function Yl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UZ(t,e){return Yl(t,e.toTimestamp())}function Nn(t){return Ae(!!t),be.fromTimestamp(function(n){const r=va(n);return new sn(r.seconds,r.nanos)}(t))}function YD(t,e){return(r=t,new mt(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function aF(t){const e=mt.fromString(t);return Ae(mF(e)),e}function gp(t,e){return YD(t.databaseId,e.path)}function $s(t,e){const n=aF(e);if(n.get(1)!==t.databaseId.projectId)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(cF(n))}function JD(t,e){return YD(t.databaseId,e)}function uF(t){const e=aF(t);return 4===e.length?mt.emptyPath():cF(e)}function mp(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cF(t){return Ae(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function lF(t,e,n){return{name:gp(t,e),fields:n.value.mapValue.fields}}function dF(t,e,n){const r=$s(t,e.name),i=Nn(e.updateTime),s=e.createTime?Nn(e.createTime):be.min(),o=new gr({mapValue:{fields:e.fields}}),a=en.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function _p(t,e){let n;if(e instanceof Kl)n={update:lF(t,e.key,e.value)};else if(e instanceof Ql)n={delete:gp(t,e.key)};else if(e instanceof Ao)n={update:lF(t,e.key,e.data),updateMask:GZ(e.fieldMask)};else{if(!(e instanceof WD))return ye();n={verify:gp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Gl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Au)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zl)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ye()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:UZ(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ye()),n;var s}function XD(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?on.updateTime(Nn(s.updateTime)):void 0!==s.exists?on.exists(s.exists):on.none():on.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Ae("REQUEST_TIME"===a.setToServerValue),u=new Gl):"appendMissingElements"in a?u=new Au(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new bu(a.removeAllFromArray.values||[]):"increment"in a?u=new Zl(o,a.increment):ye();const l=Xt.fromServerFormat(a.fieldPath);return new lp(l,u)}(t,i)):[];var s;if(e.update){const i=$s(t,e.update.name),s=new gr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new ui((e.updateMask.fieldPaths||[]).map(h=>Xt.fromServerFormat(h)));return new Ao(i,s,o,n,r)}return new Kl(i,s,n,r)}if(e.delete){const i=$s(t,e.delete);return new Ql(i,n)}if(e.verify){const i=$s(t,e.verify);return new WD(i,n)}return ye()}function hF(t,e){return{documents:[JD(t,e.path)]}}function eC(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=JD(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=JD(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return gF(Mt.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(l=>{return{field:Ca((g=l).field),direction:zZ(g.dir)};var g})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=QD(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function fF(t){let e=uF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ae(1===r);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(g){const m=pF(g);return m instanceof Mt&&UD(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(m=>{return new ip(Jl((D=m).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let a=null;n.limit&&(a=function(g){let m;return m="object"==typeof g?g.value:g,Jf(m)?null:m}(n.limit));let u=null;var g;n.startAt&&(u=new Da((g=n.startAt).values||[],!!g.before));let l=null;return n.endAt&&(l=function(g){return new Da(g.values||[],!g.before)}(n.endAt)),SV(e,i,o,s,a,"F",u,l)}function pF(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Jl(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Jl(n.unaryFilter.field);return ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Jl(n.unaryFilter.field);return ht.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Jl(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(t):void 0!==t.fieldFilter?ht.create(Jl((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Mt.create(n.compositeFilter.filters.map(r=>pF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye()}}(n.compositeFilter.op))}(t):ye();var n}function zZ(t){return kZ[t]}function WZ(t){return VZ[t]}function qZ(t){return FZ[t]}function Ca(t){return{fieldPath:t.canonicalString()}}function Jl(t){return Xt.fromServerFormat(t.fieldPath)}function gF(t){return t instanceof ht?function(n){if("=="===n.op){if(hV(n.value))return{unaryFilter:{field:Ca(n.field),op:"IS_NAN"}};if(dV(n.value))return{unaryFilter:{field:Ca(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(hV(n.value))return{unaryFilter:{field:Ca(n.field),op:"IS_NOT_NAN"}};if(dV(n.value))return{unaryFilter:{field:Ca(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ca(n.field),op:WZ(n.op),value:n.value}}}(t):t instanceof Mt?function(n){const r=n.getFilters().map(i=>gF(i));return 1===r.length?r[0]:{compositeFilter:{op:qZ(n.op),filters:r}}}(t):ye()}function GZ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mF(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class bo{constructor(e,n,r,i,s=be.min(),o=be.min(),a=Gn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new bo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _F{constructor(e){this.ut=e}}function yF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Fy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:gp(s=t.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Yl(s,o.version.toTimestamp()),createTime:Yl(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Su(e.version)};else{if(!e.isUnknownDocument())return ye();r.unknownDocument={path:n.path.toArray(),version:Su(e.version)}}var s,o;return r}function Fy(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Su(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ru(t){const e=new sn(t.seconds,t.nanoseconds);return be.fromTimestamp(e)}function Pu(t,e){const n=(e.baseMutations||[]).map(s=>XD(t.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>XD(t.ut,s)),i=sn.fromMillis(e.localWriteTimeMs);return new qD(e.batchId,i,n,r)}function yp(t){const e=Ru(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Ru(t.lastLimboFreeSnapshotVersion):be.min();let r;return r=void 0!==t.query.documents?(Ae(1===(s=t.query).documents.length),Yr(zl(uF(s.documents[0])))):function(s){return Yr(fF(s))}(t.query),new bo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Gn.fromBase64String(t.resumeToken));var s}function vF(t,e){const n=Su(e.snapshotVersion),r=Su(e.lastLimboFreeSnapshotVersion);let i;i=Ry(e.target)?hF(t.ut,e.target):eC(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Cu(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function tC(t){const e=fF({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?My(e,e.limit,"L"):e}function nC(t,e){return new ZD(e.largestBatchId,XD(t.ut,e.overlayMutation))}function IF(t,e){const n=e.path.lastSegment();return[t,Ar(e.path.popLast()),n]}function EF(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Su(r.readTime),documentKey:Ar(r.documentKey.path),largestBatchId:r.largestBatchId}}class KZ{getBundleMetadata(e,n){return wF(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Ru(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return wF(e).put({bundleId:(i=n).id,createTime:Su(Nn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return TF(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:tC(s.bundledQuery),readTime:Ru(s.readTime)};var s})}saveNamedQuery(e,n){return TF(e).put({name:(i=n).name,readTime:Su(Nn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function wF(t){return sr(t,"bundles")}function TF(t){return sr(t,"namedQueries")}class Ly{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new Ly(e,n.uid||"")}getOverlay(e,n){return vp(e).get(IF(this.userId,n)).next(r=>r?nC(this.serializer,r):null)}getOverlays(e,n){const r=Bs();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new ZD(n,o);i.push(this.lt(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Ar(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(vp(e).H("collectionPathOverlayIndex",a))}),O.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Bs(),s=Ar(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return vp(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=nC(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Bs();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return vp(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{const g=nC(this.serializer,l);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):h.done()}).next(()=>s)}lt(e,n){return vp(e).put(function(i,s,o){const[a,u,l]=IF(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:_p(i.ut,o.mutation)}}(this.serializer,this.userId,n))}}function vp(t){return sr(t,"documentOverlays")}class Mu{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(wn(e.integerValue));else if("doubleValue"in e){const r=wn(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),Xf(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(To(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?fV(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):ye()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),le.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function QZ(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function DF(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=QZ(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}Mu.St=new Mu;class YZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=DF(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=DF(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class JZ{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class XZ{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Ip{constructor(){this.Wt=new YZ,this.Gt=new JZ(this.Wt),this.zt=new XZ(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Nu{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Nu(this.indexId,this.documentKey,this.arrayValue,r)}}function Aa(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=CF(t.arrayValue,e.arrayValue),0!==n?n:(n=CF(t.directionalValue,e.directionalValue),0!==n?n:le.comparator(t.documentKey,e.documentKey)))}function CF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class AF{constructor(e){this.Jt=new kt((n,r)=>Xt.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Ae(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=MD(e);if(void 0!==n&&!this.tn(n))return!1;const r=Eu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.nn(a,u)||!this.rn(this.Yt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],r[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new kt(Xt.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new wu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new wu(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new wu(r.field,"asc"===r.dir?0:1)));return new Ul(Ul.UNKNOWN_ID,this.collectionId,n,Bl.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function bF(t){var e,n;if(Ae(t instanceof ht||t instanceof Mt),t instanceof ht){if(t instanceof CV){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>ht.create(t.field,"==",s)))||[];return Mt.create(i,"or")}return t}const r=t.filters.map(i=>bF(i));return Mt.create(r,t.op)}function eK(t){if(0===t.getFilters().length)return[];const e=sC(bF(t));return Ae(SF(e)),rC(e)||iC(e)?[e]:e.getFilters()}function rC(t){return t instanceof ht}function iC(t){return t instanceof Mt&&UD(t)}function SF(t){return rC(t)||iC(t)||function(n){if(n instanceof Mt&&LD(n)){for(const r of n.getFilters())if(!rC(r)&&!iC(r))return!1;return!0}return!1}(t)}function sC(t){if(Ae(t instanceof ht||t instanceof Mt),t instanceof ht)return t;if(1===t.filters.length)return sC(t.filters[0]);const e=t.filters.map(r=>sC(r));let n=Mt.create(e,t.op);return n=Uy(n),SF(n)?n:(Ae(n instanceof Mt),Ae(Hl(n)),Ae(n.filters.length>1),n.filters.reduce((r,i)=>oC(r,i)))}function oC(t,e){let n;return Ae(t instanceof ht||t instanceof Mt),Ae(e instanceof ht||e instanceof Mt),n=t instanceof ht?e instanceof ht?Mt.create([t,e],"and"):RF(t,e):e instanceof ht?RF(e,t):function(i,s){if(Ae(i.filters.length>0&&s.filters.length>0),Hl(i)&&Hl(s))return wV(i,s.getFilters());const o=LD(i)?i:s,a=LD(i)?s:i,u=o.filters.map(l=>oC(l,a));return Mt.create(u,"or")}(t,e),Uy(n)}function RF(t,e){if(Hl(e))return wV(e,t.getFilters());{const n=e.filters.map(r=>oC(t,r));return Mt.create(n,"or")}}function Uy(t){if(Ae(t instanceof ht||t instanceof Mt),t instanceof ht)return t;const e=t.getFilters();if(1===e.length)return Uy(e[0]);if(IV(t))return t;const n=e.map(i=>Uy(i)),r=[];return n.forEach(i=>{i instanceof ht?r.push(i):i instanceof Mt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Mt.create(r,t.op)}class tK{constructor(){this.on=new aC}addToCollectionParentIndex(e,n){return this.on.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Ci.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class aC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new kt(mt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(mt.comparator)).toArray()}}const By=new Uint8Array(0);class nK{constructor(e,n){this.user=e,this.databaseId=n,this._n=new aC,this.an=new Co(r=>Cu(r),(r,i)=>sp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:r,parent:Ar(i)};return PF(e).put(s)}return O.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Gk(n),""],!1,!0);return PF(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Ls(o.parent))}return r})}addFieldIndex(e,n){const r=Ep(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=ed(e);return s.next(a=>{o.put(EF(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Ep(e),i=ed(e),s=Xl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Ep(e),r=Xl(e),i=ed(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return O.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new AF(r).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Xl(e);let i=!0;const s=new Map;return O.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ke();const a=[];return O.forEach(s,(u,l)=>{var z;ne("IndexedDbIndexManager",`Using index ${z=u,`id=${z.indexId}|cg=${z.collectionGroup}|f=${z.fields.map(se=>`${se.fieldPath}:${se.kind}`).join(",")}`} to execute ${Cu(n)}`);const h=function(z,se){const de=MD(se);if(void 0===de)return null;for(const Be of Py(z,de.fieldPath))switch(Be.op){case"array-contains-any":return Be.value.arrayValue.values||[];case"array-contains":return[Be.value]}return null}(l,u),g=function(z,se){const de=new Map;for(const Be of Eu(se))for(const At of Py(z,Be.fieldPath))switch(At.op){case"==":case"in":de.set(Be.fieldPath.canonicalString(),At.value);break;case"not-in":case"!=":return de.set(Be.fieldPath.canonicalString(),At.value),Array.from(de.values())}return null}(l,u),m=function(z,se){const de=[];let Be=!0;for(const At of Eu(se)){const _r=0===At.kind?AV(z,At.fieldPath,z.startAt):bV(z,At.fieldPath,z.startAt);de.push(_r.value),Be&&(Be=_r.inclusive)}return new Da(de,Be)}(l,u),y=function(z,se){const de=[];let Be=!0;for(const At of Eu(se)){const _r=0===At.kind?bV(z,At.fieldPath,z.endAt):AV(z,At.fieldPath,z.endAt);de.push(_r.value),Be&&(Be=_r.inclusive)}return new Da(de,Be)}(l,u),D=this.ln(u,l,m),b=this.ln(u,l,y),M=this.hn(u,l,g),U=this.Pn(u.indexId,h,D,m.inclusive,b,y.inclusive,M);return O.forEach(U,N=>r.j(N,n.limit).next(z=>{z.forEach(se=>{const de=le.fromSegments(se.documentKey);o.has(de)||(o=o.add(de),a.push(de))})}))}).next(()=>a)}return O.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:eK(Mt.create(e.filters,"and")).map(r=>$D(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){const u=(null!=n?n.length:1)*Math.max(r.length,s.length),l=u/(null!=n?n.length:1),h=[];for(let g=0;g<u;++g){const m=n?this.In(n[g/l]):By,y=this.Tn(e,m,r[g%l],i),D=this.En(e,m,s[g%l],o),b=a.map(M=>this.Tn(e,m,M,!0));h.push(...this.createRange(y,D,b))}return h}Tn(e,n,r,i){const s=new Nu(e,le.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){const s=new Nu(e,le.empty(),n,r);return i?s.Ht():s}cn(e,n){const r=new AF(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.un(n);return O.forEach(i,s=>this.cn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let l=new kt(Xt.comparator),h=!1;for(const g of u.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:l=l.add(m.field));for(const g of u.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new Ip;for(const i of Eu(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.jt(i.kind);Mu.St.ht(s,o)}return r.Ut()}In(e){const n=new Ip;return Mu.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new Ip;return Mu.St.ht(Du(this.databaseId,n),r.jt(function(s){const o=Eu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new Ip);let s=0;for(const o of Eu(e)){const a=r[s++];for(const u of i)if(this.Rn(n,o.fieldPath)&&np(a))i=this.Vn(i,o,a);else{const l=u.jt(o.kind);Mu.St.ht(a,l)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Ip;u.seed(a.Ut()),Mu.St.ht(o,u.jt(n.kind)),s.push(u)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof ht&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Ep(e),i=ed(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return O.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(h,g){const m=g?new Bl(g.sequenceNumber,new Ci(Ru(g.readTime),new le(Ls(g.documentKey)),g.largestBatchId)):Bl.empty(),y=h.fields.map(([D,b])=>new wu(Xt.fromServerFormat(D),b));return new Ul(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:$e(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Ep(e),s=ed(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,u=>s.put(EF(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,u=>this.gn(e,i,u).next(l=>{const h=this.pn(s,u);return l.isEqual(h)?O.resolve():this.yn(e,s,u,l,h)}))))})}wn(e,n,r,i){return Xl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return Xl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=Xl(e);let s=new kt(Aa);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new Nu(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new kt(Aa);const i=this.dn(n,e);if(null==i)return r;const s=MD(n);if(null!=s){const o=e.data.field(s.fieldPath);if(np(o))for(const a of o.arrayValue.values||[])r=r.add(new Nu(n.indexId,e.key,this.In(a),i))}else r=r.add(new Nu(n.indexId,e.key,By,i));return r}yn(e,n,r,i,s){ne("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,l,h,g,m){const y=u.getIterator(),D=l.getIterator();let b=$l(y),M=$l(D);for(;b||M;){let U=!1,N=!1;if(b&&M){const z=h(b,M);z<0?N=!0:z>0&&(U=!0)}else null!=b?N=!0:U=!0;U?(g(M),M=$l(D)):N?(m(b),b=$l(y)):(b=$l(y),M=$l(D))}}(i,s,Aa,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),O.waitFor(o)}fn(e){let n=1;return ed(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Aa(o,a)).filter((o,a,u)=>!a||0!==Aa(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Aa(o,e),u=Aa(o,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(o),i.push(o.Ht());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,By,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,By,[]]))}return s}bn(e,n){return Aa(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(MF)}getMinOffset(e,n){return O.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||ye())).next(MF)}}function PF(t){return sr(t,"collectionParents")}function Xl(t){return sr(t,"indexEntries")}function Ep(t){return sr(t,"indexConfiguration")}function ed(t){return sr(t,"indexState")}function MF(t){Ae(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;ND(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ci(e.readTime,e.documentKey,n)}const NF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class br{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new br(e,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xF(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:o},(h,g,m)=>(a++,m.delete()));s.push(u.next(()=>{Ae(1===a)}));const l=[];for(const h of n.mutations){const g=nV(e,h.key.path,n.batchId);s.push(i.delete(g)),l.push(h.key)}return O.waitFor(s).next(()=>l)}function $y(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ye();e=t.noDocument}return JSON.stringify(e).length}br.DEFAULT_COLLECTION_PERCENTILE=10,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,br.DEFAULT=new br(41943040,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),br.DISABLED=new br(-1,0,0);class jy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){Ae(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new jy(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ba(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=td(e),o=ba(e);return o.add({}).next(a=>{Ae("number"==typeof a);const u=new qD(a,n,r,i),l=function(y,D,b){const M=b.baseMutations.map(N=>_p(y.ut,N)),U=b.mutations.map(N=>_p(y.ut,N));return{userId:D,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:M,mutations:U}}(this.serializer,this.userId,u),h=[];let g=new kt((m,y)=>$e(m.canonicalString(),y.canonicalString()));for(const m of i){const y=nV(this.userId,m.key.path,a);g=g.add(m.key.path.popLast()),h.push(o.put(l)),h.push(s.put(y,z7))}return g.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),O.waitFor(h).next(()=>u)})}lookupMutationBatch(e,n){return ba(e).get(n).next(r=>r?(Ae(r.userId===this.userId),Pu(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?O.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ba(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Ae(a.batchId>=r),s=Pu(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ba(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ba(e).W("userMutationsIndex",n).next(r=>r.map(i=>Pu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=wy(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return td(e).Y({range:i},(o,a,u)=>{const[l,h,g]=o,m=Ls(h);if(l===this.userId&&n.path.isEqual(m))return ba(e).get(g).next(y=>{if(!y)throw ye();Ae(y.userId===this.userId),s.push(Pu(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt($e);const i=[];return n.forEach(s=>{const o=wy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=td(e).Y({range:a},(l,h,g)=>{const[m,y,D]=l,b=Ls(y);m===this.userId&&s.path.isEqual(b)?r=r.add(D):g.done()});i.push(u)}),O.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=wy(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new kt($e);return td(e).Y({range:o},(u,l,h)=>{const[g,m,y]=u,D=Ls(m);g===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):h.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ba(e).get(s).next(o=>{if(null===o)throw ye();Ae(o.userId===this.userId),r.push(Pu(this.serializer,o))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return xF(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return td(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Ls(s[1]);i.push(u)}else a.done()}).next(()=>{Ae(0===i.length)})})}containsKey(e,n){return OF(e,this.userId,n)}Mn(e){return kF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function OF(t,e,n){const r=wy(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return td(t).Y({range:s,J:!0},(a,u,l)=>{const[h,g,m]=a;h===e&&g===i&&(o=!0),l.done()}).next(()=>o)}function ba(t){return sr(t,"mutations")}function td(t){return sr(t,"documentMutations")}function kF(t){return sr(t,"mutationQueues")}class xu{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new xu(0)}static Nn(){return new xu(-1)}}class rK{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new xu(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>be.fromTimestamp(new sn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>nd(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Ae(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return nd(e).Y((o,a)=>{const u=yp(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>O.waitFor(s)).next(()=>i)}forEachTarget(e,n){return nd(e).Y((r,i)=>{const s=yp(i);n(s)})}Bn(e){return VF(e).get("targetGlobalKey").next(n=>(Ae(null!==n),n))}Ln(e,n){return VF(e).put("targetGlobalKey",n)}kn(e,n){return nd(e).put(vF(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Cu(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return nd(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=yp(a);sp(n,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Sa(e);return n.forEach(o=>{const a=Ar(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(i)}removeMatchingKeys(e,n,r){const i=Sa(e);return O.forEach(n,s=>{const o=Ar(s.path);return O.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Sa(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Sa(e);let s=Ke();return i.Y({range:r,J:!0},(o,a,u)=>{const l=Ls(o[1]),h=new le(l);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=Ar(n.path),i=IDBKeyRange.bound([r],[Gk(r)],!1,!0);let s=0;return Sa(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}_t(e,n){return nd(e).get(n).next(r=>r?yp(r):null)}}function nd(t){return sr(t,"targets")}function VF(t){return sr(t,"targetGlobal")}function Sa(t){return sr(t,"targetDocuments")}function FF([t,e],[n,r]){const i=$e(t,n);return 0===i?$e(e,r):i}class iK{constructor(e){this.Qn=e,this.buffer=new kt(FF),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();FF(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LF{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,G.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){_a(r)?ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ma(r)}yield n.Gn(3e5)}))}}class sK{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return O.resolve(Ai._e);const r=new iK(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(NF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NF):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),Fl()<=Os.in.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(l-u)+`ms\nTotal Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class oK{constructor(e,n){this.db=e,this.garbageCollector=function UF(t,e){return new sK(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Hy(e,r)}removeReference(e,n,r){return Hy(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Hy(e,n)}Xn(e,n){return function(i,s){let o=!1;return kF(i).Z(a=>OF(i,a,s).next(u=>(u&&(o=!0),O.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=n){const u=this.Xn(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,be.min()),Sa(e).delete([0,Ar(o.path)])))});i.push(u)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Hy(e,n)}Zn(e,n){const r=Sa(e);let i,s=Ai._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{0===o?(s!==Ai._e&&n(new le(Ls(i)),s),s=l,i=u):s=Ai._e}).next(()=>{s!==Ai._e&&n(new le(Ls(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hy(t,e){return Sa(t).put((i=t.currentSequenceNumber,{targetId:0,path:Ar(e.path),sequenceNumber:i}));var i}class BF{constructor(){this.changes=new Co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class aK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ou(e).put(r)}removeEntry(e,n,r){return Ou(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Fy(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=en.newInvalidDocument(n);return Ou(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(wp(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:en.newInvalidDocument(n)};return Ou(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(wp(n))},(i,s)=>{r={document:this.tr(n,s),size:$y(s)}}).next(()=>r)}getEntries(e,n){let r=ci();return this.rr(e,n,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=ci(),i=new Ht(le.comparator);return this.rr(e,n,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,$y(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return O.resolve();let i=new kt(zF);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(wp(i.first()),wp(i.last())),o=i.getIterator();let a=o.getNext();return Ou(e).Y({index:"documentKeyIndex",range:s},(u,l,h)=>{const g=le.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&zF(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.U(wp(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Fy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ou(e).W(IDBKeyRange.bound(a,u,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let h=ci();for(const g of l){const m=this.tr(le.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(ap(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=ci();const o=HF(n,r),a=HF(n,Ci.max());return Ou(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,h)=>{const g=this.tr(le.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(g.key,g),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new uK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return jF(e).get("remoteDocumentGlobalKey").next(n=>(Ae(!!n),n))}er(e,n){return jF(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function ZZ(t,e){let n;if(e.document)n=dF(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),i=Ru(e.noDocument.readTime);n=en.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye();{const r=le.fromSegments(e.unknownDocument.path),i=Ru(e.unknownDocument.version);n=en.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new sn(i[0],i[1]);return be.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(be.min()))return r}return en.newInvalidDocument(e)}}function $F(t){return new aK(t)}class uK extends BF{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Co(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new kt((s,o)=>$e(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=yF(this._r.serializer,o);i=i.add(s.path.popLast());const l=$y(u);r+=l-a.size,n.push(this._r.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=yF(this._r.serializer,o.convertToNoDocument(be.min()));n.push(this._r.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function jF(t){return sr(t,"remoteDocumentGlobal")}function Ou(t){return sr(t,"remoteDocumentsV14")}function wp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function HF(t,e){const n=e.documentKey.path.toArray();return[t,Fy(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function zF(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=$e(n[s],r[s]),i)return i;return i=$e(n.length,r.length),i||(i=$e(n[n.length-2],r[r.length-2]),i||$e(n[n.length-1],r[r.length-1]))}class cK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class WF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&dp(r.mutation,i,ui.empty(),sn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ke()){const i=Bs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=up();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Bs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ke()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ci();const o=cp(),a=cp();return n.forEach((u,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof Ao)?s=s.insert(l.key,l):void 0!==h?(o.set(l.key,h.mutation.getFieldMask()),dp(h.mutation,l,h.mutation.getFieldMask(),sn.now())):o.set(l.key,ui.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var g;return a.set(l,new cK(h,null!==(g=o.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=cp();let i=new Ht((o,a)=>o-a),s=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(null===l)return;let h=r.get(u)||ui.empty();h=a.applyToLocalView(l,h),r.set(u,h);const g=(i.get(a.batchId)||Ke()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,h=u.value,g=VV();h.forEach(m=>{if(!s.has(m)){const y=WV(n.get(m),r.get(m));null!==y&&g.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,g))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return le.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):jD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(Bs());let a=-1,u=s;return o.next(l=>O.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,Ke())).next(h=>({batchId:a,changes:kV(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=up();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=up();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,u=>{const l=(g=n,m=u.child(s),new Do(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,m;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const h=l.getKey();null===o.get(h)&&(o=o.insert(h,en.newInvalidDocument(h)))});let a=up();return o.forEach((u,l)=>{const h=s.get(u);void 0!==h&&dp(h.mutation,l,ui.empty(),sn.now()),ap(n,l)&&(a=a.insert(u,l))}),a})}}class lK{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return O.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:Nn(i.createTime)}),O.resolve();var i}getNamedQuery(e,n){return O.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:tC(i.bundledQuery),readTime:Nn(i.readTime)}),O.resolve();var i}}class dK{constructor(){this.overlays=new Ht(le.comparator),this.lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Bs();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=Bs(),s=n.length+1,o=new le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ht((l,h)=>l-h);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);null===h&&(h=Bs(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Bs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ZD(n,r));let s=this.lr.get(n);void 0===s&&(s=Ke(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}class uC{constructor(){this.hr=new kt(or.Pr),this.Ir=new kt(or.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new or(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new or(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new le(new mt([])),r=new or(n,e),i=new or(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new le(new mt([])),r=new or(n,e),i=new or(n,e+1);let s=Ke();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new or(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class or{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return le.comparator(e.key,n.key)||$e(e.gr,n.gr)}static Tr(e,n){return $e(e.gr,n.gr)||le.comparator(e.key,n.key)}}class hK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new kt(or.Pr)}checkEmpty(e){return O.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++;const o=new qD(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new or(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new or(n,0),i=new or(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt($e);return n.forEach(i=>{const s=new or(i,0),o=new or(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),O.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;le.isDocumentKey(s)||(s=s.child(""));const o=new or(new le(s),0);let a=new kt($e);return this.yr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.gr)),!0)},o),O.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Ae(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return O.forEach(n.mutations,i=>{const s=new or(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new or(n,0),i=this.yr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return O.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class fK{constructor(e){this.Cr=e,this.docs=new Ht(le.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let r=ci();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():en.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ci();const o=n.path,a=new le(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||ND(Kk(h),r)<=0||(i.has(h.key)||ap(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ye()}vr(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pK(this)}getSize(e){return O.resolve(this.size)}}class pK extends BF{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class gK{constructor(e){this.persistence=e,this.Fr=new Co(n=>Cu(n),sp),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Mr=0,this.Or=new uC,this.targetCount=0,this.Nr=xu.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),O.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new xu(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.kn(n),O.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Or.containsKey(n))}}class cC{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Ai(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new gK(this),this.indexManager=new tK,this.remoteDocumentCache=new fK(r=>this.referenceDelegate.Qr(r)),this.serializer=new _F(n),this.Kr=new lK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new hK(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new mK(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class mK extends Yk{constructor(e){super(),this.currentSequenceNumber=e}}class zy{constructor(e){this.persistence=e,this.Gr=new uC,this.zr=null}static jr(e){return new zy(e)}get Hr(){if(this.zr)return this.zr;throw ye()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Hr,r=>{const i=le.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,be.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return O.or([()=>O.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class _K{constructor(e){this.serializer=e}N(e,n,r,i){const s=new Ey("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tV,{unique:!0}),u.createObjectStore("documentMutations"),qF(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=O.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),qF(e)),o=o.next(()=>function(u){const l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,l){return l.store("mutations").W().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tV,{unique:!0});const g=l.store("mutations"),m=h.map(y=>g.put(y));return O.waitFor(m)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:nZ});l.createIndex("collectionPathOverlayIndex",rZ,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",iZ,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:W7});l.createIndex("documentKeyIndex",q7),l.createIndex("collectionGroupIndex",G7)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:J7}).createIndex("sequenceNumberIndex",X7,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:eZ}).createIndex("documentKeyIndex",tZ,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=$y(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>O.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>O.forEach(a,u=>{Ae(u.userId===s.userId);const l=Pu(this.serializer,u);return xF(e,s.userId,l).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const u=new mt(o),l=[0,Ar(u)];s.push(n.get(l).next(h=>h?O.resolve():n.put({targetId:0,path:Ar(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>O.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:Y7});const r=n.store("collectionParents"),i=new aC,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Ar(u)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const u=new mt(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,u],l)=>{const h=Ls(a);return s(h.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const s=yp(i),o=vF(this.serializer,s);return n.put(o)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(g=o,g.document?new le(mt.fromString(g.document.name).popFirst(5)):g.noDocument?le.fromSegments(g.noDocument.path):g.unknownDocument?le.fromSegments(g.unknownDocument.path):ye()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(l))}).next(()=>O.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=$F(this.serializer),s=new cC(zy.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var l;let h=null!==(l=a.get(u.userId))&&void 0!==l?l:Ke();Pu(this.serializer,u).keys().forEach(g=>h=h.add(g)),a.set(u.userId,h)}),O.forEach(a,(u,l)=>{const h=new ir(l),g=Ly.ct(this.serializer,h),m=s.getIndexManager(h),y=jy.ct(h,this.serializer,m,s.referenceDelegate);return new WF(i,y,g,m).recalculateAndSaveOverlaysForDocumentKeys(new kD(n,Ai._e),u).next()})})}}function qF(t){t.createObjectStore("targetDocuments",{keyPath:K7}).createIndex("documentTargetsIndex",Q7,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Z7,{unique:!0}),t.createObjectStore("targetGlobal")}const lC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dC{constructor(e,n,r,i,s,o,a,u,l,h,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=l,this._i=h,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=m=>Promise.resolve(),!dC.D())throw new J(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oK(this,i),this.Ii=n+"main",this.serializer=new _F(u),this.Ti=new hs(this.Ii,this.ai,new _K(this.serializer)),this.qr=new rK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$F(this.serializer),this.Kr=new KZ,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===h&&Mn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(B.FAILED_PRECONDITION,lC);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Ai(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,G.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,G.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,G.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(_a(e))return ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Tp(e).get("owner").next(n=>O.resolve(this.wi(n)))}Si(e){return qy(e).delete(this.clientId)}bi(){var e=this;return(0,G.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=sr(r,"clientMetadata");return i.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return O.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?O.resolve(!0):Tp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new J(B.FAILED_PRECONDITION,lC);return!1}}return!(!this.networkEnabled||!this.inForeground)||qy(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ne("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,G.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new kD(n,Ai._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>qy(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return jy.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nK(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Ly.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){ne("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(u=this.ai)?oZ:14===u?sV:13===u?iV:12===u?sZ:11===u?rV:void ye();var u;let o;return this.Ti.runTransaction(e,i,s,a=>(o=new kD(a,this.Lr?this.Lr.next():Ai._e),"readwrite-primary"===n?this.fi(o).next(u=>!!u||this.gi(o)).next(u=>{if(!u)throw Mn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new J(B.FAILED_PRECONDITION,Qk);return r(o)}).next(u=>this.yi(o).next(()=>u)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return Tp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(B.FAILED_PRECONDITION,lC)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tp(e).put("owner",n)}static D(){return hs.D()}pi(e){const n=Tp(e);return n.get("owner").next(r=>this.wi(r)?(ne("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):O.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(Mn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,Ot.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Mn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Tp(t){return sr(t,"owner")}function qy(t){return sr(t,"clientMetadata")}function hC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class fC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Ke(),i=Ke();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new fC(e,n.fromCache,r,i)}}class yK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class GF{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new yK;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Fl()<=Os.in.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",ql(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),O.resolve()):(Fl()<=Os.in.DEBUG&&ne("QueryEngine","Query:",ql(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Fl()<=Os.in.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",ql(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yr(n))):O.resolve())}zi(e,n){if(RV(n))return O.resolve(null);let r=Yr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=My(n,null,"F"),r=Yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ke(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Yi(n,a);return this.Zi(n,l,o,u.readTime)?this.zi(e,My(n,null,"F")):this.Xi(e,l,n,u)}))})))}ji(e,n,r,i){return RV(n)||i.isEqual(be.min())?O.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?O.resolve(null):(Fl()<=Os.in.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ql(n)),this.Xi(e,o,n,Zk(i,-1)).next(a=>a))})}Yi(e,n){let r=new kt(xV(e));return n.forEach((i,s)=>{ap(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return Fl()<=Os.in.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",ql(n)),this.Gi.getDocumentsMatchingQuery(e,n,Ci.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class vK{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Ht($e),this.ns=new Co(s=>Cu(s),sp),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WF(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function ZF(t,e,n,r){return new vK(t,e,n,r)}function KF(t,e){return pC.apply(this,arguments)}function pC(){return pC=(0,G.Z)(function*(t,e){const n=ae(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Ke();for(const l of i){o.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of s){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({_s:l,removedBatchIds:o,addedBatchIds:a}))})})}),pC.apply(this,arguments)}function QF(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function YF(t,e,n){let r=Ke(),i=Ke();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ci();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(be.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{us:o,cs:i}})}function wK(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rd(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new bo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function id(t,e,n){return gC.apply(this,arguments)}function gC(){return gC=(0,G.Z)(function*(t,e,n){const r=ae(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!_a(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),gC.apply(this,arguments)}function Gy(t,e,n){const r=ae(t);let i=be.min(),s=Ke();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){const g=ae(u),m=g.ns.get(h);return void 0!==m?O.resolve(g.ts.get(m)):g.qr.getTargetData(l,h)}(r,o,Yr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:be.min(),n?s:Ke())).next(a=>(eL(r,NV(e),a),{documents:a,ls:s})))}function JF(t,e){const n=ae(t),r=ae(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function XF(t,e){const n=ae(t),r=n.rs.get(e)||be.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,Zk(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(eL(n,e,i),i))}function eL(t,e,n){let r=t.rs.get(e)||be.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function mC(){return mC=(0,G.Z)(function*(t,e,n,r){const i=ae(t);let s=Ke(),o=ci();for(const l of n){const h=e.hs(l.metadata.name);l.document&&(s=s.add(h));const g=e.Ps(l);g.setReadTime(e.Is(l.metadata.readTime)),o=o.insert(h,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield rd(i,(h=r,Yr(zl(mt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>YF(l,a,o).next(h=>(a.apply(l),h)).next(h=>i.qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.qr.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.us,h.cs)).next(()=>h.us)))}),mC.apply(this,arguments)}function DK(t,e){return _C.apply(this,arguments)}function _C(){return _C=(0,G.Z)(function*(t,e,n=Ke()){const r=yield rd(t,Yr(tC(e.bundledQuery))),i=ae(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Nn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(Gn.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}),_C.apply(this,arguments)}function tL(t,e){return`firestore_clients_${t}_${e}`}function nL(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function yC(t,e){return`firestore_targets_${t}_${e}`}class Zy{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new J(i.error.code,i.error.message))),o?new Zy(e,n,i.state,s):(Mn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new J(r.error.code,r.error.message))),s?new Dp(e,r.state,i):(Mn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ky{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=zD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Xk(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Ky(e,s):(Mn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class vC{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new vC(n.clientId,n.onlineState):(Mn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class IC{constructor(){this.activeTargetIds=zD()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EC{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Ht($e),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=tL(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new IC),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,G.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const s=e.getItem(tL(e.persistenceKey,i));if(s){const o=Ky.Ts(i,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(yC(this.persistenceKey,e));if(r){const i=Dp.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yC(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ne("SharedClientState","READ",e,n),n}setItem(e,n){ne("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void Mn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,G.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(o){let a=Ai._e;if(null!=o)try{const u=JSON.parse(o);Ae("number"==typeof u),a=u}catch(u){Mn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Ai._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Js(s)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new Zy(this.currentUser,e,n,r),s=nL(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const n=nL(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=yC(this.persistenceKey,e),s=new Dp(e,n,r);this.setItem(i,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return Ky.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return Zy.Ts(new ir(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Dp.Ts(i,n)}Ms(e){return vC.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,G.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=zD();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class rL{constructor(){this.eo=new IC,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new IC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class CK{ro(e){}shutdown(){}}class iL{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Qy=null;function wC(){return null===Qy?Qy=268435456+Math.round(2147483648*Math.random()):Qy++,"0x"+Qy.toString(16)}const AK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bK{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Sr="WebChannelConnection";class SK extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=wC(),u=this.So(n,r);ne("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,s,o),this.Do(n,u,l,i).then(h=>(ne("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ai("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+Vl,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){return`${this.mo}/v1/${r}:${AK[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=wC();return new Promise((o,a)=>{const u=new C7;u.setWithCredentials(!0),u.listenOnce(w7.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case RD.NO_ERROR:const h=u.getResponseJson();ne(Sr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case RD.TIMEOUT:ne(Sr,`RPC '${e}' ${s} timed out`),a(new J(B.DEADLINE_EXCEEDED,"Request time out"));break;case RD.HTTP_ERROR:const g=u.getStatus();if(ne(Sr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const D=function(M){const U=M.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(U)>=0?U:B.UNKNOWN}(y.status);a(new J(D,y.message))}else a(new J(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new J(B.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{ne(Sr,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);ne(Sr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}vo(e,n,r){const i=wC(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=I7(),a=E7(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new D7({})),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");ne(Sr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);let m=!1,y=!1;const D=new bK({co:M=>{y?ne(Sr,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(ne(Sr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),ne(Sr,`RPC '${e}' stream ${i} sending:`,M),g.send(M))},lo:()=>g.close()}),b=(M,U,N)=>{M.listen(U,z=>{try{N(z)}catch(se){setTimeout(()=>{throw se},0)}})};return b(g,Iy.EventType.OPEN,()=>{y||ne(Sr,`RPC '${e}' stream ${i} transport opened.`)}),b(g,Iy.EventType.CLOSE,()=>{y||(y=!0,ne(Sr,`RPC '${e}' stream ${i} transport closed`),D.Ro())}),b(g,Iy.EventType.ERROR,M=>{y||(y=!0,ai(Sr,`RPC '${e}' stream ${i} transport errored:`,M),D.Ro(new J(B.UNAVAILABLE,"The operation could not be completed")))}),b(g,Iy.EventType.MESSAGE,M=>{var U;if(!y){const N=M.data[0];Ae(!!N);const se=N.error||(null===(U=N[0])||void 0===U?void 0:U.error);if(se){ne(Sr,`RPC '${e}' stream ${i} received error:`,se);const de=se.status;let Be=function($p){const yv=Vn[$p];if(void 0!==yv)return YV(yv)}(de),At=se.message;void 0===Be&&(Be=B.INTERNAL,At="Unknown error status: "+de+" with message "+se.message),y=!0,D.Ro(new J(Be,At)),g.close()}else ne(Sr,`RPC '${e}' stream ${i} received:`,N),D.Vo(N)}}),b(a,T7.STAT_EVENT,M=>{M.stat===jk.PROXY?ne(Sr,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===jk.NOPROXY&&ne(Sr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.Ao()},0),D}}function sL(){return typeof window<"u"?window:null}function Yy(){return typeof document<"u"?document:null}function Cp(t){return new LZ(t,!0)}class TC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class oL{constructor(e,n,r,i,s,o,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new TC(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,G.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,G.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,G.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Mn(n.toString()),Mn("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===B.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new J(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,G.Z)(function*(){e.state=0,e.start()}))}o_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RK extends oL{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function $Z(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:ye(),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ae(void 0===h||"string"==typeof h),Gn.fromBase64String(h||"")):(Ae(void 0===h||h instanceof Uint8Array),Gn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const h=void 0===l.code?B.UNKNOWN:YV(l.code);return new J(h,l.message||"")}(o);n=new nF(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=$s(t,r.document.name),s=Nn(r.document.updateTime),o=r.document.createTime?Nn(r.document.createTime):be.min(),a=new gr({mapValue:{fields:r.document.fields}}),u=en.newFoundDocument(i,s,o,a);n=new Vy(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=$s(t,r.document),s=r.readTime?Nn(r.readTime):be.min(),o=en.newNoDocument(i,s);n=new Vy([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=$s(t,r.document);n=new Vy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ye();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new NZ(i,s);n=new tF(r.targetId,o)}}var l;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return be.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?be.min():o.readTime?Nn(o.readTime):be.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=mp(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Ry(u)?{documents:hF(s,u)}:{query:eC(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=oF(s,o.resumeToken);const l=QD(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(be.min())>0){a.readTime=Yl(s,o.snapshotVersion.toTimestamp());const l=QD(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function HZ(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=mp(this.serializer),n.removeTarget=e,this.e_(n)}}class PK extends oL{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function jZ(t,e){return t&&t.length>0?(Ae(void 0!==e),t.map(n=>function(i,s){let o=Nn(i.updateTime?i.updateTime:s);return o.isEqual(be.min())&&(o=Nn(s)),new SZ(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.I_(r,n)}return Ae(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=mp(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_p(this.serializer,r))};this.e_(n)}}class MK extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(B.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(B.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class xK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Mn(n),this.f_=!1):ne("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class OK{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget((0,G.Z)(function*(){var u;Ra(o)&&(ne("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,G.Z)(function*(h){const g=ae(h);g.C_.add(4),yield sd(g),g.M_.set("Unknown"),g.C_.delete(4),yield Ap(g)}),function l(h){return u.apply(this,arguments)})(o))}))}),this.M_=new xK(r,i)}}function Ap(t){return CC.apply(this,arguments)}function CC(){return CC=(0,G.Z)(function*(t){if(Ra(t))for(const e of t.v_)yield e(!0)}),CC.apply(this,arguments)}function sd(t){return AC.apply(this,arguments)}function AC(){return AC=(0,G.Z)(function*(t){for(const e of t.v_)yield e(!1)}),AC.apply(this,arguments)}function Jy(t,e){const n=ae(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),RC(n)?SC(n):ad(n).Ho()&&bC(n,e))}function bp(t,e){const n=ae(t),r=ad(n);n.D_.delete(e),r.Ho()&&aL(n,e),0===n.D_.size&&(r.Ho()?r.Zo():Ra(n)&&n.M_.set("Unknown"))}function bC(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ad(t).u_(e)}function aL(t,e){t.x_.Oe(e),ad(t).c_(e)}function SC(t){t.x_=new OZ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ad(t).start(),t.M_.g_()}function RC(t){return Ra(t)&&!ad(t).jo()&&t.D_.size>0}function Ra(t){return 0===ae(t).C_.size}function uL(t){t.x_=void 0}function kK(t){return PC.apply(this,arguments)}function PC(){return PC=(0,G.Z)(function*(t){t.D_.forEach((e,n)=>{bC(t,e)})}),PC.apply(this,arguments)}function VK(t,e){return MC.apply(this,arguments)}function MC(){return MC=(0,G.Z)(function*(t,e){uL(t),RC(t)?(t.M_.w_(e),SC(t)):t.M_.set("Unknown")}),MC.apply(this,arguments)}function FK(t,e,n){return NC.apply(this,arguments)}function NC(){return NC=(0,G.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof nF&&2===e.state&&e.cause)try{yield(r=(0,G.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.D_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.D_.delete(u),s.x_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Xy(t,r)}else if(e instanceof Vy?t.x_.$e(e):e instanceof tF?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(be.min()))try{const r=yield QF(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.D_.get(l);h&&s.D_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const h=s.D_.get(u);if(!h)return;s.D_.set(u,h.withResumeToken(Gn.EMPTY_BYTE_STRING,h.snapshotVersion)),aL(s,u);const g=new bo(h.target,u,l,h.sequenceNumber);bC(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),yield Xy(t,r)}var r}),NC.apply(this,arguments)}function Xy(t,e,n){return xC.apply(this,arguments)}function xC(){return xC=(0,G.Z)(function*(t,e,n){if(!_a(e))throw e;t.C_.add(1),yield sd(t),t.M_.set("Offline"),n||(n=()=>QF(t.localStore)),t.asyncQueue.enqueueRetryable((0,G.Z)(function*(){ne("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Ap(t)}))}),xC.apply(this,arguments)}function cL(t,e){return e().catch(n=>Xy(t,n,e))}function od(t){return OC.apply(this,arguments)}function OC(){return OC=(0,G.Z)(function*(t){const e=ae(t),n=Pa(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;LK(e);)try{const i=yield wK(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,UK(e,i)}catch(i){yield Xy(e,i)}lL(e)&&dL(e)}),OC.apply(this,arguments)}function LK(t){return Ra(t)&&t.b_.length<10}function UK(t,e){t.b_.push(e);const n=Pa(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function lL(t){return Ra(t)&&!Pa(t).jo()&&t.b_.length>0}function dL(t){Pa(t).start()}function BK(t){return kC.apply(this,arguments)}function kC(){return kC=(0,G.Z)(function*(t){Pa(t).E_()}),kC.apply(this,arguments)}function $K(t){return VC.apply(this,arguments)}function VC(){return VC=(0,G.Z)(function*(t){const e=Pa(t);for(const n of t.b_)e.P_(n.mutations)}),VC.apply(this,arguments)}function jK(t,e,n){return FC.apply(this,arguments)}function FC(){return FC=(0,G.Z)(function*(t,e,n){const r=t.b_.shift(),i=GD.from(r,e,n);yield cL(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield od(t)}),FC.apply(this,arguments)}function HK(t,e){return LC.apply(this,arguments)}function LC(){return LC=(0,G.Z)(function*(t,e){var n;e&&Pa(t).h_&&(yield(n=(0,G.Z)(function*(i,s){if(QV(a=s.code)&&a!==B.ABORTED){const o=i.b_.shift();Pa(i).Yo(),yield cL(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield od(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),lL(t)&&dL(t)}),LC.apply(this,arguments)}function hL(t,e){return UC.apply(this,arguments)}function UC(){return UC=(0,G.Z)(function*(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=Ra(n);n.C_.add(3),yield sd(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Ap(n)}),UC.apply(this,arguments)}function BC(t,e){return $C.apply(this,arguments)}function $C(){return $C=(0,G.Z)(function*(t,e){const n=ae(t);e?(n.C_.delete(2),yield Ap(n)):e||(n.C_.add(2),yield sd(n),n.M_.set("Unknown"))}),$C.apply(this,arguments)}function ad(t){return t.O_||(t.O_=function(n,r,i){const s=ae(n);return s.A_(),new RK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:kK.bind(null,t),Io:VK.bind(null,t),a_:FK.bind(null,t)}),t.v_.push(function(){var e=(0,G.Z)(function*(n){n?(t.O_.Yo(),RC(t)?SC(t):t.M_.set("Unknown")):(yield t.O_.stop(),uL(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function Pa(t){return t.N_||(t.N_=function(n,r,i){const s=ae(n);return s.A_(),new PK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:BK.bind(null,t),Io:HK.bind(null,t),T_:$K.bind(null,t),I_:jK.bind(null,t)}),t.v_.push(function(){var e=(0,G.Z)(function*(n){n?(t.N_.Yo(),yield od(t)):(yield t.N_.stop(),t.b_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class jC{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new jC(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new J(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ud(t,e){if(Mn("AsyncQueue",`${e}: ${t}`),_a(t))return new J(B.UNAVAILABLE,`${e}: ${t}`);throw t}class cd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=up(),this.sortedSet=new Ht(this.comparator)}static emptySet(e){return new cd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new cd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class fL{constructor(){this.B_=new Ht(le.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):ye():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ld{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ld(e,n,cd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&op(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class zK{constructor(){this.k_=void 0,this.listeners=[]}}class WK{constructor(){this.queries=new Co(e=>MV(e),op),this.onlineState="Unknown",this.q_=new Set}}function HC(t,e){return zC.apply(this,arguments)}function zC(){return zC=(0,G.Z)(function*(t,e){const n=ae(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new zK),i)try{s.k_=yield n.onListen(r)}catch(o){const a=ud(o,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&GC(n)}),zC.apply(this,arguments)}function WC(t,e){return qC.apply(this,arguments)}function qC(){return qC=(0,G.Z)(function*(t,e){const n=ae(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),qC.apply(this,arguments)}function qK(t,e){const n=ae(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&GC(n)}function GK(t,e,n){const r=ae(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function GC(t){t.q_.forEach(e=>{e.next()})}class ZC{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ld(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=ld.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class ZK{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class pL{constructor(e){this.serializer=e}hs(e){return $s(this.serializer,e)}Ps(e){return e.metadata.exists?dF(this.serializer,e.document,!1):en.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Nn(e)}}class KK{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gL(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=mt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new pL(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Ke()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,G.Z)(function*(){const n=yield function TK(t,e,n,r){return mC.apply(this,arguments)}(e.localStore,new pL(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield DK(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function gL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class mL{constructor(e){this.key=e}}class _L{constructor(e){this.key=e}}class yL{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Ke(),this.mutatedKeys=Ke(),this._a=xV(e),this.aa=new cd(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new fL,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const m=i.get(h),y=ap(this.query,g)?g:null,D=!!m&&this.mutatedKeys.has(m.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?D!==b&&(r.track({type:3,doc:y}),M=!0):this.ha(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this._a(y,u)>0||l&&this._a(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(o=o.add(y),s=b?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((l,h)=>function(m,y){const D=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return D(m)-D(y)}(l.type,h.type)||this._a(l.doc,h.doc)),this.Pa(r);const o=n?this.Ia():[],a=0===this.oa.size&&this.current?1:0,u=a!==this.sa;return this.sa=a,0!==s.length||u?{snapshot:new ld(this.query,e.aa,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new fL,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Ke(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new _L(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new mL(r))}),n}da(e){this.ia=e.ls,this.oa=Ke();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return ld.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class QK{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class YK{constructor(e){this.key=e,this.Ra=!1}}class JK{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Co(a=>MV(a),op),this.fa=new Map,this.ga=new Set,this.pa=new Ht(le.comparator),this.ya=new Map,this.wa=new uC,this.Sa={},this.ba=new Map,this.Da=xu.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function XK(t,e){return KC.apply(this,arguments)}function KC(){return KC=(0,G.Z)(function*(t,e){const n=yA(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=yield rd(n.localStore,Yr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield QC(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&Jy(n.remoteStore,o)}return i}),KC.apply(this,arguments)}function QC(t,e,n,r,i){return YC.apply(this,arguments)}function YC(){return YC=(0,G.Z)(function*(t,e,n,r,i){t.va=(g,m,y)=>{return(D=(0,G.Z)(function*(M,U,N,z){let se=U.view.ca(N);se.Zi&&(se=yield Gy(M.localStore,U.query,!1).then(({documents:At})=>U.view.ca(At,se)));const de=z&&z.targetChanges.get(U.targetId),Be=U.view.applyChanges(se,M.isPrimaryClient,de);return aA(M,U.targetId,Be.Ta),Be.snapshot}),function b(M,U,N,z){return D.apply(this,arguments)})(t,g,m,y);var D};const s=yield Gy(t.localStore,e,!0),o=new yL(e,s.ls),a=o.ca(s.documents),u=pp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),l=o.applyChanges(a,t.isPrimaryClient,u);aA(t,n,l.Ta);const h=new QK(e,n,o);return t.ma.set(e,h),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),l.snapshot}),YC.apply(this,arguments)}function eQ(t,e){return JC.apply(this,arguments)}function JC(){return JC=(0,G.Z)(function*(t,e){const n=ae(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!op(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield id(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),bp(n.remoteStore,r.targetId),dd(n,r.targetId)}).catch(ma))):(dd(n,r.targetId),yield id(n.localStore,r.targetId,!0))}),JC.apply(this,arguments)}function XC(){return XC=(0,G.Z)(function*(t,e,n){const r=vA(t);try{const i=yield function(o,a){const u=ae(o),l=sn.now(),h=a.reduce((y,D)=>y.add(D.key),Ke());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=ci(),b=Ke();return u.ss.getEntries(y,h).next(M=>{D=M,D.forEach((U,N)=>{N.isValidDocument()||(b=b.add(U))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(M=>{g=M;const U=[];for(const N of a){const z=PZ(N,g.get(N.key).overlayedDocument);null!=z&&U.push(new Ao(N.key,z,mV(z.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,U,a)}).next(M=>{m=M;const U=M.applyToLocalDocumentSet(g,b);return u.documentOverlayCache.saveOverlays(y,M.batchId,U)})}).then(()=>({batchId:m.batchId,changes:kV(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Sa[o.currentUser.toKey()];l||(l=new Ht($e)),l=l.insert(a,u),o.Sa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield So(r,i.changes),yield od(r.remoteStore)}catch(i){const s=ud(i,"Failed to persist write");n.reject(s)}}),XC.apply(this,arguments)}function vL(t,e){return eA.apply(this,arguments)}function eA(){return eA=(0,G.Z)(function*(t,e){const n=ae(t);try{const r=yield function EK(t,e){const n=ae(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((h,g)=>{const m=i.get(g);if(!m)return;a.push(n.qr.removeMatchingKeys(s,h.removedDocuments,g).next(()=>n.qr.addMatchingKeys(s,h.addedDocuments,g)));let y=m.withSequenceNumber(s.currentSequenceNumber);var b,M,U;null!==e.targetMismatches.get(g)?y=y.withResumeToken(Gn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(g,y),M=y,U=h,(0===(b=m).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8||U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(s,y))});let u=ci(),l=Ke();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(YF(s,o,e.documentUpdates).next(h=>{u=h.us,l=h.cs})),!r.isEqual(be.min())){const h=n.qr.getLastRemoteSnapshotVersion(s).next(g=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ts=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Ae(o.Ra):i.removedDocuments.size>0&&(Ae(o.Ra),o.Ra=!1))}),yield So(n,r,e)}catch(r){yield ma(r)}}),eA.apply(this,arguments)}function IL(t,e,n){const r=ae(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=ae(o);u.onlineState=a;let l=!1;u.queries.forEach((h,g)=>{for(const m of g.listeners)m.Q_(a)&&(l=!0)}),l&&GC(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nQ(t,e,n){return tA.apply(this,arguments)}function tA(){return tA=(0,G.Z)(function*(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new Ht(le.comparator);o=o.insert(s,en.newNoDocument(s,be.min()));const a=Ke().add(s),u=new fp(be.min(),new Map,new Ht($e),o,a);yield vL(r,u),r.pa=r.pa.remove(s),r.ya.delete(e),uA(r)}else yield id(r.localStore,e,!1).then(()=>dd(r,e,n)).catch(ma)}),tA.apply(this,arguments)}function rQ(t,e){return nA.apply(this,arguments)}function nA(){return nA=(0,G.Z)(function*(t,e){const n=ae(t),r=e.batch.batchId;try{const i=yield function IK(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){const g=l.batch,m=g.keys();let y=O.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(b=>{const M=l.docVersions.get(D);Ae(null!==M),b.version.compareTo(M)<0&&(g.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),h.addEntry(b)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ke();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);oA(n,r,null),sA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield So(n,i)}catch(i){yield ma(i)}}),nA.apply(this,arguments)}function iQ(t,e,n){return rA.apply(this,arguments)}function rA(){return rA=(0,G.Z)(function*(t,e,n){const r=ae(t);try{const i=yield function(o,a){const u=ae(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(g=>(Ae(null!==g),h=g.keys(),u.mutationQueue.removeMutationBatch(l,g))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);oA(r,e,n),sA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield So(r,i)}catch(i){yield ma(i)}}),rA.apply(this,arguments)}function iA(){return iA=(0,G.Z)(function*(t,e){const n=ae(t);Ra(n.remoteStore)||ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=ae(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=ud(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),iA.apply(this,arguments)}function sA(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function oA(t,e,n){const r=ae(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function dd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||EL(t,r)})}function EL(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(bp(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),uA(t))}function aA(t,e,n){for(const r of n)r instanceof mL?(t.wa.addReference(r.key,e),oQ(t,r)):r instanceof _L?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||EL(t,r.key)):ye()}function oQ(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.ga.add(r),uA(t))}function uA(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new le(mt.fromString(e)),r=t.Da.next();t.ya.set(r,new YK(n)),t.pa=t.pa.insert(n,r),Jy(t.remoteStore,new bo(Yr(zl(n.path)),r,"TargetPurposeLimboResolution",Ai._e))}}function So(t,e,n){return cA.apply(this,arguments)}function cA(){return cA=(0,G.Z)(function*(t,e,n){const r=ae(t),i=[],s=[],o=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{o.push(r.va(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);const h=fC.Qi(u.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.Va.a_(i),yield(a=(0,G.Z)(function*(l,h){const g=ae(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(h,y=>O.forEach(y.ki,D=>g.persistence.referenceDelegate.addReference(m,y.targetId,D)).next(()=>O.forEach(y.qi,D=>g.persistence.referenceDelegate.removeReference(m,y.targetId,D)))))}catch(m){if(!_a(m))throw m;ne("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const D=g.ts.get(y),M=D.withLastLimboFreeSnapshotVersion(D.snapshotVersion);g.ts=g.ts.insert(y,M)}}}),function u(l,h){return a.apply(this,arguments)})(r.localStore,s))}),cA.apply(this,arguments)}function aQ(t,e){return lA.apply(this,arguments)}function lA(){return lA=(0,G.Z)(function*(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=yield KF(n.localStore,e);n.currentUser=e,(s=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new J(B.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield So(n,r._s)}var s}),lA.apply(this,arguments)}function uQ(t,e){const n=ae(t),r=n.ya.get(e);if(r&&r.Ra)return Ke().add(r.key);{let i=Ke();const s=n.fa.get(e);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function cQ(t,e){return dA.apply(this,arguments)}function dA(){return dA=(0,G.Z)(function*(t,e){const n=ae(t),r=yield Gy(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&aA(n,e.targetId,i.Ta),i}),dA.apply(this,arguments)}function lQ(t,e){return hA.apply(this,arguments)}function hA(){return hA=(0,G.Z)(function*(t,e){const n=ae(t);return XF(n.localStore,e).then(r=>So(n,r))}),hA.apply(this,arguments)}function dQ(t,e,n,r){return fA.apply(this,arguments)}function fA(){return fA=(0,G.Z)(function*(t,e,n,r){const i=ae(t),s=yield function(a,u){const l=ae(a),h=ae(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Cn(g,u).next(m=>m?l.localDocuments.getDocuments(g,m):O.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===n?yield od(i.remoteStore):"acknowledged"===n||"rejected"===n?(oA(i,e,r||null),sA(i,e),u=e,ae(ae(i.localStore).mutationQueue).Fn(u)):ye(),yield So(i,s)):ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),fA.apply(this,arguments)}function pA(){return pA=(0,G.Z)(function*(t,e){const n=ae(t);if(yA(n),vA(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield wL(n,r.toArray());n.Ca=!0,yield BC(n.remoteStore,!0);for(const s of i)Jy(n.remoteStore,s)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(dd(n,o),id(n.localStore,o,!0))),bp(n.remoteStore,o)}),yield i,yield wL(n,r),function(o){const a=ae(o);a.ya.forEach((u,l)=>{bp(a.remoteStore,l)}),a.wa.Vr(),a.ya=new Map,a.pa=new Ht(le.comparator)}(n),n.Ca=!1,yield BC(n.remoteStore,!1)}}),pA.apply(this,arguments)}function wL(t,e,n){return gA.apply(this,arguments)}function gA(){return gA=(0,G.Z)(function*(t,e,n){const r=ae(t),i=[],s=[];for(const o of e){let a;const u=r.fa.get(o);if(u&&0!==u.length){a=yield rd(r.localStore,Yr(u[0]));for(const l of u){const h=r.ma.get(l),g=yield cQ(r,h);g.snapshot&&s.push(g.snapshot)}}else{const l=yield JF(r.localStore,o);a=yield rd(r.localStore,l),yield QC(r,TL(l),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}),gA.apply(this,arguments)}function TL(t){return SV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function fQ(t){return n=ae(t).localStore,ae(ae(n).persistence).Bi();var n}function pQ(t,e,n,r){return mA.apply(this,arguments)}function mA(){return mA=(0,G.Z)(function*(t,e,n,r){const i=ae(t);if(i.Ca)return void ne("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield XF(i.localStore,NV(s[0])),a=fp.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Gn.EMPTY_BYTE_STRING);yield So(i,o,a);break}case"rejected":yield id(i.localStore,e,!0),dd(i,e,r);break;default:ye()}}),mA.apply(this,arguments)}function gQ(t,e,n){return _A.apply(this,arguments)}function _A(){return _A=(0,G.Z)(function*(t,e,n){const r=yA(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){ne("SyncEngine","Adding an already active target "+i);continue}const s=yield JF(r.localStore,i),o=yield rd(r.localStore,s);yield QC(r,TL(s),o.targetId,!1,o.resumeToken),Jy(r.remoteStore,o)}for(const i of n)r.fa.has(i)&&(yield id(r.localStore,i,!1).then(()=>{bp(r.remoteStore,i),dd(r,i)}).catch(ma))}}),_A.apply(this,arguments)}function yA(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nQ.bind(null,e),e.Va.a_=qK.bind(null,e.eventManager),e.Va.Fa=GK.bind(null,e.eventManager),e}function vA(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iQ.bind(null,e),e}class Sp{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,G.Z)(function*(){n.serializer=Cp(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return ZF(this.persistence,new GF,e.initialUser,this.serializer)}createPersistence(e){return new cC(zy.jr,this.serializer)}createSharedClientState(e){return new rL}terminate(){var e=this;return(0,G.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class IA extends Sp{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,G.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield vA(r.xa.syncEngine),yield od(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return ZF(this.persistence,new GF,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new LF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new j7(n,this.persistence);return new $7(e.asyncQueue,r)}createPersistence(e){const n=hC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?br.withCacheSize(this.cacheSizeBytes):br.DEFAULT;return new dC(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,sL(),Yy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new rL}}class DL extends IA{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,G.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof EC&&(r.sharedClientState.syncEngine={Ys:dQ.bind(null,i),Zs:pQ.bind(null,i),Xs:gQ.bind(null,i),Bi:fQ.bind(null,i),Js:lQ.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var s=(0,G.Z)(function*(o){yield function hQ(t,e){return pA.apply(this,arguments)}(r.xa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=sL();if(!EC.D(n))throw new J(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=hC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new EC(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class hd{initialize(e,n){var r=this;return(0,G.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>IL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=aQ.bind(null,r.syncEngine),yield BC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new WK}createDatastore(e){const n=Cp(e.databaseInfo.databaseId),r=new SK(e.databaseInfo);return new MK(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>IL(this.syncEngine,n,0),a=iL.D()?new iL:new CK,new OK(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){const g=new JK(i,s,o,a,u,l);return h&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,G.Z)(function*(r){const i=ae(r);ne("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield sd(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function CL(t,e=10240){let n=0;return{read:()=>(0,G.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,G.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ev{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Mn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class yQ{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new qn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,G.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,G.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,G.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const s=yield e.Ka(i);return new ZK(JSON.parse(s),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,G.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,G.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,G.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class vQ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,G.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new J(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,G.Z)(function*(o,a){const u=ae(o),l=mp(u.serializer)+"/documents",h={documents:a.map(D=>gp(u.serializer,D))},g=yield u.Co("BatchGetDocuments",l,h,a.length),m=new Map;g.forEach(D=>{const b=function BZ(t,e){return"found"in e?function(r,i){Ae(!!i.found);const s=$s(r,i.found.name),o=Nn(i.found.updateTime),a=i.found.createTime?Nn(i.found.createTime):be.min(),u=new gr({mapValue:{fields:i.found.fields}});return en.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){Ae(!!i.missing),Ae(!!i.readTime);const s=$s(r,i.missing),o=Nn(i.readTime);return en.newNoDocument(s,o)}(t,e):ye()}(u.serializer,D);m.set(b.key.toString(),b)});const y=[];return a.forEach(D=>{const b=m.get(D.toString());Ae(!!b),y.push(b)}),y}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ql(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,G.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=le.fromPath(i);e.mutations.push(new WD(s,e.precondition(s)))}),yield(r=(0,G.Z)(function*(s,o){const a=ae(s),u=mp(a.serializer)+"/documents",l={writes:o.map(h=>_p(a.serializer,h))};yield a.wo("Commit",u,l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ye();n=be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(be.min())?on.exists(!1):on.updateTime(n):on.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(be.min()))throw new J(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return on.updateTime(n)}return on.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class IQ{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new TC(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,G.Z)(function*(){const n=new vQ(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ja(s)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!Jf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!QV(n)}return!1}}class EQ{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ir.UNAUTHENTICATED,this.clientId=qk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,G.Z)(function*(a){ne("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,G.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,G.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=ud(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function tv(t,e){return EA.apply(this,arguments)}function EA(){return EA=(0,G.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,G.Z)(function*(s){r.isEqual(s)||(yield KF(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),EA.apply(this,arguments)}function wA(t,e){return TA.apply(this,arguments)}function TA(){return TA=(0,G.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield DA(t);ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>hL(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>hL(e.remoteStore,s)),t._onlineComponents=e}),TA.apply(this,arguments)}function AL(t){return"FirebaseError"===t.name?t.code===B.FAILED_PRECONDITION||t.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function DA(t){return CA.apply(this,arguments)}function CA(){return CA=(0,G.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{yield tv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!AL(n))throw n;ai("Error using user provided cache. Falling back to memory cache: "+n),yield tv(t,new Sp)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),yield tv(t,new Sp);return t._offlineComponents}),CA.apply(this,arguments)}function nv(t){return AA.apply(this,arguments)}function AA(){return AA=(0,G.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),yield wA(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),yield wA(t,new hd))),t._onlineComponents}),AA.apply(this,arguments)}function bL(t){return DA(t).then(e=>e.persistence)}function fd(t){return DA(t).then(e=>e.localStore)}function SL(t){return nv(t).then(e=>e.remoteStore)}function bA(t){return nv(t).then(e=>e.syncEngine)}function pd(t){return SA.apply(this,arguments)}function SA(){return SA=(0,G.Z)(function*(t){const e=yield nv(t),n=e.eventManager;return n.onListen=XK.bind(null,e.syncEngine),n.onUnlisten=eQ.bind(null,e.syncEngine),n}),SA.apply(this,arguments)}function PL(t,e,n={}){const r=new qn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function(s,o,a,u,l){const h=new ev({next:m=>{o.enqueueAndForget(()=>WC(s,g));const y=m.docs.has(a);!y&&m.fromCache?l.reject(new J(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&"server"===u.source?l.reject(new J(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new ZC(zl(a.path),h,{includeMetadataChanges:!0,J_:!0});return HC(s,g)}(yield pd(t),t.asyncQueue,e,n,r)})),r.promise}function ML(t,e,n={}){const r=new qn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function(s,o,a,u,l){const h=new ev({next:m=>{o.enqueueAndForget(()=>WC(s,g)),m.fromCache&&"server"===u.source?l.reject(new J(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new ZC(a,h,{includeMetadataChanges:!0,J_:!0});return HC(s,g)}(yield pd(t),t.asyncQueue,e,n,r)})),r.promise}function NL(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const xL=new Map;function RA(t,e,n){if(!n)throw new J(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function OL(t,e,n,r){if(!0===e&&!0===r)throw new J(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kL(t){if(!le.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function VL(t){if(le.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":ye()}function ot(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rv(t);throw new J(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function FL(t,e){if(e<=0)throw new J(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class LL{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new J(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new J(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=NL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LL(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new R7;switch(r.type){case"firstParty":return new x7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xL.get(n);r&&(ne("ComponentProvider","Removing Datastore"),xL.delete(n),r.terminate())}(this),Promise.resolve()}}function UL(t,e,n,r={}){var i;const s=(t=ot(t,Rp))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=ir.MOCK_USER;else{a=(0,Ot.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new J(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ir(l)}t._authCredentials=new P7(new zk(a,u))}}class mr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mr(this.firestore,e,this._query)}}class tn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new js(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}}class js extends mr{constructor(e,n,r){super(e,n,zl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new le(e))}withConverter(e){return new js(this.firestore,e,this._path)}}function BL(t,e,...n){if(t=(0,Ot.m9)(t),RA("collection","path",e),t instanceof Rp){const r=mt.fromString(e,...n);return VL(r),new js(t,null,r)}{if(!(t instanceof tn||t instanceof js))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return VL(r),new js(t.firestore,null,r)}}function iv(t,e,...n){if(t=(0,Ot.m9)(t),1===arguments.length&&(e=qk.newId()),RA("doc","path",e),t instanceof Rp){const r=mt.fromString(e,...n);return kL(r),new tn(t,null,new le(r))}{if(!(t instanceof tn||t instanceof js))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return kL(r),new tn(t.firestore,t instanceof js?t.converter:null,new le(r))}}function $L(t,e){return t=(0,Ot.m9)(t),e=(0,Ot.m9)(e),(t instanceof tn||t instanceof js)&&(e instanceof tn||e instanceof js)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function PA(t,e){return t=(0,Ot.m9)(t),e=(0,Ot.m9)(e),t instanceof mr&&e instanceof mr&&t.firestore===e.firestore&&op(t._query,e._query)&&t.converter===e.converter}class xQ{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new TC(this,"async_queue_retry"),this.iu=()=>{const n=Yy();n&&ne("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Yy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Yy();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new qn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,G.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!_a(n))throw n;ne("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,Mn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=jC.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&ye()}verifyOperationInProgress(){}uu(){var e=this;return(0,G.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function MA(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class OQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new qn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class zt extends Rp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new xQ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||jL(this),this._firestoreClient.terminate()}}function VQ(t,e){const n="object"==typeof t?t:(0,Kr.getApp)(),r="string"==typeof t?t:e||"(default)",i=(0,Kr._getProvider)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,Ot.P0)("firestore");s&&UL(i,...s)}return i}function Tn(t){return t._firestoreClient||jL(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function jL(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new cZ(t._databaseId,u,t._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,NL(h.experimentalLongPollingOptions),h.useFetchStreams));var u,h;t._firestoreClient=new EQ(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function HL(t,e,n){const r=new qn;return t.asyncQueue.enqueue((0,G.Z)(function*(){try{yield tv(t,n),yield wA(t,e),r.resolve()}catch(i){const s=i;if(!AL(s))throw s;ai("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function zL(t){if(t._initialized||t._terminated)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Hs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hs(Gn.fromBase64String(e))}catch(n){throw new J(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hs(Gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ro{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new J(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ku{constructor(e){this._methodName=e}}class sv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}const qQ=/^__.*__$/;class GQ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Ao(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kl(e,this.data,n,this.fieldTransforms)}}class WL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ao(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class ov{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new ov(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return cv(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(qL(this.Iu)&&qQ.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class ZQ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cp(e)}pu(e,n,r,i=!1){return new ov({Iu:e,methodName:n,gu:r,path:Xt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vu(t){const e=t._freezeSettings(),n=Cp(t._databaseId);return new ZQ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function av(t,e,n,r,i,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);kA("Data must be an object, but it was:",o,r);const a=KL(r,o);let u,l;if(s.merge)u=new ui(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const m=Np(e,g,n);if(!o.contains(m))throw new J(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);YL(h,m)||h.push(m)}u=new ui(h),l=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,l=o.fieldTransforms;return new GQ(new gr(a),u,l)}class Mp extends ku{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mp}}function GL(t,e,n){return new ov({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class NA extends ku{_toFieldTransform(e){return new lp(e.path,new Gl)}isEqual(e){return e instanceof NA}}class KQ extends ku{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=GL(this,e,!0),r=this.yu.map(s=>Fu(s,n)),i=new Au(r);return new lp(e.path,i)}isEqual(e){return this===e}}class QQ extends ku{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=GL(this,e,!0),r=this.yu.map(s=>Fu(s,n)),i=new bu(r);return new lp(e.path,i)}isEqual(e){return this===e}}class YQ extends ku{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Zl(e.serializer,UV(e.serializer,this.wu));return new lp(e.path,n)}isEqual(e){return this===e}}function xA(t,e,n,r){const i=t.pu(1,e,n);kA("Data must be an object, but it was:",i,r);const s=[],o=gr.empty();ya(r,(u,l)=>{const h=uv(e,u,n);l=(0,Ot.m9)(l);const g=i.Ru(h);if(l instanceof Mp)s.push(h);else{const m=Fu(l,g);null!=m&&(s.push(h),o.set(h,m))}});const a=new ui(s);return new WL(o,a,i.fieldTransforms)}function OA(t,e,n,r,i,s){const o=t.pu(1,e,n),a=[Np(e,r,n)],u=[i];if(s.length%2!=0)throw new J(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Np(e,s[m])),u.push(s[m+1]);const l=[],h=gr.empty();for(let m=a.length-1;m>=0;--m)if(!YL(l,a[m])){const y=a[m];let D=u[m];D=(0,Ot.m9)(D);const b=o.Ru(y);if(D instanceof Mp)l.push(y);else{const M=Fu(D,b);null!=M&&(l.push(y),h.set(y,M))}}const g=new ui(l);return new WL(h,g,o.fieldTransforms)}function ZL(t,e,n,r=!1){return Fu(n,t.pu(r?4:3,e))}function Fu(t,e){if(QL(t=(0,Ot.m9)(t)))return kA("Unsupported field value:",e,t),KL(t,e);if(t instanceof ku)return function(r,i){if(!qL(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Fu(a,i.Vu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,Ot.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return UV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=sn.fromDate(r);return{timestampValue:Yl(i.serializer,s)}}if(r instanceof sn){const s=new sn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yl(i.serializer,s)}}if(r instanceof sv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hs)return{bytesValue:oF(i.serializer,r._byteString)};if(r instanceof tn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:YD(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${rv(r)}`)}(t,e)}function KL(t,e){const n={};return aV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ya(t,(r,i)=>{const s=Fu(i,e.Eu(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function QL(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof sn||t instanceof sv||t instanceof Hs||t instanceof tn||t instanceof ku)}function kA(t,e,n){if(!QL(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=rv(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function Np(t,e,n){if((e=(0,Ot.m9)(e))instanceof Ro)return e._internalPath;if("string"==typeof e)return uv(t,e);throw cv("Field path arguments must be of type string or ",t,!1,void 0,n)}const JQ=new RegExp("[~\\*/\\[\\]]");function uv(t,e,n){if(e.search(JQ)>=0)throw cv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ro(...e.split("."))._internalPath}catch{throw cv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cv(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new J(B.INVALID_ARGUMENT,a+t+u)}function YL(t,e){return t.some(n=>n.isEqual(e))}class xp{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new XQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class XQ extends xp{data(){return super.data()}}function lv(t,e){return"string"==typeof e?uv(t,e):e instanceof Ro?e._internalPath:e._delegate._internalPath}function JL(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new J(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VA{}class Op extends VA{}function Ma(t,e,...n){let r=[];e instanceof VA&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof gd).length,a=s.filter(u=>u instanceof kp).length;if(o>1||o>0&&a>0)throw new J(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class kp extends Op{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new kp(e,n,r)}_apply(e){const n=this._parse(e);return n2(e._query,n),new mr(e.firestore,e.converter,HD(e._query,n))}_parse(e){const n=Vu(e.firestore);return function(s,o,a,u,l,h,g){let m;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new J(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){t2(g,h);const y=[];for(const D of g)y.push(e2(u,s,D));m={arrayValue:{values:y}}}else m=e2(u,s,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||t2(g,h),m=ZL(a,"where",g,"in"===h||"not-in"===h);return ht.create(l,h,m)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class gd extends VA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new gd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Mt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)n2(o,u),o=HD(o,u)}(e._query,n),new mr(e.firestore,e.converter,HD(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class FA extends Op{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new FA(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new J(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new J(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ip(s,o)}(e._query,this._field,this._direction);return new mr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Do(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class dv extends Op{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new dv(e,n,r)}_apply(e){return new mr(e.firestore,e.converter,My(e._query,this._limit,this._limitType))}}class hv extends Op{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new hv(e,n,r)}_apply(e){const n=XL(e,this.type,this._docOrFields,this._inclusive);return new mr(e.firestore,e.converter,(s=n,new Do((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class fv extends Op{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new fv(e,n,r)}_apply(e){const n=XL(e,this.type,this._docOrFields,this._inclusive);return new mr(e.firestore,e.converter,(s=n,new Do((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function XL(t,e,n,r){if(n[0]=(0,Ot.m9)(n[0]),n[0]instanceof xp)return function(s,o,a,u,l){if(!u)throw new J(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of Wl(s))if(g.field.isKeyField())h.push(Du(o,u.key));else{const m=u.data.field(g.field);if(Dy(m))throw new J(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=g.field.canonicalString();throw new J(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new Da(h,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Vu(t.firestore);return function(o,a,u,l,h,g){const m=o.explicitOrderBy;if(h.length>m.length)throw new J(B.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let D=0;D<h.length;D++){const b=h[D];if(m[D].field.isKeyField()){if("string"!=typeof b)throw new J(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!jD(o)&&-1!==b.indexOf("/"))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);const M=o.path.child(mt.fromString(b));if(!le.isDocumentKey(M))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const U=new le(M);y.push(Du(a,U))}else{const M=ZL(u,l,b);y.push(M)}}return new Da(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function e2(t,e,n){if("string"==typeof(n=(0,Ot.m9)(n))){if(""===n)throw new J(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jD(e)&&-1!==n.indexOf("/"))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(mt.fromString(n));if(!le.isDocumentKey(r))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Du(t,new le(r))}if(n instanceof tn)return Du(t,n._key);throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rv(n)}.`)}function t2(t,e){if(!Array.isArray(t)||0===t.length)throw new J(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function n2(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new J(B.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class LA{convertValue(e,n="none"){switch(wa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(To(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ye()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ya(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new sv(wn(e.latitude),wn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cy(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ep(e));default:return null}}convertTimestamp(e){const n=va(e);return new sn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=mt.fromString(e);Ae(mF(r));const i=new Ia(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(n)||Mn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function pv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class uY extends LA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,n)}}class Lu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Po extends xp{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Vp extends Po{data(e={}){return super.data(e)}}class Na{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Lu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vp(this._firestore,this._userDataWriter,r.key,r,new Lu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Vp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Lu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new Vp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Lu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:lY(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function lY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}function i2(t,e){return t instanceof Po&&e instanceof Po?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Na&&e instanceof Na&&t._firestore===e._firestore&&PA(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class xa extends LA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,n)}}function s2(t,e,n){t=ot(t,tn);const r=ot(t.firestore,zt),i=pv(t.converter,e,n);return md(r,[av(Vu(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,on.none())])}function o2(t,e,n,...r){t=ot(t,tn);const i=ot(t.firestore,zt),s=Vu(i);let o;return o="string"==typeof(e=(0,Ot.m9)(e))||e instanceof Ro?OA(s,"updateDoc",t._key,e,n,r):xA(s,"updateDoc",t._key,e),md(i,[o.toMutation(t._key,on.exists(!0))])}function a2(t,...e){var n,r,i;t=(0,Ot.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||MA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(MA(e[o])){const g=e[o];e[o]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,l,h;if(t instanceof tn)l=ot(t.firestore,zt),h=zl(t._key.path),u={next:g=>{e[o]&&e[o](UA(l,t,g))},error:e[o+1],complete:e[o+2]};else{const g=ot(t,mr);l=ot(g.firestore,zt),h=g._query;const m=new xa(l);u={next:y=>{e[o]&&e[o](new Na(l,m,g,y))},error:e[o+1],complete:e[o+2]},JL(t._query)}return function(m,y,D,b){const M=new ev(b),U=new ZC(y,M,D);return m.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return HC(yield pd(m),U)})),()=>{M.Na(),m.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return WC(yield pd(m),U)}))}}(Tn(l),h,a,u)}function md(t,e){return function(r,i){const s=new qn;return r.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function tQ(t,e,n){return XC.apply(this,arguments)}(yield bA(r),i,s)})),s.promise}(Tn(t),e)}function UA(t,e,n){const r=n.docs.get(e._key),i=new xa(t);return new Po(t,i,e._key,r,new Lu(n.hasPendingWrites,n.fromCache),e.converter)}const SY={maxAttempts:5};class u2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Vu(e)}set(e,n,r){this._verifyNotCommitted();const i=Oa(e,this._firestore),s=pv(i.converter,n,r),o=av(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,on.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Oa(e,this._firestore);let o;return o="string"==typeof(n=(0,Ot.m9)(n))||n instanceof Ro?OA(this._dataReader,"WriteBatch.update",s._key,n,r,i):xA(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Oa(e,this._firestore);return this._mutations=this._mutations.concat(new Ql(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Oa(t,e){if((t=(0,Ot.m9)(t)).firestore!==e)throw new J(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class RY extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Vu(n)}get(n){const r=Oa(n,this._firestore),i=new uY(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return ye();const o=s[0];if(o.isFoundDocument())return new xp(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new xp(this._firestore,i,r._key,null,r.converter);throw ye()})}set(n,r,i){const s=Oa(n,this._firestore),o=pv(s.converter,r,i),a=av(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Oa(n,this._firestore);let a;return a="string"==typeof(r=(0,Ot.m9)(r))||r instanceof Ro?OA(this._dataReader,"Transaction.update",o._key,r,i,s):xA(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Oa(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Oa(e,this._firestore),r=new xa(this._firestore);return super.get(e).then(i=>new Po(this._firestore,r,n._key,i._document,new Lu(!1,!1),n.converter))}}function $A(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new J("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function h2(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function f2(){if(!function aZ(){return typeof atob<"u"}())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Vl=Kr.SDK_VERSION,(0,Kr._registerComponent)(new A1.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new zt(new M7(r.getProvider("auth-internal")),new O7(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new J(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ia(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Kr.registerVersion)(Hk,"4.3.2",e),(0,Kr.registerVersion)(Hk,"4.3.2","esm2017")}();class Fp{constructor(e){this._delegate=e}static fromBase64String(e){return f2(),new Fp(Hs.fromBase64String(e))}static fromUint8Array(e){return h2(),new Fp(Hs.fromUint8Array(e))}toBase64(){return f2(),this._delegate.toBase64()}toUint8Array(){return h2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jA(t){return function UY(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class BY{enableIndexedDbPersistence(e,n){return function FQ(t,e){zL(t=ot(t,zt));const n=Tn(t);if(n._uninitializedComponentsProvider)throw new J(B.FAILED_PRECONDITION,"SDK cache is already specified.");ai("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new hd;return HL(n,i,new IA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function LQ(t){zL(t=ot(t,zt));const e=Tn(t);if(e._uninitializedComponentsProvider)throw new J(B.FAILED_PRECONDITION,"SDK cache is already specified.");ai("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new hd;return HL(e,r,new DL(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function UQ(t){if(t._initialized&&!t._terminated)throw new J(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new qn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,G.Z)(function*(){try{yield(n=(0,G.Z)(function*(i){if(!hs.D())return Promise.resolve();const s=i+"main";yield hs.delete(s)}),function r(i){return n.apply(this,arguments)})(hC(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class p2{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ia||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ai("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){UL(this._delegate,e,n,r)}enableNetwork(){return function $Q(t){return function wQ(t){return t.asyncQueue.enqueue((0,G.Z)(function*(){const e=yield bL(t),n=yield SL(t);return e.setNetworkEnabled(!0),function(i){const s=ae(i);return s.C_.delete(0),Ap(s)}(n)}))}(Tn(t=ot(t,zt)))}(this._delegate)}disableNetwork(){return function jQ(t){return function TQ(t){return t.asyncQueue.enqueue((0,G.Z)(function*(){const e=yield bL(t),n=yield SL(t);return e.setNetworkEnabled(!1),(r=(0,G.Z)(function*(s){const o=ae(s);o.C_.add(0),yield sd(o),o.M_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(Tn(t=ot(t,zt)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,OL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function BQ(t){return function(n){const r=new qn;return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function sQ(t,e){return iA.apply(this,arguments)}(yield bA(n),r)})),r.promise}(Tn(t=ot(t,zt)))}(this._delegate)}onSnapshotsInSync(e){return function vY(t,e){return function AQ(t,e){const n=new ev(e);return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return i=yield pd(t),s=n,ae(i).q_.add(s),void s.next();var i,s})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return i=yield pd(t),s=n,void ae(i).q_.delete(s);var i,s}))}}(Tn(t=ot(t,zt)),MA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _d(this,BL(this._delegate,e))}catch(n){throw Jr(n,"collection()","Firestore.collection()")}}doc(e){try{return new Qi(this,iv(this._delegate,e))}catch(n){throw Jr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xr(this,function NQ(t,e){if(t=ot(t,Rp),RA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new mr(t,null,(r=e,new Do(mt.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw Jr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function PY(t,e,n){t=ot(t,zt);const r=Object.assign(Object.assign({},SY),n);return function(s){if(s.maxAttempts<1)throw new J(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new qn;return s.asyncQueue.enqueueAndForget((0,G.Z)(function*(){const l=yield function RL(t){return nv(t).then(e=>e.datastore)}(s);new IQ(s.asyncQueue,l,a,o,u).run()})),u.promise}(Tn(t),i=>e(new RY(t,i)),r)}(this._delegate,n=>e(new g2(this,n)))}batch(){return Tn(this._delegate),new m2(new u2(this._delegate,e=>md(this._delegate,e)))}loadBundle(e){return function HQ(t,e){const n=Tn(t=ot(t,zt)),r=new OQ;return function bQ(t,e,n,r){const i=function(o,a){let u;return u="string"==typeof o?JV().encode(o):o,h=function(h,g){if(h instanceof Uint8Array)return CL(h,g);if(h instanceof ArrayBuffer)return CL(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new yQ(h,a);var h}(n,Cp(e));t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){!function mQ(t,e,n){const r=ae(t);var i;(i=(0,G.Z)(function*(o,a,u){try{const l=yield a.getMetadata();if(yield function(D,b){const M=ae(D),U=Nn(b.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",N=>M.Kr.getBundleMetadata(N,b.id)).then(N=>!!N&&N.createTime.compareTo(U)>=0)}(o.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(D=l).totalDocuments,bytesLoaded:D.totalBytes,totalDocuments:D.totalDocuments,totalBytes:D.totalBytes}),Promise.resolve(new Set);u._updateProgress(gL(l));const h=new KK(l,o.localStore,a.serializer);let g=yield a.Ma();for(;g;){const y=yield h.ea(g);y&&u._updateProgress(y),g=yield a.Ma()}const m=yield h.complete();return yield So(o,m.ra,void 0),yield function(D,b){const M=ae(D);return M.persistence.runTransaction("Save bundle","readwrite",U=>M.Kr.saveBundleMetadata(U,b))}(o.localStore,l),u._completeWith(m.progress),Promise.resolve(m.na)}catch(l){return ai("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var D}),function s(o,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield bA(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function zQ(t,e){return function SQ(t,e){return t.asyncQueue.enqueue((0,G.Z)(function*(){return function(r,i){const s=ae(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield fd(t),e)}))}(Tn(t=ot(t,zt)),e).then(n=>n?new mr(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Xr(this,n):null)}}class mv extends LA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fp(new Hs(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Qi.forKey(n,this.firestore,null)}}class g2{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new mv(e)}get(e){const n=Bu(e);return this._delegate.get(n).then(r=>new Lp(this._firestore,new Po(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Bu(e);return r?($A("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Bu(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Bu(e);return this._delegate.delete(n),this}}class m2{constructor(e){this._delegate=e}set(e,n,r){const i=Bu(e);return r?($A("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Bu(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Bu(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Uu{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Vp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Up(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Uu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Uu(e,new mv(e),n),i.set(n,s)),s}}Uu.INSTANCES=new WeakMap;class Qi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new mv(e)}static forPath(e,n,r){if(e.length%2!=0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Qi(n,new tn(n._delegate,r,new le(e)))}static forKey(e,n,r){return new Qi(n,new tn(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new _d(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _d(this.firestore,BL(this._delegate,e))}catch(n){throw Jr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ot.m9)(e))instanceof tn&&$L(this._delegate,e)}set(e,n){n=$A("DocumentReference.set",n);try{return n?s2(this._delegate,e,n):s2(this._delegate,e)}catch(r){throw Jr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?o2(this._delegate,e):o2(this._delegate,e,n,...r)}catch(i){throw Jr(i,"updateDoc()","DocumentReference.update()")}}delete(){return function _Y(t){return md(ot(t.firestore,zt),[new Ql(t._key,on.none())])}(this._delegate)}onSnapshot(...e){const n=_2(e),r=y2(e,i=>new Lp(this.firestore,new Po(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return a2(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function hY(t){t=ot(t,tn);const e=ot(t.firestore,zt),n=Tn(e),r=new xa(e);return function DQ(t,e){const n=new qn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return(r=(0,G.Z)(function*(s,o,a){try{const u=yield function(h,g){const m=ae(h);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new J(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=ud(u,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield fd(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Po(e,r,t._key,i,new Lu(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function fY(t){t=ot(t,tn);const e=ot(t.firestore,zt);return PL(Tn(e),t._key,{source:"server"}).then(n=>UA(e,t,n))}(this._delegate):function dY(t){t=ot(t,tn);const e=ot(t.firestore,zt);return PL(Tn(e),t._key).then(n=>UA(e,t,n))}(this._delegate),n.then(r=>new Lp(this.firestore,new Po(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Qi(this.firestore,this._delegate.withConverter(e?Uu.getInstance(this.firestore,e):null))}}function Jr(t,e,n){return t.message=t.message.replace(e,n),t}function _2(t){for(const e of t)if("object"==typeof e&&!jA(e))return e;return{}}function y2(t,e){var n,r;let i;return i=jA(t[0])?t[0]:jA(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Lp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Qi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return i2(this._delegate,e._delegate)}}class Up extends Lp{data(e){const n=this._delegate.data(e);return this._delegate._converter||function S7(t,e){t||ye()}(void 0!==n),n}}class Xr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new mv(e)}where(e,n,r){try{return new Xr(this.firestore,Ma(this._delegate,function eY(t,e,n){const r=e,i=lv("where",t);return kp._create(i,r,n)}(e,n,r)))}catch(i){throw Jr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Xr(this.firestore,Ma(this._delegate,function tY(t,e="asc"){const n=e,r=lv("orderBy",t);return FA._create(r,n)}(e,n)))}catch(r){throw Jr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xr(this.firestore,Ma(this._delegate,function nY(t){return FL("limit",t),dv._create("limit",t,"F")}(e)))}catch(n){throw Jr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Xr(this.firestore,Ma(this._delegate,function rY(t){return FL("limitToLast",t),dv._create("limitToLast",t,"L")}(e)))}catch(n){throw Jr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xr(this.firestore,Ma(this._delegate,function iY(...t){return hv._create("startAt",t,!0)}(...e)))}catch(n){throw Jr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xr(this.firestore,Ma(this._delegate,function sY(...t){return hv._create("startAfter",t,!1)}(...e)))}catch(n){throw Jr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xr(this.firestore,Ma(this._delegate,function oY(...t){return fv._create("endBefore",t,!1)}(...e)))}catch(n){throw Jr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xr(this.firestore,Ma(this._delegate,function aY(...t){return fv._create("endAt",t,!0)}(...e)))}catch(n){throw Jr(n,"endAt()","Query.endAt()")}}isEqual(e){return PA(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function gY(t){t=ot(t,mr);const e=ot(t.firestore,zt),n=Tn(e),r=new xa(e);return function CQ(t,e){const n=new qn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return(r=(0,G.Z)(function*(s,o,a){try{const u=yield Gy(s,o,!0),l=new yL(o,u.ls),h=l.ca(u.documents),g=l.applyChanges(h,!1);a.resolve(g.snapshot)}catch(u){const l=ud(u,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield fd(t),e,n);var r})),n.promise}(n,t._query).then(i=>new Na(e,r,t,i))}(this._delegate):"server"===e?.source?function mY(t){t=ot(t,mr);const e=ot(t.firestore,zt),n=Tn(e),r=new xa(e);return ML(n,t._query,{source:"server"}).then(i=>new Na(e,r,t,i))}(this._delegate):function pY(t){t=ot(t,mr);const e=ot(t.firestore,zt),n=Tn(e),r=new xa(e);return JL(t._query),ML(n,t._query).then(i=>new Na(e,r,t,i))}(this._delegate),n.then(r=>new HA(this.firestore,new Na(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=_2(e),r=y2(e,i=>new HA(this.firestore,new Na(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return a2(this._delegate,n,r)}withConverter(e){return new Xr(this.firestore,this._delegate.withConverter(e?Uu.getInstance(this.firestore,e):null))}}class jY{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Up(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class HA{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Xr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Up(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new jY(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Up(this._firestore,r))})}isEqual(e){return i2(this._delegate,e._delegate)}}class _d extends Xr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Qi(this.firestore,e):null}doc(e){try{return new Qi(this.firestore,void 0===e?iv(this._delegate):iv(this._delegate,e))}catch(n){throw Jr(n,"doc()","CollectionReference.doc()")}}add(e){return function yY(t,e){const n=ot(t.firestore,zt),r=iv(t),i=pv(t.converter,e);return md(n,[av(Vu(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Qi(this.firestore,n))}isEqual(e){return $L(this._delegate,e._delegate)}withConverter(e){return new _d(this.firestore,this._delegate.withConverter(e?Uu.getInstance(this.firestore,e):null))}}function Bu(t){return ot(t,tn)}class zA{constructor(...e){this._delegate=new Ro(...e)}static documentId(){return new zA(Xt.keyField().canonicalString())}isEqual(e){return(e=(0,Ot.m9)(e))instanceof Ro&&this._delegate._internalPath.isEqual(e._internalPath)}}class $u{constructor(e){this._delegate=e}static serverTimestamp(){const e=function NY(){return new NA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new $u(e)}static delete(){const e=function MY(){return new Mp("deleteField")}();return e._methodName="FieldValue.delete",new $u(e)}static arrayUnion(...e){const n=function xY(...t){return new KQ("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new $u(n)}static arrayRemove(...e){const n=function OY(...t){return new QQ("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new $u(n)}static increment(e){const n=function kY(t){return new YQ("increment",t)}(e);return n._methodName="FieldValue.increment",new $u(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const HY={Firestore:p2,GeoPoint:sv,Timestamp:sn,Blob:Fp,Transaction:g2,WriteBatch:m2,DocumentReference:Qi,DocumentSnapshot:Lp,Query:Xr,QueryDocumentSnapshot:Up,QuerySnapshot:HA,CollectionReference:_d,FieldPath:zA,FieldValue:$u,setLogLevel:function $Y(t){!function b7(t){ga.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function v2(t,e){return function qY(t,e=c1){return new We(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function WA(t,e){return v2(t,e).pipe(ge(n=>({payload:n,type:"query"})))}!function WY(t){(function zY(t,e){t.INTERNAL.registerComponent(new A1.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},HY)))})(t,(e,n)=>new p2(e,n,new BY)),t.registerVersion("@firebase/firestore-compat","0.3.22")}(q_.Z);class I2{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=D2(r,n);return new T2(i,s,this.afs)}snapshotChanges(){return function GY(t,e){return v2(t,e).pipe(C_(void 0),$T(),ge(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ti)}valueChanges(e={}){return this.snapshotChanges().pipe(ge(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return I(this.ref.get(e)).pipe(Ti)}}function _v(t,e){return WA(t,e).pipe(C_(void 0),$T(),ge(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=s.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function E2(t,e,n){return _v(t,n).pipe(b_((r,i)=>function ZY(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function KY(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return qA(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return qA(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qA(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),Oe(),ge(r=>r.map(i=>({type:i.type,payload:i}))))}function qA(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function w2(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class T2{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=_v(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ge(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(C_(void 0),$T(),us(([r,i])=>i.length>0||!r),ge(([,r])=>r),Ti)}auditTrail(e){return this.stateChanges(e).pipe(b_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=w2(e);return E2(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ti)}valueChanges(e={}){return WA(this.query,this.afs.schedulers.outsideAngular).pipe(ge(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ti)}get(e){return I(this.query.get(e)).pipe(Ti)}add(e){return this.ref.add(e)}doc(e){return new I2(this.ref.doc(e),this.afs)}}class QY{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?_v(this.query,this.afs.schedulers.outsideAngular).pipe(ge(n=>n.filter(r=>e.indexOf(r.type)>-1)),us(n=>n.length>0),Ti):_v(this.query,this.afs.schedulers.outsideAngular).pipe(Ti)}auditTrail(e){return this.stateChanges(e).pipe(b_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=w2(e);return E2(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ti)}valueChanges(e={}){return WA(this.query,this.afs.schedulers.outsideAngular).pipe(ge(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ti)}get(e){return I(this.query.get(e)).pipe(Ti)}}const YY=new ce("angularfire2.enableFirestorePersistence"),JY=new ce("angularfire2.firestore.persistenceSettings"),XY=new ce("angularfire2.firestore.settings"),eJ=new ce("angularfire2.firestore.use-emulator");function D2(t,e=(n=>n)){return{query:e(t),ref:t}}let tJ=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,l,h,g,m,y,D,b,M,U,N){this.schedulers=u;const z=BT(n,a,r),se=h;g&&D1(z,a,m,D,b,M,y,U),[this.firestore,this.persistenceEnabled$]=p1(`${z.name}.firestore`,"AngularFirestore",z.name,()=>{const de=a.runOutsideAngular(()=>z.firestore());if(s&&de.settings(s),se&&de.useEmulator(...se),i&&!u_(o)){const Be=()=>{try{return I(de.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(At){return typeof console<"u"&&console.warn(At),A(!1)}};return[de,a.runOutsideAngular(Be)]}return[de,A(!1)]},[s,se,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=D2(i,r),a=this.schedulers.ngZone.run(()=>s);return new T2(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new QY(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new I2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(oe(G_),oe(UT,8),oe(YY,8),oe(XY,8),oe(ao),oe(vt),oe(W_),oe(JY,8),oe(eJ,8),oe(C1,8),oe(y1,8),oe(v1,8),oe(I1,8),oe(E1,8),oe(w1,8),oe(T1,8),oe(LT,8))};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),C2=(()=>{class t{constructor(n){this.db=n,this.path="/tareas",this.tareasRef=n.collection(this.path),this.tareasRef.valueChanges().subscribe(r=>{console.log(r)})}listar(){return this.tareasRef.valueChanges()}guardar(n){const r=this.db.createId();return n.uid=r,console.log("tarea: ",n),this.tareasRef.doc(r).set(Object.assign({},n))}leer(n){return console.log("uid: ",n),this.db.doc(this.path+"/"+n).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||t)(oe(tJ))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nJ=(()=>{class t{constructor(n,r){this.router=n,this.tareasFirestore=r,this.tarea=new o1;let i=this.router.getCurrentNavigation()?.extras.queryParams;i&&(console.log(i),this.tarea=i.tarea)}guardarTarea(){this.tareasFirestore.guardar(this.tarea),this.tarea=new o1}listarTareas(){this.router.navigate(["paginas/lista-tareas"])}static#e=this.\u0275fac=function(r){return new(r||t)(ie(oi),ie(C2))};static#t=this.\u0275cmp=Lo({type:t,selectors:[["app-tareas"]],decls:25,vars:4,consts:[["for","txtUID"],["name","txtUID","id","txtUID",3,"ngModel","ngModelChange"],["for","txtTarea"],["name","txtTarea","id","txtTarea",3,"ngModel","ngModelChange"],["for","txtFecha"],["name","txtFecha","id","txtFecha",3,"ngModel","ngModelChange"],["for","txtEtiq"],["name","txtEtiq","id","txtEtiq",3,"ngModel","ngModelChange"],["type","button",3,"click"]],template:function(r,i){1&r&&(yn(0,"p"),zr(1,"Tareas"),vn(),yn(2,"form")(3,"label",0),zr(4,"UID"),vn(),yn(5,"input",1),zn("ngModelChange",function(o){return i.tarea.uid=o}),vn(),yn(6,"label",2),zr(7,"Tarea"),vn(),Ss(8,"br"),yn(9,"input",3),zn("ngModelChange",function(o){return i.tarea.tarea=o}),vn(),Ss(10,"br"),yn(11,"label",4),zr(12,"Fecha"),vn(),Ss(13,"br"),yn(14,"input",5),zn("ngModelChange",function(o){return i.tarea.fecha=o}),vn(),Ss(15,"br"),yn(16,"label",6),zr(17,"Etiquetas (separadas por comas ',')"),vn(),Ss(18,"br"),yn(19,"input",7),zn("ngModelChange",function(o){return i.tarea.etiquetas=o}),vn(),Ss(20,"br"),yn(21,"button",8),zn("click",function(){return i.guardarTarea()}),zr(22,"Agregar Tarea"),vn(),yn(23,"button",8),zn("click",function(){return i.listarTareas()}),zr(24,"Listar Tareas"),vn()()),2&r&&(zi(5),fo("ngModel",i.tarea.uid),zi(4),fo("ngModel",i.tarea.tarea),zi(5),fo("ngModel",i.tarea.fecha),zi(5),fo("ngModel",i.tarea.etiquetas))},dependencies:[Ox,h_,vx,Ix,nT,T_]})}return t})();function rJ(t,e){if(1&t){const n=function nR(){return Y()}();yn(0,"li")(1,"a",1),zn("click",function(){const s=function Rg(t){return ke.lFrame.contextLView=t,t[Qt]}(n).$implicit;return function Ic(t){return ke.lFrame.contextLView=null,t}(uR().editar(s))}),zr(2),vn(),zr(3," | "),yn(4,"a",2),zr(5),vn()()}if(2&t){const n=e.$implicit;zi(2),ME("",n.tarea," ",n.fecha,""),zi(2),Nm("routerLink","paginas/tareas/",n.uid,""),zi(1),Vm(n.tarea)}}const iJ=[{path:"paginas/lista-tareas",component:(()=>{class t{constructor(n,r){this.tareasFirestore=n,this.router=r,this.tareas=[],this.listaTareas=this.tareasFirestore.listar()}editar(n){console.log("editando: ",n),console.log("uid: ",n.uid),this.router.navigate(["paginas/tareas/"],{queryParams:{tarea:n}})}static#e=this.\u0275fac=function(r){return new(r||t)(ie(C2),ie(oi))};static#t=this.\u0275cmp=Lo({type:t,selectors:[["app-lista-tareas"]],decls:5,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"click"],[3,"routerLink"]],template:function(r,i){1&r&&(yn(0,"p"),zr(1,"Lista de Tareas"),vn(),yn(2,"ul"),wE(3,rJ,6,4,"li",0),function UP(t,e){const n=dt();let r;const i=t+tt;n.firstCreatePass?(r=function Yz(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=zo(r.type)),a=Ir(ie);try{const u=Sc(!1),l=s();return Sc(u),function Rj(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Y(),i,l),l}finally{Ir(a)}}(4,"async"),vn()),2&r&&(zi(3),fo("ngForOf",BP(4,1,i.listaTareas)))},dependencies:[Rw,Af,EN]})}return t})()},{path:"paginas/tareas",component:nJ}];let sJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Yn({type:t});static#n=this.\u0275inj=vr({imports:[i1.forRoot(iJ),i1]})}return t})();function oJ(t,e){if(1&t&&(yn(0,"li")(1,"a",1),zr(2),vn()()),2&t){const n=e.$implicit;zi(1),fo("routerLink",n.path),zi(1),Vm(n.title)}}let aJ=(()=>{class t{constructor(){this.paginas=[{title:"Tareas",path:"paginas/tareas"},{title:"Listado de Tareas",path:"paginas/lista-tareas"}]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Lo({type:t,selectors:[["app-menu"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["href","#",3,"routerLink"]],template:function(r,i){1&r&&(yn(0,"ul"),wE(1,oJ,3,2,"li",0),vn()),2&r&&(zi(1),fo("ngForOf",i.paginas))},dependencies:[Rw,Af]})}return t})(),uJ=(()=>{class t{constructor(){this.title="Web Tareas"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Lo({type:t,selectors:[["app-root"]],decls:6,vars:0,template:function(r,i){1&r&&(yn(0,"p"),zr(1,"Pagina Web de Tareas"),vn(),yn(2,"p"),zr(3,"Bienvenido"),vn(),Ss(4,"app-menu")(5,"router-outlet"))},dependencies:[AT,aJ]})}return t})();class Bp{constructor(e){return e}}class A2{constructor(){return(0,Kr.getApps)()}}const GA=new ce("angularfire2._apps"),lJ={provide:Bp,useFactory:function cJ(t){return t&&1===t.length?t[0]:new Bp((0,Kr.getApp)())},deps:[[new vi,GA]]},dJ={provide:A2,deps:[[new vi,GA]]};function hJ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Bp(r)}}let fJ=(()=>{class t{constructor(n){(0,Kr.registerVersion)("angularfire",VT.full,"core"),(0,Kr.registerVersion)("angularfire",VT.full,"app"),(0,Kr.registerVersion)("angular",Bb.full,n.toString())}static \u0275fac=function(r){return new(r||t)(oe(ao))};static \u0275mod=Yn({type:t});static \u0275inj=vr({providers:[lJ,dJ]})}return t})();function b2(t,...e){return{ngModule:fJ,providers:[{provide:GA,useFactory:hJ(t),multi:!0,deps:[vt,Hr,W_,...e]}]}}const S2=h1(Kr.initializeApp,!0);Me(562);class P2{constructor(){return FT("auth")}}class QA{constructor(e){return e}}const M2="firestore",YA=new ce("angularfire2.firestore-instances");function vJ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new QA(r)}}const IJ={provide:class _J{constructor(){return FT(M2)}},deps:[[new vi,YA]]},EJ={provide:QA,useFactory:function yJ(t,e){const n=function l1(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}(M2,t,e);return n&&new QA(n)},deps:[[new vi,YA],Bp]};let wJ=(()=>{class t{constructor(){(0,Kr.registerVersion)("angularfire",VT.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Yn({type:t});static \u0275inj=vr({providers:[EJ,IJ]})}return t})();function TJ(t,...e){return{ngModule:wJ,providers:[{provide:YA,useFactory:vJ(t),multi:!0,deps:[vt,Hr,W_,A2,[new vi,P2],[new vi,LT],...e]}]}}const DJ=h1(VQ,!0),N2={firebaseConfig:{apiKey:"AIzaSyABgUPgAgx3r25wa0rtodrpk88BWEtzaQ8",authDomain:"leccion-u2.firebaseapp.com",projectId:"leccion-u2",storageBucket:"leccion-u2.appspot.com",messagingSenderId:"656276473174",appId:"1:656276473174:web:a285323537ffc34e2dc2f7",measurementId:"G-RJCGE7H9N7"}};let CJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Yn({type:t,bootstrap:[uJ]});static#n=this.\u0275inj=vr({providers:[{provide:G_,useValue:N2.firebaseConfig}],imports:[b2(()=>S2(N2.firebaseConfig)),TJ(()=>DJ()),v3,sJ,R9,b2(()=>S2({projectId:"leccion-u2",appId:"1:656276473174:web:a285323537ffc34e2dc2f7",storageBucket:"leccion-u2.appspot.com",apiKey:"AIzaSyABgUPgAgx3r25wa0rtodrpk88BWEtzaQ8",authDomain:"leccion-u2.firebaseapp.com",messagingSenderId:"656276473174",measurementId:"G-RJCGE7H9N7"}))]})}return t})();_3().bootstrapModule(CJ).catch(t=>console.error(t))},106:(bi,Dn,Me)=>{Me.d(Dn,{Z:()=>Cn});var T=Me(58),q=Me(537),x=Me(534),De=Me(879);class ft{constructor(Ve,Fe){this._delegate=Ve,this.firebase=Fe,(0,x._addComponent)(Ve,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=Ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this._delegate.automaticDataCollectionEnabled=Ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ve=>{this._delegate.checkDestroyed(),Ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,x.deleteApp)(this._delegate)))}_getService(Ve,Fe=x._DEFAULT_ENTRY_NAME){var xn;this._delegate.checkDestroyed();const qt=this._delegate.container.getProvider(Ve);return!qt.isInitialized()&&"EXPLICIT"===(null===(xn=qt.getComponent())||void 0===xn?void 0:xn.instantiationMode)&&qt.initialize(),qt.getImmediate({identifier:Fe})}_removeServiceInstance(Ve,Fe=x._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ve).clearInstance(Fe)}_addComponent(Ve){(0,x._addComponent)(this._delegate,Ve)}_addOrOverwriteComponent(Ve){(0,x._addOrOverwriteComponent)(this._delegate,Ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const an=new T.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function at(){const nt=function Nt(nt){const Ve={},Fe={__esModule:!0,initializeApp:function et(qe,te={}){const st=x.initializeApp(qe,te);if((0,T.r3)(Ve,st.name))return Ve[st.name];const Vt=new nt(st,Fe);return Ve[st.name]=Vt,Vt},app:qt,registerVersion:x.registerVersion,setLogLevel:x.setLogLevel,onLog:x.onLog,apps:null,SDK_VERSION:x.SDK_VERSION,INTERNAL:{registerComponent:function Rr(qe){const te=qe.name,st=te.replace("-compat","");if(x._registerComponent(qe)&&"PUBLIC"===qe.type){const Vt=(nn=qt())=>{if("function"!=typeof nn[st])throw an.create("invalid-app-argument",{appName:te});return nn[st]()};void 0!==qe.serviceProps&&(0,T.ZB)(Vt,qe.serviceProps),Fe[st]=Vt,nt.prototype[st]=function(...nn){return this._getService.bind(this,te).apply(this,qe.multipleInstances?nn:[])}}return"PUBLIC"===qe.type?Fe[st]:null},removeApp:function xn(qe){delete Ve[qe]},useAsService:function pn(qe,te){return"serverAuth"===te?null:te},modularAPIs:x}};function qt(qe){if(!(0,T.r3)(Ve,qe=qe||x._DEFAULT_ENTRY_NAME))throw an.create("no-app",{appName:qe});return Ve[qe]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function It(){return Object.keys(Ve).map(qe=>Ve[qe])}}),qt.App=nt,Fe}(ft);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:at,extendNamespace:function Ve(Fe){(0,T.ZB)(nt,Fe)},createSubscribe:T.ne,ErrorFactory:T.LL,deepExtend:T.ZB}),nt}(),re=new De.Yd("@firebase/app-compat");if((0,T.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Cn=Z;!function pt(nt){(0,x.registerVersion)("@firebase/app-compat","0.2.23",nt)}()},534:(bi,Dn,Me)=>{Me.r(Dn),Me.d(Dn,{FirebaseError:()=>De.ZR,SDK_VERSION:()=>Ni,_DEFAULT_ENTRY_NAME:()=>fi,_addComponent:()=>Nr,_addOrOverwriteComponent:()=>xr,_apps:()=>Zn,_clearComponents:()=>cn,_components:()=>Mr,_getProvider:()=>Et,_registerComponent:()=>Ln,_removeServiceInstance:()=>Or,deleteApp:()=>gn,getApp:()=>gi,getApps:()=>Sn,initializeApp:()=>xi,onLog:()=>Mo,registerVersion:()=>kr,setLogLevel:()=>fs});var T=Me(861),q=Me(537),x=Me(879),De=Me(58);const ft=(k,P)=>P.some(ee=>k instanceof ee);let Wt,an;const Z=new WeakMap,re=new WeakMap,Te=new WeakMap,je=new WeakMap,pt=new WeakMap;let Ve={get(k,P,ee){if(k instanceof IDBTransaction){if("done"===P)return re.get(k);if("objectStoreNames"===P)return k.objectStoreNames||Te.get(k);if("store"===P)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return et(k[P])},set:(k,P,ee)=>(k[P]=ee,!0),has:(k,P)=>k instanceof IDBTransaction&&("done"===P||"store"===P)||P in k};function qt(k){return"function"==typeof k?function xn(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function at(){return an||(an=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...P){return k.apply(It(this),P),et(Z.get(this))}:function(...P){return et(k.apply(It(this),P))}:function(P,...ee){const we=k.call(It(this),P,...ee);return Te.set(we,P.sort?P.sort():[P]),et(we)}}(k):(k instanceof IDBTransaction&&function nt(k){if(re.has(k))return;const P=new Promise((ee,we)=>{const Ge=()=>{k.removeEventListener("complete",Qe),k.removeEventListener("error",H),k.removeEventListener("abort",H)},Qe=()=>{ee(),Ge()},H=()=>{we(k.error||new DOMException("AbortError","AbortError")),Ge()};k.addEventListener("complete",Qe),k.addEventListener("error",H),k.addEventListener("abort",H)});re.set(k,P)}(k),ft(k,function Nt(){return Wt||(Wt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,Ve):k)}function et(k){if(k instanceof IDBRequest)return function Cn(k){const P=new Promise((ee,we)=>{const Ge=()=>{k.removeEventListener("success",Qe),k.removeEventListener("error",H)},Qe=()=>{ee(et(k.result)),Ge()},H=()=>{we(k.error),Ge()};k.addEventListener("success",Qe),k.addEventListener("error",H)});return P.then(ee=>{ee instanceof IDBCursor&&Z.set(ee,k)}).catch(()=>{}),pt.set(P,k),P}(k);if(je.has(k))return je.get(k);const P=qt(k);return P!==k&&(je.set(k,P),pt.set(P,k)),P}const It=k=>pt.get(k),qe=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],st=new Map;function Vt(k,P){if(!(k instanceof IDBDatabase)||P in k||"string"!=typeof P)return;if(st.get(P))return st.get(P);const ee=P.replace(/FromIndex$/,""),we=P!==ee,Ge=te.includes(ee);if(!(ee in(we?IDBIndex:IDBObjectStore).prototype)||!Ge&&!qe.includes(ee))return;const Qe=function(){var H=(0,T.Z)(function*(dn,...Ee){const Xe=this.transaction(dn,Ge?"readwrite":"readonly");let Va=Xe.store;return we&&(Va=Va.index(Ee.shift())),(yield Promise.all([Va[ee](...Ee),Ge&&Xe.done]))[0]});return function(Ee){return H.apply(this,arguments)}}();return st.set(P,Qe),Qe}!function Fe(k){Ve=k(Ve)}(k=>({...k,get:(P,ee,we)=>Vt(P,ee)||k.get(P,ee,we),has:(P,ee)=>!!Vt(P,ee)||k.has(P,ee)}));class nn{constructor(P){this.container=P}getPlatformInfoString(){return this.container.getProviders().map(ee=>{if(function un(k){const P=k.getComponent();return"VERSION"===P?.type}(ee)){const we=ee.getImmediate();return`${we.library}/${we.version}`}return null}).filter(ee=>ee).join(" ")}}const li="@firebase/app",We=new x.Yd("@firebase/app"),fi="[DEFAULT]",pi={[li]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Zn=new Map,Mr=new Map;function Nr(k,P){try{k.container.addComponent(P)}catch(ee){We.debug(`Component ${P.name} failed to register with FirebaseApp ${k.name}`,ee)}}function xr(k,P){k.container.addOrOverwriteComponent(P)}function Ln(k){const P=k.name;if(Mr.has(P))return We.debug(`There were multiple attempts to register component ${P}.`),!1;Mr.set(P,k);for(const ee of Zn.values())Nr(ee,k);return!0}function Et(k,P){const ee=k.container.getProvider("heartbeat").getImmediate({optional:!0});return ee&&ee.triggerHeartbeat(),k.container.getProvider(P)}function Or(k,P,ee=fi){Et(k,P).clearInstance(ee)}function cn(){Mr.clear()}const Zt=new De.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ln{constructor(P,ee,we){this._isDeleted=!1,this._options=Object.assign({},P),this._config=Object.assign({},ee),this._name=ee.name,this._automaticDataCollectionEnabled=ee.automaticDataCollectionEnabled,this._container=we,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(P){this.checkDestroyed(),this._automaticDataCollectionEnabled=P}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(P){this._isDeleted=P}checkDestroyed(){if(this.isDeleted)throw Zt.create("app-deleted",{appName:this._name})}}const Ni="10.6.0";function xi(k,P={}){let ee=k;"object"!=typeof P&&(P={name:P});const we=Object.assign({name:fi,automaticDataCollectionEnabled:!1},P),Ge=we.name;if("string"!=typeof Ge||!Ge)throw Zt.create("bad-app-name",{appName:String(Ge)});if(ee||(ee=(0,De.aH)()),!ee)throw Zt.create("no-options");const Qe=Zn.get(Ge);if(Qe){if((0,De.vZ)(ee,Qe.options)&&(0,De.vZ)(we,Qe.config))return Qe;throw Zt.create("duplicate-app",{appName:Ge})}const H=new q.H0(Ge);for(const Ee of Mr.values())H.addComponent(Ee);const dn=new ln(ee,we,H);return Zn.set(Ge,dn),dn}function gi(k=fi){const P=Zn.get(k);if(!P&&k===fi&&(0,De.aH)())return xi();if(!P)throw Zt.create("no-app",{appName:k});return P}function Sn(){return Array.from(Zn.values())}function gn(k){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,T.Z)(function*(k){const P=k.name;Zn.has(P)&&(Zn.delete(P),yield Promise.all(k.container.getProviders().map(ee=>ee.delete())),k.isDeleted=!0)})).apply(this,arguments)}function kr(k,P,ee){var we;let Ge=null!==(we=pi[k])&&void 0!==we?we:k;ee&&(Ge+=`-${ee}`);const Qe=Ge.match(/\s|\//),H=P.match(/\s|\//);if(Qe||H){const dn=[`Unable to register library "${Ge}" with version "${P}":`];return Qe&&dn.push(`library name "${Ge}" contains illegal characters (whitespace or "/")`),Qe&&H&&dn.push("and"),H&&dn.push(`version name "${P}" contains illegal characters (whitespace or "/")`),void We.warn(dn.join(" "))}Ln(new q.wA(`${Ge}-version`,()=>({library:Ge,version:P}),"VERSION"))}function Mo(k,P){if(null!==k&&"function"!=typeof k)throw Zt.create("invalid-log-argument");(0,x.Am)(k,P)}function fs(k){(0,x.Ub)(k)}const zs="firebase-heartbeat-database",Oi=1,S="firebase-heartbeat-store";let C=null;function I(){return C||(C=function Rr(k,P,{blocked:ee,upgrade:we,blocking:Ge,terminated:Qe}={}){const H=indexedDB.open(k,P),dn=et(H);return we&&H.addEventListener("upgradeneeded",Ee=>{we(et(H.result),Ee.oldVersion,Ee.newVersion,et(H.transaction),Ee)}),ee&&H.addEventListener("blocked",Ee=>ee(Ee.oldVersion,Ee.newVersion,Ee)),dn.then(Ee=>{Qe&&Ee.addEventListener("close",()=>Qe()),Ge&&Ee.addEventListener("versionchange",Xe=>Ge(Xe.oldVersion,Xe.newVersion,Xe))}).catch(()=>{}),dn}(zs,Oi,{upgrade:(k,P)=>{0===P&&k.createObjectStore(S)}}).catch(k=>{throw Zt.create("idb-open",{originalErrorMessage:k.message})})),C}function v(){return(v=(0,T.Z)(function*(k){try{return yield(yield I()).transaction(S).objectStore(S).get(_e(k))}catch(P){if(P instanceof De.ZR)We.warn(P.message);else{const ee=Zt.create("idb-get",{originalErrorMessage:P?.message});We.warn(ee.message)}}})).apply(this,arguments)}function A(k,P){return W.apply(this,arguments)}function W(){return(W=(0,T.Z)(function*(k,P){try{const we=(yield I()).transaction(S,"readwrite");yield we.objectStore(S).put(P,_e(k)),yield we.done}catch(ee){if(ee instanceof De.ZR)We.warn(ee.message);else{const we=Zt.create("idb-set",{originalErrorMessage:ee?.message});We.warn(we.message)}}})).apply(this,arguments)}function _e(k){return`${k.name}!${k.options.appId}`}class lt{constructor(P){this.container=P,this._heartbeatsCache=null;const ee=this.container.getProvider("app").getImmediate();this._storage=new Ce(ee),this._heartbeatsCachePromise=this._storage.read().then(we=>(this._heartbeatsCache=we,we))}triggerHeartbeat(){var P=this;return(0,T.Z)(function*(){var ee;const Ge=P.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Qe=he();if(null==(null===(ee=P._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)&&(P._heartbeatsCache=yield P._heartbeatsCachePromise),P._heartbeatsCache.lastSentHeartbeatDate!==Qe&&!P._heartbeatsCache.heartbeats.some(H=>H.date===Qe))return P._heartbeatsCache.heartbeats.push({date:Qe,agent:Ge}),P._heartbeatsCache.heartbeats=P._heartbeatsCache.heartbeats.filter(H=>{const dn=new Date(H.date).valueOf();return Date.now()-dn<=2592e6}),P._storage.overwrite(P._heartbeatsCache)})()}getHeartbeatsHeader(){var P=this;return(0,T.Z)(function*(){var ee;if(null===P._heartbeatsCache&&(yield P._heartbeatsCachePromise),null==(null===(ee=P._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||0===P._heartbeatsCache.heartbeats.length)return"";const we=he(),{heartbeatsToSend:Ge,unsentEntries:Qe}=function Dt(k,P=1024){const ee=[];let we=k.slice();for(const Ge of k){const Qe=ee.find(H=>H.agent===Ge.agent);if(Qe){if(Qe.dates.push(Ge.date),On(ee)>P){Qe.dates.pop();break}}else if(ee.push({agent:Ge.agent,dates:[Ge.date]}),On(ee)>P){ee.pop();break}we=we.slice(1)}return{heartbeatsToSend:ee,unsentEntries:we}}(P._heartbeatsCache.heartbeats),H=(0,De.L)(JSON.stringify({version:2,heartbeats:Ge}));return P._heartbeatsCache.lastSentHeartbeatDate=we,Qe.length>0?(P._heartbeatsCache.heartbeats=Qe,yield P._storage.overwrite(P._heartbeatsCache)):(P._heartbeatsCache.heartbeats=[],P._storage.overwrite(P._heartbeatsCache)),H})()}}function he(){return(new Date).toISOString().substring(0,10)}class Ce{constructor(P){this.app=P,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.Z)(function*(){return!!(0,De.hl)()&&(0,De.eu)().then(()=>!0).catch(()=>!1)})()}read(){var P=this;return(0,T.Z)(function*(){return(yield P._canUseIndexedDBPromise)&&(yield function w(k){return v.apply(this,arguments)}(P.app))||{heartbeats:[]}})()}overwrite(P){var ee=this;return(0,T.Z)(function*(){var we;if(yield ee._canUseIndexedDBPromise){const Qe=yield ee.read();return A(ee.app,{lastSentHeartbeatDate:null!==(we=P.lastSentHeartbeatDate)&&void 0!==we?we:Qe.lastSentHeartbeatDate,heartbeats:P.heartbeats})}})()}add(P){var ee=this;return(0,T.Z)(function*(){var we;if(yield ee._canUseIndexedDBPromise){const Qe=yield ee.read();return A(ee.app,{lastSentHeartbeatDate:null!==(we=P.lastSentHeartbeatDate)&&void 0!==we?we:Qe.lastSentHeartbeatDate,heartbeats:[...Qe.heartbeats,...P.heartbeats]})}})()}}function On(k){return(0,De.L)(JSON.stringify({version:2,heartbeats:k})).length}!function Ws(k){Ln(new q.wA("platform-logger",P=>new nn(P),"PRIVATE")),Ln(new q.wA("heartbeat",P=>new lt(P),"PRIVATE")),kr(li,"0.9.23",k),kr(li,"0.9.23","esm2017"),kr("fire-js","")}("")},537:(bi,Dn,Me)=>{Me.d(Dn,{H0:()=>Nt,wA:()=>x});var T=Me(861),q=Me(58);class x{constructor(Z,re,Te){this.name=Z,this.instanceFactory=re,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const De="[DEFAULT]";class ft{constructor(Z,re){this.name=Z,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const re=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(re)){const Te=new q.BH;if(this.instancesDeferred.set(re,Te),this.isInitialized(re)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:re});je&&Te.resolve(je)}catch{}}return this.instancesDeferred.get(re).promise}getImmediate(Z){var re;const Te=this.normalizeInstanceIdentifier(Z?.identifier),je=null!==(re=Z?.optional)&&void 0!==re&&re;if(!this.isInitialized(Te)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(pt){if(je)return null;throw pt}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function an(at){return"EAGER"===at.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:De})}catch{}for(const[re,Te]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(re);try{const pt=this.getOrInitializeService({instanceIdentifier:je});Te.resolve(pt)}catch{}}}}clearInstance(Z=De){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,T.Z)(function*(){const re=Array.from(Z.instances.values());yield Promise.all([...re.filter(Te=>"INTERNAL"in Te).map(Te=>Te.INTERNAL.delete()),...re.filter(Te=>"_delete"in Te).map(Te=>Te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=De){return this.instances.has(Z)}getOptions(Z=De){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:re={}}=Z,Te=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:Te,options:re});for(const[pt,Cn]of this.instancesDeferred.entries())Te===this.normalizeInstanceIdentifier(pt)&&Cn.resolve(je);return je}onInit(Z,re){var Te;const je=this.normalizeInstanceIdentifier(re),pt=null!==(Te=this.onInitCallbacks.get(je))&&void 0!==Te?Te:new Set;pt.add(Z),this.onInitCallbacks.set(je,pt);const Cn=this.instances.get(je);return Cn&&Z(Cn,je),()=>{pt.delete(Z)}}invokeOnInitCallbacks(Z,re){const Te=this.onInitCallbacks.get(re);if(Te)for(const je of Te)try{je(Z,re)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:re={}}){let Te=this.instances.get(Z);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:(at=Z,at===De?void 0:at),options:re}),this.instances.set(Z,Te),this.instancesOptions.set(Z,re),this.invokeOnInitCallbacks(Te,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,Te)}catch{}var at;return Te||null}normalizeInstanceIdentifier(Z=De){return this.component?this.component.multipleInstances?Z:De:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Nt{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const re=this.getProvider(Z.name);if(re.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);re.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const re=new ft(Z,this);return this.providers.set(Z,re),re}getProviders(){return Array.from(this.providers.values())}}},879:(bi,Dn,Me)=>{Me.d(Dn,{Am:()=>at,Ub:()=>Nt,Yd:()=>an,in:()=>q});const T=[];var q=function(Z){return Z[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",Z}(q||{});const x={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},De=q.INFO,ft={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},Wt=(Z,re,...Te)=>{if(re<Z.logLevel)return;const je=(new Date).toISOString(),pt=ft[re];if(!pt)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[pt](`[${je}]  ${Z.name}:`,...Te)};class an{constructor(re){this.name=re,this._logLevel=De,this._logHandler=Wt,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in q))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?x[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...re),this._logHandler(this,q.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...re),this._logHandler(this,q.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,q.INFO,...re),this._logHandler(this,q.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,q.WARN,...re),this._logHandler(this,q.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...re),this._logHandler(this,q.ERROR,...re)}}function Nt(Z){T.forEach(re=>{re.setLogLevel(Z)})}function at(Z,re){for(const Te of T){let je=null;re&&re.level&&(je=x[re.level]),Te.userLogHandler=null===Z?null:(pt,Cn,...nt)=>{const Ve=nt.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch{return null}}).filter(Fe=>Fe).join(" ");Cn>=(je??pt.logLevel)&&Z({level:q[Cn].toLowerCase(),message:Ve,args:nt,type:pt.name})}}}},365:(bi,Dn,Me)=>{Me.r(Dn);var T=Me(861),q=Me(106),x=Me(562),De=Me(58),an=(Me(534),Me(879),Me(537));function Nt(){return window}function re(){return re=(0,T.Z)(function*(I,w,v){var A;const{BuildInfo:W}=Nt();(0,x.au)(w.sessionId,"AuthEvent did not contain a session ID");const _e=yield function Fe(I){return xn.apply(this,arguments)}(w.sessionId),ve={};return(0,x.av)()?ve.ibi=W.packageName:(0,x.aw)()?ve.apn=W.packageName:(0,x.ax)(I,"operation-not-supported-in-this-environment"),W.displayName&&(ve.appDisplayName=W.displayName),ve.sessionId=_e,(0,x.ay)(I,v,w.type,void 0,null!==(A=w.eventId)&&void 0!==A?A:void 0,ve)}),re.apply(this,arguments)}function je(){return(je=(0,T.Z)(function*(I){const{BuildInfo:w}=Nt(),v={};(0,x.av)()?v.iosBundleId=w.packageName:(0,x.aw)()?v.androidPackageName=w.packageName:(0,x.ax)(I,"operation-not-supported-in-this-environment"),yield(0,x.az)(I,v)})).apply(this,arguments)}function nt(){return(nt=(0,T.Z)(function*(I,w,v){const{cordova:A}=Nt();let W=()=>{};try{yield new Promise((_e,ve)=>{let Oe=null;function lt(){var Ce;_e();const On=null===(Ce=A.plugins.browsertab)||void 0===Ce?void 0:Ce.close;"function"==typeof On&&On(),"function"==typeof v?.close&&v.close()}function he(){Oe||(Oe=window.setTimeout(()=>{ve((0,x.aB)(I,"redirect-cancelled-by-user"))},2e3))}function Dt(){"visible"===document?.visibilityState&&he()}w.addPassiveListener(lt),document.addEventListener("resume",he,!1),(0,x.aw)()&&document.addEventListener("visibilitychange",Dt,!1),W=()=>{w.removePassiveListener(lt),document.removeEventListener("resume",he,!1),document.removeEventListener("visibilitychange",Dt,!1),Oe&&window.clearTimeout(Oe)}})}finally{W()}})).apply(this,arguments)}function xn(){return(xn=(0,T.Z)(function*(I){const w=function qt(I){if((0,x.au)(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(I);const w=new ArrayBuffer(I.length),v=new Uint8Array(w);for(let A=0;A<I.length;A++)v[A]=I.charCodeAt(A);return v}(I),v=yield crypto.subtle.digest("SHA-256",w);return Array.from(new Uint8Array(v)).map(W=>W.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class It extends x.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(w=>{this.resolveInialized=w})}addPassiveListener(w){this.passiveListeners.add(w)}removePassiveListener(w){this.passiveListeners.delete(w)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(w){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(w)),super.onEvent(w)}initialized(){var w=this;return(0,T.Z)(function*(){yield w.initPromise})()}}function qe(I){return te.apply(this,arguments)}function te(){return(te=(0,T.Z)(function*(I){const w=yield nn()._get(un(I));return w&&(yield nn()._remove(un(I))),w})).apply(this,arguments)}function Vt(){const I=[];for(let v=0;v<20;v++){const A=Math.floor(62*Math.random());I.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(A))}return I.join("")}function nn(){return(0,x.aE)(x.b)}function un(I){return(0,x.aF)("authEvent",I.config.apiKey,I.name)}function We(I){if(!I?.includes("?"))return{};const[w,...v]=I.split("?");return(0,De.zd)(v.join("?"))}const L=class Si{constructor(){this._redirectPersistence=x.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=x.aG,this._overrideRedirectResult=x.aH}_initialize(w){var v=this;return(0,T.Z)(function*(){const A=w._key();let W=v.eventManagers.get(A);return W||(W=new It(w),v.eventManagers.set(A,W),v.attachCallbackListeners(w,W)),W})()}_openPopup(w){(0,x.ax)(w,"operation-not-supported-in-this-environment")}_openRedirect(w,v,A,W){var _e=this;return(0,T.Z)(function*(){!function Ve(I){var w,v,A,W,_e,ve,Oe,lt,he,Dt;const Ce=Nt();(0,x.aC)("function"==typeof(null===(w=Ce?.universalLinks)||void 0===w?void 0:w.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,x.aC)(typeof(null===(v=Ce?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,x.aC)("function"==typeof(null===(_e=null===(W=null===(A=Ce?.cordova)||void 0===A?void 0:A.plugins)||void 0===W?void 0:W.browsertab)||void 0===_e?void 0:_e.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.aC)("function"==typeof(null===(lt=null===(Oe=null===(ve=Ce?.cordova)||void 0===ve?void 0:ve.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===lt?void 0:lt.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.aC)("function"==typeof(null===(Dt=null===(he=Ce?.cordova)||void 0===he?void 0:he.InAppBrowser)||void 0===Dt?void 0:Dt.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(w);const ve=yield _e._initialize(w);yield ve.initialized(),ve.resetRedirect(),(0,x.aI)(),yield _e._originValidation(w);const Oe=function Rr(I,w,v=null){return{type:w,eventId:v,urlResponse:null,sessionId:Vt(),postBody:null,tenantId:I.tenantId,error:(0,x.aB)(I,"no-auth-event")}}(w,A,W);yield function pn(I,w){return nn()._set(un(I),w)}(w,Oe);const lt=yield function Z(I,w,v){return re.apply(this,arguments)}(w,Oe,v),he=yield function pt(I){const{cordova:w}=Nt();return new Promise(v=>{w.plugins.browsertab.isAvailable(A=>{let W=null;A?w.plugins.browsertab.openUrl(I):W=w.InAppBrowser.open(I,(0,x.aA)()?"_blank":"_system","location=yes"),v(W)})})}(lt);return function Cn(I,w,v){return nt.apply(this,arguments)}(w,ve,he)})()}_isIframeWebStorageSupported(w,v){throw new Error("Method not implemented.")}_originValidation(w){const v=w._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Te(I){return je.apply(this,arguments)}(w)),this.originValidationPromises[v]}attachCallbackListeners(w,v){const{universalLinks:A,handleOpenURL:W,BuildInfo:_e}=Nt(),ve=setTimeout((0,T.Z)(function*(){yield qe(w),v.onEvent($())}),500),Oe=function(){var Dt=(0,T.Z)(function*(Ce){clearTimeout(ve);const On=yield qe(w);let Ws=null;On&&Ce?.url&&(Ws=function st(I,w){var v,A;const W=function di(I){const w=We(I),v=w.link?decodeURIComponent(w.link):void 0,A=We(v).link,W=w.deep_link_id?decodeURIComponent(w.deep_link_id):void 0;return We(W).link||W||A||v||I}(w);if(W.includes("/__/auth/callback")){const _e=We(W),ve=_e.firebaseError?function li(I){try{return JSON.parse(I)}catch{return null}}(decodeURIComponent(_e.firebaseError)):null,Oe=null===(A=null===(v=ve?.code)||void 0===v?void 0:v.split("auth/"))||void 0===A?void 0:A[1],lt=Oe?(0,x.aB)(Oe):null;return lt?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:lt,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:W,postBody:null}}return null}(On,Ce.url)),v.onEvent(Ws||$())});return function(On){return Dt.apply(this,arguments)}}();typeof A<"u"&&"function"==typeof A.subscribe&&A.subscribe(null,Oe);const lt=W,he=`${_e.packageName.toLowerCase()}://`;Nt().handleOpenURL=function(){var Dt=(0,T.Z)(function*(Ce){if(Ce.toLowerCase().startsWith(he)&&Oe({url:Ce}),"function"==typeof lt)try{lt(Ce)}catch(On){console.error(On)}});return function(Ce){return Dt.apply(this,arguments)}}()}};function $(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,x.aB)("no-auth-event")}}function ue(){var I;return(null===(I=self?.location)||void 0===I?void 0:I.protocol)||null}function ge(I=(0,De.z$)()){return!("file:"!==ue()&&"ionic:"!==ue()&&"capacitor:"!==ue()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gt(){try{const I=self.localStorage,w=x.aN();if(I)return I.setItem(w,"1"),I.removeItem(w),!function bt(I=(0,De.z$)()){return function ut(){return(0,De.w1)()&&11===document?.documentMode}()||function Lt(I=(0,De.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,De.hl)()}catch{return An()&&(0,De.hl)()}return!1}function An(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function bn(){return(function Je(){return"http:"===ue()||"https:"===ue()}()||(0,De.ru)()||ge())&&!function Se(){return(0,De.b$)()||(0,De.UG)()}()&&Gt()&&!An()}function Fn(){return ge()&&typeof document<"u"}function hi(){return(hi=(0,T.Z)(function*(){return!!Fn()&&new Promise(I=>{const w=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(w),I(!0)})})})).apply(this,arguments)}const ct={LOCAL:"local",NONE:"none",SESSION:"session"},Pi=x.aC,Mi="persistence";function pi(I){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,T.Z)(function*(I){yield I._initializationPromise;const w=Nr(),v=x.aF(Mi,I.config.apiKey,I.name);w&&w.setItem(v,I._getPersistence())})).apply(this,arguments)}function Nr(){var I;try{return(null===(I=function Ri(){return typeof window<"u"?window:null}())||void 0===I?void 0:I.sessionStorage)||null}catch{return null}}const xr=x.aC;class Ln{constructor(){this.browserResolver=x.aE(x.k),this.cordovaResolver=x.aE(L),this.underlyingResolver=null,this._redirectPersistence=x.a,this._completeRedirectFn=x.aG,this._overrideRedirectResult=x.aH}_initialize(w){var v=this;return(0,T.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(w)})()}_openPopup(w,v,A,W){var _e=this;return(0,T.Z)(function*(){return yield _e.selectUnderlyingResolver(),_e.assertedUnderlyingResolver._openPopup(w,v,A,W)})()}_openRedirect(w,v,A,W){var _e=this;return(0,T.Z)(function*(){return yield _e.selectUnderlyingResolver(),_e.assertedUnderlyingResolver._openRedirect(w,v,A,W)})()}_isIframeWebStorageSupported(w,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(w,v)}_originValidation(w){return this.assertedUnderlyingResolver._originValidation(w)}get _shouldInitProactively(){return Fn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var w=this;return(0,T.Z)(function*(){if(w.underlyingResolver)return;const v=yield function yr(){return hi.apply(this,arguments)}();w.underlyingResolver=v?w.cordovaResolver:w.browserResolver})()}}function Et(I){return I.unwrap()}function cn(I){return Zt(I)}function Zt(I){const{_tokenResponse:w}=I instanceof De.ZR?I.customData:I;if(!w)return null;if(!(I instanceof De.ZR)&&"temporaryProof"in w&&"phoneNumber"in w)return x.P.credentialFromResult(I);const v=w.providerId;if(!v||v===x.p.PASSWORD)return null;let A;switch(v){case x.p.GOOGLE:A=x.X;break;case x.p.FACEBOOK:A=x.W;break;case x.p.GITHUB:A=x.Y;break;case x.p.TWITTER:A=x.$;break;default:const{oauthIdToken:W,oauthAccessToken:_e,oauthTokenSecret:ve,pendingToken:Oe,nonce:lt}=w;return _e||ve||W||Oe?Oe?v.startsWith("saml.")?x.aQ._create(v,Oe):x.N._fromParams({providerId:v,signInMethod:v,pendingToken:Oe,idToken:W,accessToken:_e}):new x.Z(v).credential({idToken:W,accessToken:_e,rawNonce:lt}):null}return I instanceof De.ZR?A.credentialFromError(I):A.credentialFromResult(I)}function ln(I,w){return w.catch(v=>{throw v instanceof De.ZR&&function ka(I,w){var v;const A=null===(v=w.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===w?.code)w.resolver=new gi(I,x.as(I,w));else if(A){const W=Zt(w),_e=w;W&&(_e.credential=W,_e.tenantId=A.tenantId||void 0,_e.email=A.email||void 0,_e.phoneNumber=A.phoneNumber||void 0)}}(I,v),v}).then(v=>{const W=v.user;return{operationType:v.operationType,credential:cn(v),additionalUserInfo:x.aq(v),user:Sn.getOrCreate(W)}})}function Ni(I,w){return xi.apply(this,arguments)}function xi(){return(xi=(0,T.Z)(function*(I,w){const v=yield w;return{verificationId:v.verificationId,confirm:A=>ln(I,v.confirm(A))}})).apply(this,arguments)}class gi{constructor(w,v){this.resolver=v,this.auth=function Or(I){return I.wrapped()}(w)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(w){return ln(Et(this.auth),this.resolver.resolveSignIn(w))}}class Sn{constructor(w){this._delegate=w,this.multiFactor=x.at(w)}static getOrCreate(w){return Sn.USER_MAP.has(w)||Sn.USER_MAP.set(w,new Sn(w)),Sn.USER_MAP.get(w)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(w){return this._delegate.getIdTokenResult(w)}getIdToken(w){return this._delegate.getIdToken(w)}linkAndRetrieveDataWithCredential(w){return this.linkWithCredential(w)}linkWithCredential(w){var v=this;return(0,T.Z)(function*(){return ln(v.auth,x.a2(v._delegate,w))})()}linkWithPhoneNumber(w,v){var A=this;return(0,T.Z)(function*(){return Ni(A.auth,x.l(A._delegate,w,v))})()}linkWithPopup(w){var v=this;return(0,T.Z)(function*(){return ln(v.auth,x.d(v._delegate,w,Ln))})()}linkWithRedirect(w){var v=this;return(0,T.Z)(function*(){return yield pi(x.aJ(v.auth)),x.g(v._delegate,w,Ln)})()}reauthenticateAndRetrieveDataWithCredential(w){return this.reauthenticateWithCredential(w)}reauthenticateWithCredential(w){var v=this;return(0,T.Z)(function*(){return ln(v.auth,x.a3(v._delegate,w))})()}reauthenticateWithPhoneNumber(w,v){return Ni(this.auth,x.r(this._delegate,w,v))}reauthenticateWithPopup(w){return ln(this.auth,x.e(this._delegate,w,Ln))}reauthenticateWithRedirect(w){var v=this;return(0,T.Z)(function*(){return yield pi(x.aJ(v.auth)),x.h(v._delegate,w,Ln)})()}sendEmailVerification(w){return x.ag(this._delegate,w)}unlink(w){var v=this;return(0,T.Z)(function*(){return yield x.ap(v._delegate,w),v})()}updateEmail(w){return x.al(this._delegate,w)}updatePassword(w){return x.am(this._delegate,w)}updatePhoneNumber(w){return x.u(this._delegate,w)}updateProfile(w){return x.ak(this._delegate,w)}verifyBeforeUpdateEmail(w,v){return x.ah(this._delegate,w,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Sn.USER_MAP=new WeakMap;const gn=x.aC;let Kn=(()=>{class I{constructor(v,A){if(this.app=v,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:W}=v.options;gn(W,"invalid-api-key",{appName:v.name}),gn(W,"invalid-api-key",{appName:v.name});const _e=typeof window<"u"?Ln:void 0;this._delegate=A.initialize({options:{persistence:Mo(W,v.name),popupRedirectResolver:_e}}),this._delegate._updateErrorMap(x.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Sn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,A){x.K(this._delegate,v,A)}applyActionCode(v){return x.a7(this._delegate,v)}checkActionCode(v){return x.a8(this._delegate,v)}confirmPasswordReset(v,A){return x.a6(this._delegate,v,A)}createUserWithEmailAndPassword(v,A){var W=this;return(0,T.Z)(function*(){return ln(W._delegate,x.aa(W._delegate,v,A))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return x.af(this._delegate,v)}isSignInWithEmailLink(v){return x.ad(this._delegate,v)}getRedirectResult(){var v=this;return(0,T.Z)(function*(){gn(bn(),v._delegate,"operation-not-supported-in-this-environment");const A=yield x.j(v._delegate,Ln);return A?ln(v._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function j(I,w){(0,x.aJ)(I)._logFramework(w)}(this._delegate,v)}onAuthStateChanged(v,A,W){const{next:_e,error:ve,complete:Oe}=kr(v,A,W);return this._delegate.onAuthStateChanged(_e,ve,Oe)}onIdTokenChanged(v,A,W){const{next:_e,error:ve,complete:Oe}=kr(v,A,W);return this._delegate.onIdTokenChanged(_e,ve,Oe)}sendSignInLinkToEmail(v,A){return x.ac(this._delegate,v,A)}sendPasswordResetEmail(v,A){return x.a5(this._delegate,v,A||void 0)}setPersistence(v){var A=this;return(0,T.Z)(function*(){let W;switch(function fi(I,w){Pi(Object.values(ct).includes(w),I,"invalid-persistence-type"),(0,De.b$)()?Pi(w!==ct.SESSION,I,"unsupported-persistence-type"):(0,De.UG)()?Pi(w===ct.NONE,I,"unsupported-persistence-type"):An()?Pi(w===ct.NONE||w===ct.LOCAL&&(0,De.hl)(),I,"unsupported-persistence-type"):Pi(w===ct.NONE||Gt(),I,"unsupported-persistence-type")}(A._delegate,v),v){case ct.SESSION:W=x.a;break;case ct.LOCAL:W=(yield x.aE(x.i)._isAvailable())?x.i:x.b;break;case ct.NONE:W=x.U;break;default:return x.ax("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(W)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return ln(this._delegate,x.a0(this._delegate))}signInWithCredential(v){return ln(this._delegate,x.a1(this._delegate,v))}signInWithCustomToken(v){return ln(this._delegate,x.a4(this._delegate,v))}signInWithEmailAndPassword(v,A){return ln(this._delegate,x.ab(this._delegate,v,A))}signInWithEmailLink(v,A){return ln(this._delegate,x.ae(this._delegate,v,A))}signInWithPhoneNumber(v,A){return Ni(this._delegate,x.s(this._delegate,v,A))}signInWithPopup(v){var A=this;return(0,T.Z)(function*(){return gn(bn(),A._delegate,"operation-not-supported-in-this-environment"),ln(A._delegate,x.c(A._delegate,v,Ln))})()}signInWithRedirect(v){var A=this;return(0,T.Z)(function*(){return gn(bn(),A._delegate,"operation-not-supported-in-this-environment"),yield pi(A._delegate),x.f(A._delegate,v,Ln)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return x.a9(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=ct,I})();function kr(I,w,v){let A=I;"function"!=typeof I&&({next:A,error:w,complete:v}=I);const W=A;return{next:ve=>W(ve&&Sn.getOrCreate(ve)),error:w,complete:v}}function Mo(I,w){const v=function Mr(I,w){const v=Nr();if(!v)return[];const A=x.aF(Mi,I,w);switch(v.getItem(A)){case ct.NONE:return[x.U];case ct.LOCAL:return[x.i,x.a];case ct.SESSION:return[x.a];default:return[]}}(I,w);if(typeof self<"u"&&!v.includes(x.i)&&v.push(x.i),typeof window<"u")for(const A of[x.b,x.a])v.includes(A)||v.push(A);return v.includes(x.U)||v.push(x.U),v}class fs{constructor(){this.providerId="phone",this._delegate=new x.P(Et(q.Z.auth()))}static credential(w,v){return x.P.credential(w,v)}verifyPhoneNumber(w,v){return this._delegate.verifyPhoneNumber(w,v)}unwrap(){return this._delegate}}fs.PHONE_SIGN_IN_METHOD=x.P.PHONE_SIGN_IN_METHOD,fs.PROVIDER_ID=x.P.PROVIDER_ID;const zs=x.aC;class Oi{constructor(w,v,A=q.Z.app()){var W;zs(null===(W=A.options)||void 0===W?void 0:W.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new x.R(A.auth(),w,v),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function C(I){I.INTERNAL.registerComponent(new an.wA("auth-compat",w=>{const v=w.getProvider("app-compat").getImmediate(),A=w.getProvider("auth");return new Kn(v,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:x.A.EMAIL_SIGNIN,PASSWORD_RESET:x.A.PASSWORD_RESET,RECOVER_EMAIL:x.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:x.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:x.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:x.A.VERIFY_EMAIL}},EmailAuthProvider:x.V,FacebookAuthProvider:x.W,GithubAuthProvider:x.Y,GoogleAuthProvider:x.X,OAuthProvider:x.Z,SAMLAuthProvider:x._,PhoneAuthProvider:fs,PhoneMultiFactorGenerator:x.m,RecaptchaVerifier:Oi,TwitterAuthProvider:x.$,Auth:Kn,AuthCredential:x.L,Error:De.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.4.9")}(q.Z)},861:(bi,Dn,Me)=>{function T(x,De,ft,Wt,an,Nt,at){try{var Z=x[Nt](at),re=Z.value}catch(Te){return void ft(Te)}Z.done?De(re):Promise.resolve(re).then(Wt,an)}function q(x){return function(){var De=this,ft=arguments;return new Promise(function(Wt,an){var Nt=x.apply(De,ft);function at(re){T(Nt,Wt,an,at,Z,"next",re)}function Z(re){T(Nt,Wt,an,at,Z,"throw",re)}at(void 0)})}}Me.d(Dn,{Z:()=>q})},582:(bi,Dn,Me)=>{function De(L,$){var j={};for(var V in L)Object.prototype.hasOwnProperty.call(L,V)&&$.indexOf(V)<0&&(j[V]=L[V]);if(null!=L&&"function"==typeof Object.getOwnPropertySymbols){var Q=0;for(V=Object.getOwnPropertySymbols(L);Q<V.length;Q++)$.indexOf(V[Q])<0&&Object.prototype.propertyIsEnumerable.call(L,V[Q])&&(j[V[Q]]=L[V[Q]])}return j}function Te(L,$,j,V){return new(j||(j=Promise))(function(K,ue){function Je(ut){try{Se(V.next(ut))}catch(Lt){ue(Lt)}}function ge(ut){try{Se(V.throw(ut))}catch(Lt){ue(Lt)}}function Se(ut){ut.done?K(ut.value):function Q(K){return K instanceof j?K:new j(function(ue){ue(K)})}(ut.value).then(Je,ge)}Se((V=V.apply(L,$||[])).next())})}function et(L){return this instanceof et?(this.v=L,this):new et(L)}function It(L,$,j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,V=j.apply(L,$||[]),K=[];return Q={},ue("next"),ue("throw"),ue("return"),Q[Symbol.asyncIterator]=function(){return this},Q;function ue(bt){V[bt]&&(Q[bt]=function(Gt){return new Promise(function(An,bn){K.push([bt,Gt,An,bn])>1||Je(bt,Gt)})})}function Je(bt,Gt){try{!function ge(bt){bt.value instanceof et?Promise.resolve(bt.value.v).then(Se,ut):Lt(K[0][2],bt)}(V[bt](Gt))}catch(An){Lt(K[0][3],An)}}function Se(bt){Je("next",bt)}function ut(bt){Je("throw",bt)}function Lt(bt,Gt){bt(Gt),K.shift(),K.length&&Je(K[0][0],K[0][1])}}function pn(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,$=L[Symbol.asyncIterator];return $?$.call(L):(L=function nt(L){var $="function"==typeof Symbol&&Symbol.iterator,j=$&&L[$],V=0;if(j)return j.call(L);if(L&&"number"==typeof L.length)return{next:function(){return L&&V>=L.length&&(L=void 0),{value:L&&L[V++],done:!L}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}(L),j={},V("next"),V("throw"),V("return"),j[Symbol.asyncIterator]=function(){return this},j);function V(K){j[K]=L[K]&&function(ue){return new Promise(function(Je,ge){!function Q(K,ue,Je,ge){Promise.resolve(ge).then(function(Se){K({value:Se,done:Je})},ue)}(Je,ge,(ue=L[K](ue)).done,ue.value)})}}}Me.d(Dn,{FC:()=>It,KL:()=>pn,_T:()=>De,mG:()=>Te,qq:()=>et}),"function"==typeof SuppressedError&&SuppressedError}},bi=>{bi(bi.s=713)}]);